"use strict";window.onload=function(){var e={popup:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.onHide,o=t.onShow,n=function(){document.body.style.cssText="position: fixed; margin-top: ".concat(-window.scrollY,"px")},c=function(e){document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,e)};return{isShown:function(){return e.classList.contains("popup--opened")},show:function(){var t=new Promise((function(t){e.style.display="block",t()}));n(),t.then((function(){e.classList.add("popup--opened"),"function"==typeof o&&o()}))},hide:function(){var t=-parseInt(document.body.style.marginTop);e.classList.remove("popup--opened"),setTimeout((function(){e.style.display="none",c(t),"function"==typeof r&&r()}),300)}}},validate:function(e,t){var r=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,o=function(e){e.closest(".input")?e.closest(".input").classList.add("input--error"):e.closest(".textarea")&&e.closest(".textarea").classList.add("textarea--error"),e.focus()};e.querySelector('button[type="submit"]').addEventListener("click",(function(n){n.preventDefault();var c=!0,a=Array.from(e.querySelectorAll("input[required], textarea[required]")),s=e.querySelectorAll(".checkboxselect");a.reverse().map((function(e){switch(e.dataset.passRepeat&&e.value!==e.closest("form").querySelector("input[data-pass]").value&&o(e),e.getAttribute("type")){case"text":case"password":""===e.value&&(o(e),c=!1);break;case"tel":(""===e.value||e.value.includes("_"))&&(o(e),c=!1);break;case"checkbox":e.checked||(e.closest(".checkbox").classList.add("checkbox--error"),c=!1);break;case"email":r.test(e.value)||(o(e),c=!1);break;default:""===e.value&&(o(e),c=!1)}})),s.length&&Array.from(s).map((function(e){var t=!1;Array.from(e.querySelectorAll(".checkbox__input")).map((function(e){e.checked&&(t=!0)})),t||(e.classList.add("checkboxselect--error"),c=!1)})),c&&t()})),Array.from(e.querySelectorAll("input")).concat(Array.from(e.querySelectorAll("textarea"))).map((function(e){return e.addEventListener("input",(function(){e.closest(".input")?e.closest(".input").classList.remove("input--error"):e.closest(".checkbox")?e.closest(".checkbox").classList.remove("checkbox--error"):e.closest(".textarea")&&e.closest(".textarea").classList.remove("textarea--error")}))}))}};Array.from(document.querySelectorAll(".js-open-popup")).map((function(t){return t.addEventListener("click",(function(t){t.preventDefault();var r=t.currentTarget.dataset.popup,o=document.querySelector('.js-popup[data-popup="'.concat(r,'"]'));e.popup(o).show()}))})),Array.from(document.querySelectorAll(".js-close-popup")).map((function(t){return t.addEventListener("click",(function(t){if(t.preventDefault(),!t.target.closest(".popup__window")||!t.currentTarget.classList.contains("js-popup")){var r=t.currentTarget.closest(".popup");e.popup(r).hide()}}))})),document.querySelector("form[data-restore-form]")&&e.validate(document.querySelector("form[data-restore-form]"),(function(){})),document.querySelector("form[data-request-auth-form]")&&e.validate(document.querySelector("form[data-request-auth-form]"),(function(){})),document.querySelector("form[data-request-form]")&&e.validate(document.querySelector("form[data-request-form]"),(function(){var t=document.querySelector('.js-popup[data-popup="request"]'),r=document.querySelector('.js-popup[data-popup="request-success"]');e.popup(t,{onHide:function(){Array.from(t.querySelectorAll("input")).map((function(e){return e.value=""})),e.popup(r).show()}}).hide()}));var t=Array.from(document.querySelectorAll(".dropdown"));document.addEventListener("click",(function(e){e.target.closest(".dropdown")||t.map((function(e){return e.classList.remove("dropdown--active")}))})),t.map((function(e){return e.addEventListener("click",(function(e){e.preventDefault();var r=e.currentTarget;r.classList.contains("dropdown--active")||(t.map((function(e){return e!==r&&e.classList.remove("dropdown--active")})),r.classList.toggle("dropdown--active"))}))})),document.addEventListener("click",(function(e){if(e.target.getAttribute("data-toggle")){var t=e.target,r=t.innerText,o=t.cloneNode(),n=t.closest(".dropdown").querySelector(".dropdown__value");o.innerText=n.innerText,n.innerText=r,t.parentNode.prepend(o),t.parentNode.removeChild(t)}e.target.closest(".dropdown__menu-item")&&document.querySelector(".dropdown--active").classList.remove("dropdown--active")})),Array.from(document.querySelectorAll(".tabs__item")).map((function(e){return e.addEventListener("click",(function(e){e.preventDefault();var t=e.currentTarget,r=t.dataset.tab;t.closest(".tabs").querySelector(".tabs__item--active").classList.remove("tabs__item--active"),t.classList.add("tabs__item--active"),t.closest("[data-tabs]").querySelector("[data-active]").removeAttribute("data-active"),t.closest("[data-tabs]").querySelector('[data-content="'.concat(r,'"]')).setAttribute("data-active",!0)}))}));var r=new Event("changeCountry");Array.from(document.querySelectorAll(".input.dropdown")).concat(Array.from(document.querySelectorAll(".input .dropdown"))).map((function(e){return e.addEventListener("click",(function(){var t=e.querySelector(".dropdown__menu");e.closest(".input").querySelector(".input__dropdown").style.width=e.closest(".input").getBoundingClientRect().width+"px",t.classList.contains("fakeScroll")||t.fakeScroll()}))})),Array.from(document.querySelectorAll(".input__dropdown-item[data-code-loc]")).map((function(e){return e.addEventListener("click",(function(){var t=e.dataset.codeLoc,r=e.dataset.mask,o=e.closest(".input").querySelector("input");e.closest(".input__code").dataset.codeLoc=t,e.closest(".input__code").dataset.mask=r,o.placeholder=r.replaceAll("9","_"),function(e,t){Inputmask({mask:t}).mask(e)}(o,r)}))})),Array.from(document.querySelectorAll(".input__dropdown-item[data-dropdown]")).map((function(e){return e.addEventListener("click",(function(){var t=e.innerText;e.closest(".input").querySelector("input").value=t,e.closest(".input").classList.remove("input--error"),e.closest(".input").classList.contains("js-auth-country")&&e.closest(".input").dispatchEvent(r)}))})),Array.from(document.querySelectorAll('input[type="tel"]')).map((function(e){Inputmask({mask:e.closest(".input").querySelector(".input__code").dataset.mask}).mask(e)})),Array.from(document.querySelectorAll(".checkboxselect__list")).map((function(e){e.addEventListener("click",(function(t){t.stopPropagation();var r=e.closest(".checkboxselect"),o=!1;r.classList.remove("checkboxselect--error"),Array.from(e.querySelectorAll(".checkbox__input")).map((function(t){var n=r.querySelector(".checkboxselect__input-placeholder");t.checked&&(o=!0),t.addEventListener("click",(function(){var t="";Array.from(e.querySelectorAll("input:checked")).map((function(e){t+=e.closest(".checkboxselect__item").querySelector(".checkbox__text").innerText+", "})),t?(n.innerText=t.substring(0,t.length-2),n.classList.add("checkboxselect__input-placeholder--active")):(n.innerText=n.dataset.placeholder,n.classList.remove("checkboxselect__input-placeholder--active"))}))})),o?r.classList.add("checkboxselect--checked"):r.classList.remove("checkboxselect--checked")})),e.fakeScroll()})),Array.from(document.querySelectorAll(".filters__dropdown-item")).map((function(e){return e.addEventListener("click",(function(e){var t=e.currentTarget,r=t.innerText;t.closest(".filters__input").querySelector(".filters__input-field").value=r}))})),Array.from(document.querySelectorAll(".filters__input-field")).map((function(e){var t=e,r=function(e){var r=t.nextElementSibling,o=r.querySelector(".fakeScroll__content")||r,n=JSON.parse(t.dataset.options),c=t.value.toLowerCase(),a=!1;o.innerHTML="",n.map((function(t){(e||0===t.toLowerCase().indexOf(c))&&(a=!0,o.insertAdjacentHTML("beforeend",'<a class="filters__dropdown-item dropdown__menu-item" href="javascript:void(0)">'.concat(t,"</a>")))})),a?r.classList.remove("filters__dropdown--hidden"):r.classList.add("filters__dropdown--hidden"),Array.from(o.querySelectorAll(".filters__dropdown-item")).map((function(e){return e.addEventListener("click",(function(){t.value=e.innerText,t.setAttribute("data-value",e.innerText)}))})),e&&!r.classList.contains("fakeScroll")&&o.fakeScroll()};"cost"!==t.name&&(t.addEventListener("input",(function(){return r(!1)})),t.addEventListener("focus",(function(){return r(!0)})),t.addEventListener("blur",(function(){""!==t.value&&t.dataset.value?t.value=t.dataset.value:t.value=""})))})),Array.from(document.querySelectorAll(".filters__cost-range")).map((function(e){var t=+e.dataset.min,r=+e.dataset.max;noUiSlider.create(e,{start:[t,r],connect:!0,range:{min:t,max:r},step:100}),e.noUiSlider.on("slide",(function(t){var r=parseInt(t[0]),o=parseInt(t[1]);e.closest(".filters__input").querySelector(".filters__input-field").value="".concat(r," ₽ – ").concat(o," ₽"),e.closest(".filters__cost").querySelector('[data-cost="from"]').innerText=r,e.closest(".filters__cost").querySelector('[data-cost="to"]').innerText=o}))})),Array.from(document.querySelectorAll(".js-tutorcard-more")).map((function(e){return e.addEventListener("click",(function(){e.style.display="none",Array.from(e.closest(".tutorcard__subjects").querySelectorAll(".tutorcard__subjects-item--hidden")).map((function(e){e.classList.remove("tutorcard__subjects-item--hidden")}))}))}));var o=document.querySelector(".cookies");JSON.parse(localStorage.getItem("letmetutor:cookiesIsHidden"))?o.remove():(o.classList.add("cookies--shown"),document.querySelector(".cookies__btn").addEventListener("click",(function(){o.classList.remove("cookies--shown"),setTimeout((function(){o.remove(),localStorage.setItem("letmetutor:cookiesIsHidden",!0)}),500)})));var n=document.querySelector(".header__banner"),c=function(){!function(e){document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,e)}(),document.querySelector(".header-menu").classList.remove("header-menu--shown")};JSON.parse(localStorage.getItem("letmetutor:bannerIsHidden"))?n.remove():(n.style.display="flex",document.querySelector(".header__banner-close").addEventListener("click",(function(){n.classList.add("header__banner--hide"),setTimeout((function(){n.remove(),localStorage.setItem("letmetutor:bannerIsHidden",!0)}),500)}))),document.querySelector(".header__burger").addEventListener("click",(function(){-parseInt(document.body.style.marginTop),document.body.style.cssText="position: fixed; margin-top: ".concat(-window.scrollY,"px"),document.querySelector(".header-menu").classList.add("header-menu--shown")})),document.querySelector(".header-menu__backdrop").addEventListener("click",c),document.querySelector(".header-menu__close").addEventListener("click",c),Array.from(document.querySelectorAll(".header__notifications-wrapper")).map((function(e){e.classList.contains("fakeScroll")||e.fakeScroll()}));new Swiper(".popular__grid--mobile",{loop:!0,loopAdditionalSlides:3,spaceBetween:20,slidesPerView:"auto",centeredSlides:!0,breakpoints:{760:{slidesPerView:2,centeredSlides:!1}}}),new Swiper(".reviews__slider",{loop:!0,spaceBetween:20,slidesPerView:3,slidesPerGroup:3,loopAdditionalSlides:3,pagination:{el:".swiper-pagination",clickable:!0}}),new Swiper(".reviews__slider--mobile",{loop:!0,spaceBetween:20,loopAdditionalSlides:3,pagination:{el:".swiper-pagination",clickable:!0}});if(document.querySelector("form[data-login-form]")&&e.validate(document.querySelector("form[data-login-form]"),(function(){console.log(!0)})),document.querySelector("form[data-signup-student-form]")&&e.validate(document.querySelector("form[data-signup-student-form]"),(function(){})),document.querySelector("form[data-signup-tutor-form]")&&e.validate(document.querySelector("form[data-signup-tutor-form]"),(function(){})),document.querySelector("form[data-support-form]")&&e.validate(document.querySelector("form[data-support-form]"),(function(){})),document.querySelectorAll(".js-auth-country").length&&Array.from(document.querySelectorAll(".js-auth-country")).map((function(e){return e.addEventListener("changeCountry",(function(t){e.closest("form").querySelector(".js-auth-city").dataset.country=t.target.querySelector("input").value}))})),document.querySelectorAll(".js-auth-city input").length){var a=[{key:"Россия",cities:["Москва","Санкт-Петербург","Казань","Нижний Новгород","Сочи","Екатеринбург","Ростов-на-Дону","Новосибирск","Тюмень","Калининград","Уфа","Красноярск","Краснодар","Челябинск","Воронеж"]},{key:"Украина",cities:["Киев","Днепр","Донецк","Запорожье","Львов","Кривой Рог","Севастополь","Николаев","Мариуполь"]}];Array.from(document.querySelectorAll(".js-auth-city input")).map((function(e){return e.addEventListener("input",(function(e){var t=e.currentTarget,r=t.closest(".input"),o=r.dataset.country;if(o){var n=a.filter((function(e){return e.key===o}))[0].cities,c=t.value.toLowerCase(),s=t.closest(".input").querySelector(".dropdown__menu"),i=!1;s.innerHTML="",""!==e.currentTarget.value&&(n.map((function(e){0===e.toLowerCase().indexOf(c)&&(i=!0,s.insertAdjacentHTML("beforeend",'<a class="input__dropdown-item" href="javascript:void(0)">'.concat(e,"</a>")))})),i&&Array.from(r.querySelectorAll(".input__dropdown-item")).map((function(e){return e.addEventListener("click",(function(){t.value=e.innerText}))})))}}))})),document.querySelector(".js-auth-city input").addEventListener("focus",(function(e){e.currentTarget.closest(".input").querySelector(".dropdown__menu").innerHTML=""}))}document.querySelectorAll('input[name="rulesAgreement"]').length&&Array.from(document.querySelectorAll('input[name="rulesAgreement"]')).map((function(e){return e.addEventListener("change",(function(){var t=e.closest("form").querySelector('button[type="submit"]');e.checked?(t.classList.remove("button--disabled"),t.removeAttribute("disabled")):(t.classList.add("button--disabled"),t.setAttribute("disabled","disabled"))}))}))};