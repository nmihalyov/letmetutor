"use strict";window.onload=function(){var e={popup:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.onHide,o=t.onShow,n=function(){document.body.style.cssText="position: fixed; margin-top: ".concat(-window.scrollY,"px")},c=function(e){document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,e)};return{isShown:function(){return e.classList.contains("popup--opened")},show:function(){var t=new Promise((function(t){e.style.display="block",t()}));n(),t.then((function(){e.classList.add("popup--opened"),"function"==typeof o&&o()}))},hide:function(){var t=-parseInt(document.body.style.marginTop);e.classList.remove("popup--opened"),setTimeout((function(){e.style.display="none",c(t),"function"==typeof r&&r()}),300)}}},validate:function(e,t){var r=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,o=function(e){e.closest(".input")?e.closest(".input").classList.add("input--error"):e.closest(".textarea")&&e.closest(".textarea").classList.add("textarea--error"),e.focus()};e.querySelector('button[type="submit"]').addEventListener("click",(function(n){n.preventDefault();var c=!0,a=Array.from(e.querySelectorAll("input[required], textarea[required]")),i=e.querySelectorAll(".checkboxselect");a.reverse().map((function(e){switch(e.dataset.passRepeat&&e.value!==e.closest("form").querySelector("input[data-pass]").value&&o(e),e.getAttribute("type")){case"text":case"password":""===e.value&&(o(e),c=!1);break;case"tel":(""===e.value||e.value.includes("_"))&&(o(e),c=!1);break;case"checkbox":e.checked||(e.closest(".checkbox").classList.add("checkbox--error"),c=!1);break;case"email":r.test(e.value)||(o(e),c=!1);break;default:""===e.value&&(o(e),c=!1)}})),i.length&&Array.from(i).map((function(e){var t=!1;Array.from(e.querySelectorAll(".checkbox__input")).map((function(e){e.checked&&(t=!0)})),t||(e.classList.add("checkboxselect--error"),c=!1)})),c&&t()})),Array.from(e.querySelectorAll("input")).concat(Array.from(e.querySelectorAll("textarea"))).map((function(e){return e.addEventListener("input",(function(){e.closest(".input")?e.closest(".input").classList.remove("input--error"):e.closest(".checkbox")?e.closest(".checkbox").classList.remove("checkbox--error"):e.closest(".textarea")&&e.closest(".textarea").classList.remove("textarea--error")}))}))}};Array.from(document.querySelectorAll(".js-open-popup")).map((function(t){return t.addEventListener("click",(function(t){t.preventDefault();var r=t.currentTarget.dataset.popup,o=document.querySelector('.js-popup[data-popup="'.concat(r,'"]'));e.popup(o).show()}))})),Array.from(document.querySelectorAll(".js-close-popup")).map((function(t){return t.addEventListener("click",(function(t){if(t.preventDefault(),!t.target.closest(".popup__window")||!t.currentTarget.classList.contains("js-popup")){var r=t.currentTarget.closest(".popup");e.popup(r).hide()}}))})),document.querySelector("form[data-restore-form]")&&e.validate(document.querySelector("form[data-restore-form]"),(function(){})),document.addEventListener("click",(function(e){e.target.closest(".dropdown")||Array.from(document.querySelectorAll(".dropdown")).map((function(e){return e.classList.remove("dropdown--active")}))})),Array.from(document.querySelectorAll(".dropdown")).map((function(e){return e.addEventListener("click",(function(e){e.preventDefault();var t=e.currentTarget;Array.from(document.querySelectorAll(".dropdown")).map((function(e){return e!==t&&e.classList.remove("dropdown--active")})),t.classList.toggle("dropdown--active")}))})),document.addEventListener("click",(function(e){if(e.target.getAttribute("data-toggle")){var t=e.target,r=t.innerText,o=t.cloneNode(),n=t.closest(".dropdown").querySelector(".dropdown__value");o.innerText=n.innerText,n.innerText=r,t.parentNode.prepend(o),t.parentNode.removeChild(t)}})),Array.from(document.querySelectorAll(".tabs__item")).map((function(e){return e.addEventListener("click",(function(e){e.preventDefault();var t=e.currentTarget,r=t.dataset.tab;t.closest(".tabs").querySelector(".tabs__item--active").classList.remove("tabs__item--active"),t.classList.add("tabs__item--active"),t.closest("[data-tabs]").querySelector("[data-active]").removeAttribute("data-active"),t.closest("[data-tabs]").querySelector('[data-content="'.concat(r,'"]')).setAttribute("data-active",!0)}))}));var t=new Event("changeCountry");Array.from(document.querySelectorAll(".input.dropdown")).concat(Array.from(document.querySelectorAll(".input .dropdown"))).map((function(e){return e.addEventListener("click",(function(){e.closest(".input").querySelector(".input__dropdown").style.width=e.closest(".input").getBoundingClientRect().width+"px"}))})),Array.from(document.querySelectorAll(".input__dropdown-item[data-code-loc]")).map((function(e){return e.addEventListener("click",(function(){var t=e.dataset.codeLoc,r=e.dataset.mask,o=e.closest(".input").querySelector("input");e.closest(".input__code").dataset.codeLoc=t,e.closest(".input__code").dataset.mask=r,o.placeholder=r.replaceAll("9","_"),function(e,t){Inputmask({mask:t}).mask(e)}(o,r)}))})),Array.from(document.querySelectorAll(".input__dropdown-item[data-dropdown]")).map((function(e){return e.addEventListener("click",(function(){var r=e.innerText;e.closest(".input").querySelector("input").value=r,e.closest(".input").classList.remove("input--error"),e.closest(".input").classList.contains("js-auth-country")&&e.closest(".input").dispatchEvent(t)}))})),Array.from(document.querySelectorAll('input[type="tel"]')).map((function(e){Inputmask({mask:e.closest(".input").querySelector(".input__code").dataset.mask}).mask(e)})),Array.from(document.querySelectorAll(".checkboxselect__list")).map((function(e){e.addEventListener("click",(function(t){t.stopPropagation();var r=e.closest(".checkboxselect"),o=!1;r.classList.remove("checkboxselect--error"),Array.from(e.querySelectorAll(".checkbox__input")).map((function(t){var n=r.querySelector(".checkboxselect__input-placeholder");t.checked&&(o=!0),t.addEventListener("click",(function(){var t="";Array.from(e.querySelectorAll("input:checked")).map((function(e){t+=e.closest(".checkboxselect__item").querySelector(".checkbox__text").innerText+", "})),t?(n.innerText=t.substring(0,t.length-2),n.classList.add("checkboxselect__input-placeholder--active")):(n.innerText=n.dataset.placeholder,n.classList.remove("checkboxselect__input-placeholder--active"))}))})),o?r.classList.add("checkboxselect--checked"):r.classList.remove("checkboxselect--checked")})),e.fakeScroll()}));var r=document.querySelector(".cookies");JSON.parse(localStorage.getItem("letmetutor:cookiesIsHidden"))?r.remove():(r.classList.add("cookies--shown"),document.querySelector(".cookies__btn").addEventListener("click",(function(){r.classList.remove("cookies--shown"),setTimeout((function(){r.remove(),localStorage.setItem("letmetutor:cookiesIsHidden",!0)}),500)})));var o=document.querySelector(".header__banner"),n=function(){!function(e){document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,e)}(),document.querySelector(".header-menu").classList.remove("header-menu--shown")};JSON.parse(localStorage.getItem("letmetutor:bannerIsHidden"))?o.remove():(o.style.display="flex",document.querySelector(".header__banner-close").addEventListener("click",(function(){o.classList.add("header__banner--hide"),setTimeout((function(){o.remove(),localStorage.setItem("letmetutor:bannerIsHidden",!0)}),500)}))),document.querySelector(".header__burger").addEventListener("click",(function(){-parseInt(document.body.style.marginTop),document.body.style.cssText="position: fixed; margin-top: ".concat(-window.scrollY,"px"),document.querySelector(".header-menu").classList.add("header-menu--shown")})),document.querySelector(".header-menu__backdrop").addEventListener("click",n),document.querySelector(".header-menu__close").addEventListener("click",n),Array.from(document.querySelectorAll(".hero__dropdown-item")).map((function(e){return e.addEventListener("click",(function(e){var t=e.currentTarget,r=t.innerText;t.closest(".hero__input").querySelector(".hero__input-field").value=r}))})),Array.from(document.querySelectorAll(".hero__input-field")).map((function(e){var t=e,r=function(e){var r=t.nextElementSibling,o=r.querySelector(".fakeScroll__content")||r,n=JSON.parse(t.dataset.options),c=t.value.toLowerCase(),a=!1;o.innerHTML="",n.map((function(t){(e||0===t.toLowerCase().indexOf(c))&&(a=!0,o.insertAdjacentHTML("beforeend",'<a class="hero__dropdown-item dropdown__menu-item" href="javascript:void(0)">'.concat(t,"</a>")))})),a?r.classList.remove("hero__dropdown--hidden"):r.classList.add("hero__dropdown--hidden"),Array.from(o.querySelectorAll(".hero__dropdown-item")).map((function(e){return e.addEventListener("click",(function(){t.value=e.innerText,t.setAttribute("data-value",e.innerText)}))})),e&&!r.classList.contains("fakeScroll")&&o.fakeScroll()};t.addEventListener("input",(function(){return r(!1)})),t.addEventListener("focus",(function(){return r(!0)})),t.addEventListener("blur",(function(){""!==t.value&&t.dataset.value?t.value=t.dataset.value:t.value=""}))}));new Swiper(".popular__grid--mobile",{loop:!0,loopAdditionalSlides:3,spaceBetween:20,slidesPerView:"auto",centeredSlides:!0,breakpoints:{760:{slidesPerView:2,centeredSlides:!1}}}),new Swiper(".reviews__slider",{loop:!0,spaceBetween:20,slidesPerView:3,slidesPerGroup:3,loopAdditionalSlides:3,pagination:{el:".swiper-pagination",clickable:!0}}),new Swiper(".reviews__slider--mobile",{loop:!0,spaceBetween:20,loopAdditionalSlides:3,pagination:{el:".swiper-pagination",clickable:!0}});if(document.querySelector("form[data-login-form]")&&e.validate(document.querySelector("form[data-login-form]"),(function(){console.log(!0)})),document.querySelector("form[data-signup-student-form]")&&e.validate(document.querySelector("form[data-signup-student-form]"),(function(){})),document.querySelector("form[data-signup-tutor-form]")&&e.validate(document.querySelector("form[data-signup-tutor-form]"),(function(){})),document.querySelector("form[data-support-form]")&&e.validate(document.querySelector("form[data-support-form]"),(function(){})),document.querySelectorAll(".js-auth-country").length&&Array.from(document.querySelectorAll(".js-auth-country")).map((function(e){return e.addEventListener("changeCountry",(function(t){e.closest("form").querySelector(".js-auth-city").dataset.country=t.target.querySelector("input").value}))})),document.querySelectorAll(".js-auth-city input").length){var c=[{key:"Россия",cities:["Москва","Санкт-Петербург","Казань","Нижний Новгород","Сочи","Екатеринбург","Ростов-на-Дону","Новосибирск","Тюмень","Калининград","Уфа","Красноярск","Краснодар","Челябинск","Воронеж"]},{key:"Украина",cities:["Киев","Днепр","Донецк","Запорожье","Львов","Кривой Рог","Севастополь","Николаев","Мариуполь"]}];Array.from(document.querySelectorAll(".js-auth-city input")).map((function(e){return e.addEventListener("input",(function(e){var t=e.currentTarget,r=t.closest(".input"),o=r.dataset.country;if(o){var n=c.filter((function(e){return e.key===o}))[0].cities,a=t.value.toLowerCase(),i=t.closest(".input").querySelector(".dropdown__menu"),s=!1;i.innerHTML="",""!==e.currentTarget.value&&(n.map((function(e){0===e.toLowerCase().indexOf(a)&&(s=!0,i.insertAdjacentHTML("beforeend",'<a class="input__dropdown-item" href="javascript:void(0)">'.concat(e,"</a>")))})),s&&Array.from(r.querySelectorAll(".input__dropdown-item")).map((function(e){return e.addEventListener("click",(function(){t.value=e.innerText}))})))}}))})),document.querySelector(".js-auth-city input").addEventListener("focus",(function(e){e.currentTarget.closest(".input").querySelector(".dropdown__menu").innerHTML=""}))}document.querySelectorAll('input[name="rulesAgreement"]').length&&Array.from(document.querySelectorAll('input[name="rulesAgreement"]')).map((function(e){return e.addEventListener("change",(function(){var t=e.closest("form").querySelector('button[type="submit"]');e.checked?(t.classList.remove("button--disabled"),t.removeAttribute("disabled")):(t.classList.add("button--disabled"),t.setAttribute("disabled","disabled"))}))}))};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJvbmxvYWQiLCIkYXBpIiwiJHBvcHVwIiwiX3JlZiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm9uSGlkZSIsIm9uU2hvdyIsImRvY3VtZW50Iiwic3R5bGUiLCJjb25jYXQiLCJzY3JvbGxZIiwiYm9keSIsImNzc1RleHQiLCJzY3JvbGxUbyIsIm9mZnNldCIsImlzU2hvd24iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNob3ciLCJQcm9taXNlIiwicmVzb2x2ZSIsImRpc3BsYXkiLCJoaWRlT3ZlcmZsb3ciLCJhZGQiLCJwcm9taXNlIiwiaGlkZSIsInBhcnNlSW50IiwibWFyZ2luVG9wIiwicmVtb3ZlIiwiZm9ybSIsInJlcXVlc3QiLCJlbWFpbFJlZ2V4cCIsInNldEludmFsaWRJbnB1dCIsImlucHV0IiwiY2xvc2VzdCIsInZhbGlkYXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInNldEludmFsaWRDaGVja2JveCIsIkFycmF5IiwiZnJvbSIsIiRjaGVja2JveFNlbGVjdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJxdWVyeVNlbGVjdG9yIiwibWFwIiwiZWwiLCIkZm9ybUlucHV0cyIsInZhbHVlIiwiZm9ybUlzVmFsaWQiLCJnZXRBdHRyaWJ1dGUiLCJpbmNsdWRlcyIsImNoZWNrZWQiLCJ0ZXN0IiwiY2hlY2tib3giLCJjdXJyZW50VGFyZ2V0IiwidGFyZ2V0IiwicG9wdXAiLCIkdGhpcyIsIiRjbG9uZUVsZW1lbnQiLCJjbG9uZU5vZGUiLCJpbm5lclRleHQiLCIkZHJvcGRvd25WYWx1ZSIsInByZXBlbmQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJuZXdWYWx1ZSIsImRhdGFzZXQiLCJ0YWIiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJ3aWR0aCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIklucHV0bWFzayIsIm1hc2siLCIkaW5wdXQiLCJjb2RlTG9jIiwibG9jIiwicGxhY2Vob2xkZXIiLCJkaXNwYXRjaEV2ZW50IiwicmVwbGFjZUFsbCIsImxpc3QiLCJzdG9wUHJvcGFnYXRpb24iLCJpdGVtIiwiJHBsYWNlaG9sZGVyIiwic3Vic3RyaW5nIiwiZmFrZVNjcm9sbCIsIiRjb29raWVzIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNldFRpbWVvdXQiLCIkYmFubmVyIiwiaGlkZUhlYWRlck1lbnUiLCJzaG93T3ZlcmZsb3ciLCJzZXRJdGVtIiwiaGFuZGxlSW5wdXQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCIkZHJvcGRvd25FbGVtZW50IiwibG93ZXJDYXNlVmFsdWUiLCJ0b0xvd2VyQ2FzZSIsIm1hdGNoZXNGb3VuZCIsIiRkcm9wZG93biIsImlubmVySFRNTCIsIm9wdGlvbnMiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJmaXJzdFJlbmRlciIsIlN3aXBlciIsImxvb3AiLCJzcGFjZUJldHdlZW4iLCJzbGlkZXNQZXJWaWV3IiwiYnJlYWtwb2ludHMiLCJsb29wQWRkaXRpb25hbFNsaWRlcyIsImNlbnRlcmVkU2xpZGVzIiwicmV2aWV3c1NsaWRlciIsInNsaWRlc1Blckdyb3VwIiwiY2xpY2thYmxlIiwiY29uc29sZSIsImxvZyIsImNvdW50cnkiLCJjaXRpZXMiLCJrZXkiLCIkbGFiZWxFbGVtZW50IiwiZmlsdGVyIiwiaW5kZXhPZiIsIiRzdWJtaXRCdXR0b24iXSwibWFwcGluZ3MiOiJhQUFBQSxPQUFPQyxPQUFTLFdBRWQsSUFBQUMsRUFBQSxDQUlGQSxNQUFBLFNBQUFDLEdBQWtELElBQUFDLEVBQUFDLFVBQUFDLE9BQUEsUUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQUEsR0FBckNHLEVBQXFDSixFQUFyQ0ksT0FBQUMsRUFBcUNMLEVBQXJDSyxPQUFXRCxFQUFBQSxXQUEwQkUsU0FBbEJELEtBQWtCRSxNQUFsQkYsUUFBa0IsZ0NBQUFHLFFBQUFaLE9BQUFh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LFVBQUFVLGNBQUEsbUJBQ0F1RCxHQUFBQSxFQUVIQSxFQUxESyxVQUFBLEdBT2tCLEtBQWxCMUQsRUFBQVMsY0FBSStDLFFBQ0Y5RCxFQUFBQSxLQUFLLFNBQUFNLEdBQXNHLElBQWpDQSxFQUFBdUQsY0FBT2pFLFFBQUFBLEtBQy9Fc0IsR0FBTVYsRUFDUG1ELEVBRnlFTyxtQkFBQSxZQUV6RSw2REFBQWpHLE9BRnlFcUMsRUFFekUsYUFHTndELEdBM0JnRTlELE1BQUFDLEtBQUFrRixFQUFBaEYsaUJBQUEsMEJBQUFFLEtBQUEsU0FBQUMsR0FBQSxPQUFBQSxFQUFBVixpQkFBQSxTQUFBLFdBQW5Fc0IsRUFBQVYsTUFBQUYsRUFBQWUsd0JBOEJBdEQsU0FBU3FDLGNBQWMsdUJBQXVCUixpQkFBaUIsU0FBUyxTQUFBVSxHQVE3REgsRUFBQUEsY0FDU0EsUUFBaUIsVUFBQUMsY0FBQSxtQkFDN0JrRixVQUFtQjVGLE1BSXZCNEYsU0FBQUEsaUJBQWN6RCxnQ0FBZGxFLFFBQ0RxQyxNQUFBQyxLQUhEbEMsU0FHT29DLGlCQUFBLGlDQUFBRSxLQUFBLFNBQUFDLEdBQUEsT0FBQUEsRUFBQVYsaUJBQUEsVUFBQSxXQUNMMEYsSUFBQUEsRUFBYzlHLEVBQUFBLFFBQWQsUUFBNEI0QixjQUE1Qix5QkFFREUsRUFBQU0sU0FDRjBFLEVBVjJFOUcsVUFBQVksT0FBQSxvQkFBNUVrRyxFQUFBekQsZ0JBQUEsY0FwaEJGeUQsRUFBQTlHLFVBQUFPLElBQUEsb0JBNGhCTXVHLEVBQWN4RCxhQUFhLFdBQVkiLCJmaWxlIjoiY29tbW9uLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XG5cbiAgLy8g0J7QsdGK0LXQutGCINCz0LvQvtCx0LDQu9GM0L3QvtCz0L4gQVBJXG5jb25zdCAkYXBpID0ge307XG5cbi8vIEFQSSDQtNC70Y8g0YDQsNCx0L7RgtGLINGBINC/0L7Qv9Cw0L/QsNC80LhcbiRhcGkucG9wdXAgPSAoJHBvcHVwLCB7IG9uSGlkZSwgb25TaG93IH0gPSB7fSkgPT4ge1xuICAvLyDQntGC0LrQu9GO0YfQsNC10YIg0LLQvtC30LzQvtC20L3QvtGB0YLRjCDRgdC60YDQvtC70LvQuNGC0Ywg0YHRgtGA0LDQvdC40YbRg1xuICBjb25zdCBoaWRlT3ZlcmZsb3cgPSAoKSA9PiB7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jc3NUZXh0ID0gYHBvc2l0aW9uOiBmaXhlZDsgbWFyZ2luLXRvcDogJHstd2luZG93LnNjcm9sbFl9cHhgO1xuICB9O1xuICBcbiAgLy8g0JLQutC70Y7Rh9Cw0LXRgiDQstC+0LfQvNC+0LbQvdC+0YHRgtGMINGB0LrRgNC+0LvQu9C40YLRjCDRgdGC0YDQsNC90LjRhtGDXG4gIGNvbnN0IHNob3dPdmVyZmxvdyA9IG9mZnNldCA9PiB7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jc3NUZXh0ID0gJ3Bvc2l0aW9uOiBzdGF0aWM7IG1hcmdpbi10b3A6IDAnO1xuICAgIFxuICAgIHdpbmRvdy5zY3JvbGxUbygwLCBvZmZzZXQpO1xuICB9O1xuICBcbiAgcmV0dXJuIHtcbiAgICAvLyDQktC+0LfQstGA0LDRidCw0LXRgiB0cnVlLCDQtdGB0LvQuCDQv9C+0L/QsNC/INC/0L7QutCw0LfRi9Cy0LDQtdGC0YHRjywg0LIg0LjQvdC+0Lwg0YHQu9GD0YfQsNC1IGZhbHNlXG4gICAgaXNTaG93bjogKCkgPT4gJHBvcHVwLmNsYXNzTGlzdC5jb250YWlucygncG9wdXAtLW9wZW5lZCcpLFxuICAgIC8vINCf0L7QutCw0LfRi9Cy0LDQtdGCINC/0L7Qv9Cw0L9cbiAgICBzaG93KCkge1xuICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAkcG9wdXAuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0pO1xuXG4gICAgICBoaWRlT3ZlcmZsb3coKTtcblxuICAgICAgcHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgJHBvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwLS1vcGVuZWQnKTtcbiAgICAgICAgaWYgKHR5cGVvZiBvblNob3cgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBvblNob3coKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyDQodC60YDRi9Cy0LDQtdGCINC/0L7Qv9Cw0L9cbiAgICBoaWRlKCkge1xuICAgICAgY29uc3Qgb2Zmc2V0ID0gLXBhcnNlSW50KGRvY3VtZW50LmJvZHkuc3R5bGUubWFyZ2luVG9wKTtcbiAgXG4gICAgICAkcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXAtLW9wZW5lZCcpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICRwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBzaG93T3ZlcmZsb3cob2Zmc2V0KTtcbiAgICAgICAgaWYgKHR5cGVvZiBvbkhpZGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBvbkhpZGUoKTtcbiAgICAgICAgfVxuICAgICAgfSwgMzAwKTtcbiAgICB9XG4gIH07XG59O1xuXG4vLyBBUEkg0LTQu9GPINCy0LDQu9C40LTQsNGG0LjQuCDRhNC+0YDQvFxuJGFwaS52YWxpZGF0ZSA9IChmb3JtLCByZXF1ZXN0KSA9PiB7XG4gIGNvbnN0IGVtYWlsUmVnZXhwID0gL14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC87XG4gIGNvbnN0IHNldEludmFsaWRJbnB1dCA9IGlucHV0ID0+IHtcbiAgICBpZiAoaW5wdXQuY2xvc2VzdCgnLmlucHV0JykpIHtcbiAgICAgIGlucHV0LmNsb3Nlc3QoJy5pbnB1dCcpLmNsYXNzTGlzdC5hZGQoJ2lucHV0LS1lcnJvcicpO1xuICAgIH0gZWxzZSBpZiAoaW5wdXQuY2xvc2VzdCgnLnRleHRhcmVhJykpIHtcbiAgICAgIGlucHV0LmNsb3Nlc3QoJy50ZXh0YXJlYScpLmNsYXNzTGlzdC5hZGQoJ3RleHRhcmVhLS1lcnJvcicpO1xuICAgIH1cbiAgICBpbnB1dC5mb2N1cygpO1xuICB9O1xuICBjb25zdCBzZXRJbnZhbGlkQ2hlY2tib3ggPSBpbnB1dCA9PiB7XG4gICAgaW5wdXQuY2xvc2VzdCgnLmNoZWNrYm94JykuY2xhc3NMaXN0LmFkZCgnY2hlY2tib3gtLWVycm9yJyk7XG4gIH07XG5cbiAgZm9ybS5xdWVyeVNlbGVjdG9yKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgbGV0IGZvcm1Jc1ZhbGlkID0gdHJ1ZTtcbiAgICBjb25zdCAkZm9ybUlucHV0cyA9IEFycmF5LmZyb20oZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtyZXF1aXJlZF0sIHRleHRhcmVhW3JlcXVpcmVkXScpKTtcbiAgICBjb25zdCAkY2hlY2tib3hTZWxlY3QgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGVja2JveHNlbGVjdCcpO1xuXG4gICAgJGZvcm1JbnB1dHMucmV2ZXJzZSgpLm1hcChlbCA9PiB7XG4gICAgICBpZiAoZWwuZGF0YXNldC5wYXNzUmVwZWF0ICYmIGVsLnZhbHVlICE9PSBlbC5jbG9zZXN0KCdmb3JtJykucXVlcnlTZWxlY3RvcignaW5wdXRbZGF0YS1wYXNzXScpLnZhbHVlKSB7XG4gICAgICAgIHNldEludmFsaWRJbnB1dChlbCk7XG4gICAgICB9XG5cbiAgICAgIHN3aXRjaChlbC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSkge1xuICAgICAgICBjYXNlICd0ZXh0JzpcbiAgICAgICAgY2FzZSAncGFzc3dvcmQnOlxuICAgICAgICAgIGlmIChlbC52YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgIHNldEludmFsaWRJbnB1dChlbCk7XG4gICAgICAgICAgICBmb3JtSXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndGVsJzpcbiAgICAgICAgICBpZiAoZWwudmFsdWUgPT09ICcnIHx8IGVsLnZhbHVlLmluY2x1ZGVzKCdfJykpIHtcbiAgICAgICAgICAgIHNldEludmFsaWRJbnB1dChlbCk7XG4gICAgICAgICAgICBmb3JtSXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnY2hlY2tib3gnOlxuICAgICAgICAgIGlmICghZWwuY2hlY2tlZCkge1xuICAgICAgICAgICAgc2V0SW52YWxpZENoZWNrYm94KGVsKTtcbiAgICAgICAgICAgIGZvcm1Jc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgaWYgKCFlbWFpbFJlZ2V4cC50ZXN0KGVsLnZhbHVlKSkge1xuICAgICAgICAgICAgc2V0SW52YWxpZElucHV0KGVsKTtcbiAgICAgICAgICAgIGZvcm1Jc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGlmIChlbC52YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgIHNldEludmFsaWRJbnB1dChlbCk7XG4gICAgICAgICAgICBmb3JtSXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgXG4gICAgaWYgKCRjaGVja2JveFNlbGVjdC5sZW5ndGgpIHtcbiAgICAgIEFycmF5LmZyb20oJGNoZWNrYm94U2VsZWN0KS5tYXAoZWwgPT4ge1xuICAgICAgICBsZXQgY2hlY2tlZCA9IGZhbHNlO1xuICBcbiAgICAgICAgQXJyYXkuZnJvbShlbC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hlY2tib3hfX2lucHV0JykpLm1hcChjaGVja2JveCA9PiB7XG4gICAgICAgICAgaWYgKGNoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgICAgICAgIGNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gIFxuICAgICAgICBpZiAoIWNoZWNrZWQpIHtcbiAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdjaGVja2JveHNlbGVjdC0tZXJyb3InKTtcbiAgICAgICAgICBmb3JtSXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoZm9ybUlzVmFsaWQpIHtcbiAgICAgIHJlcXVlc3QoKTtcbiAgICB9XG4gIH0pO1xuXG4gIEFycmF5LmZyb20oZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpKS5jb25jYXQoQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJykpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgaWYgKGVsLmNsb3Nlc3QoJy5pbnB1dCcpKSB7XG4gICAgICBlbC5jbG9zZXN0KCcuaW5wdXQnKS5jbGFzc0xpc3QucmVtb3ZlKCdpbnB1dC0tZXJyb3InKTtcbiAgICB9IGVsc2UgaWYgKGVsLmNsb3Nlc3QoJy5jaGVja2JveCcpKSB7XG4gICAgICBlbC5jbG9zZXN0KCcuY2hlY2tib3gnKS5jbGFzc0xpc3QucmVtb3ZlKCdjaGVja2JveC0tZXJyb3InKTtcbiAgICB9IGVsc2UgaWYgKGVsLmNsb3Nlc3QoJy50ZXh0YXJlYScpKSB7XG4gICAgICBlbC5jbG9zZXN0KCcudGV4dGFyZWEnKS5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0YXJlYS0tZXJyb3InKTtcbiAgICB9XG4gIH0pKTtcbn07XG5cbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtb3Blbi1wb3B1cCcpKS5tYXAoZWwgPT5cbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wb3B1cDtcbiAgICBjb25zdCAkcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuanMtcG9wdXBbZGF0YS1wb3B1cD1cIiR7dGFyZ2V0fVwiXWApO1xuICAgIFxuICAgICRhcGkucG9wdXAoJHBvcHVwKS5zaG93KCk7XG4gIH0pXG4pO1xuICBcbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWNsb3NlLXBvcHVwJykpLm1hcChlbCA9PlxuICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGlmKCFlLnRhcmdldC5jbG9zZXN0KCcucG9wdXBfX3dpbmRvdycpIHx8ICFlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1wb3B1cCcpKSB7XG4gICAgICBjb25zdCAkcG9wdXAgPSBlLmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnBvcHVwJyk7XG5cbiAgICAgICRhcGkucG9wdXAoJHBvcHVwKS5oaWRlKCk7XG4gICAgfVxuICB9KVxuKTtcblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1yZXN0b3JlLWZvcm1dJykpIHtcbiAgJGFwaS52YWxpZGF0ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtcmVzdG9yZS1mb3JtXScpLCAoKSA9PiB7fSk7XG59XG4gIC8vIGNsb3NlIGRyb3Bkb3duIG9uIG91dGVyIGNsaWNrXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9IGUudGFyZ2V0O1xuXG4gIGlmKCEkdGhpcy5jbG9zZXN0KCcuZHJvcGRvd24nKSkge1xuICAgIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRyb3Bkb3duJykpLm1hcChlbCA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdkcm9wZG93bi0tYWN0aXZlJykpO1xuICB9XG59KTtcblxuLy8gb3BlbiBkcm9wZG93blxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZHJvcGRvd24nKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgJHRoaXMgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gIFxuICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcm9wZG93bicpKS5tYXAoZWwgPT4gZWwgIT09ICR0aGlzICYmIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3Bkb3duLS1hY3RpdmUnKSk7XG4gICR0aGlzLmNsYXNzTGlzdC50b2dnbGUoJ2Ryb3Bkb3duLS1hY3RpdmUnKTtcbn0pKTtcblxuLy8gY2hhbmdlIGRyb3Bkb3duIHZhbHVlXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICBpZiAoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRvZ2dsZScpKSB7XG4gICAgY29uc3QgJHRoaXMgPSBlLnRhcmdldDtcbiAgICBjb25zdCBuZXdWYWx1ZSA9ICR0aGlzLmlubmVyVGV4dDtcbiAgICBjb25zdCAkY2xvbmVFbGVtZW50ID0gJHRoaXMuY2xvbmVOb2RlKCk7XG4gICAgY29uc3QgJGRyb3Bkb3duVmFsdWUgPSAkdGhpcy5jbG9zZXN0KCcuZHJvcGRvd24nKS5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd25fX3ZhbHVlJyk7XG4gICAgXG4gICAgJGNsb25lRWxlbWVudC5pbm5lclRleHQgPSAkZHJvcGRvd25WYWx1ZS5pbm5lclRleHQ7XG4gICAgJGRyb3Bkb3duVmFsdWUuaW5uZXJUZXh0ID0gbmV3VmFsdWU7XG4gICAgXG4gICAgJHRoaXMucGFyZW50Tm9kZS5wcmVwZW5kKCRjbG9uZUVsZW1lbnQpO1xuICAgICR0aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoJHRoaXMpO1xuICB9XG59KTtcbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFic19faXRlbScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0ICR0aGlzID0gZS5jdXJyZW50VGFyZ2V0O1xuICBjb25zdCB0YXJnZXQgPSAkdGhpcy5kYXRhc2V0LnRhYjtcblxuICAkdGhpcy5jbG9zZXN0KCcudGFicycpLnF1ZXJ5U2VsZWN0b3IoJy50YWJzX19pdGVtLS1hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCd0YWJzX19pdGVtLS1hY3RpdmUnKTtcbiAgJHRoaXMuY2xhc3NMaXN0LmFkZCgndGFic19faXRlbS0tYWN0aXZlJyk7XG5cbiAgJHRoaXMuY2xvc2VzdCgnW2RhdGEtdGFic10nKS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3RpdmVdJykucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWFjdGl2ZScpO1xuICAkdGhpcy5jbG9zZXN0KCdbZGF0YS10YWJzXScpLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWNvbnRlbnQ9XCIke3RhcmdldH1cIl1gKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtYWN0aXZlJywgdHJ1ZSk7XG59KSk7XG4gIGNvbnN0IGNoYW5nZUNvdW50cnlFdmVudCA9IG5ldyBFdmVudCgnY2hhbmdlQ291bnRyeScpO1xuXG5jb25zdCB1cGRhdGVNYXNrID0gKGlucHV0LCBtYXNrKSA9PiB7XG4gIElucHV0bWFzayh7bWFza30pLm1hc2soaW5wdXQpO1xufTtcblxuLy8gT3BlbiBpbnB1dCBkcm9wZG93blxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW5wdXQuZHJvcGRvd24nKSlcbi5jb25jYXQoQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW5wdXQgLmRyb3Bkb3duJykpKVxuLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgZWwuY2xvc2VzdCgnLmlucHV0JykucXVlcnlTZWxlY3RvcignLmlucHV0X19kcm9wZG93bicpLnN0eWxlLndpZHRoID0gZWwuY2xvc2VzdCgnLmlucHV0JykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggKyAncHgnO1xufSkpO1xuXG4vLyBDaGFuZ2UgcGhvbmUgY29kZSBvbiBpbnB1dCBkcm9wZG93blxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW5wdXRfX2Ryb3Bkb3duLWl0ZW1bZGF0YS1jb2RlLWxvY10nKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCBsb2MgPSBlbC5kYXRhc2V0LmNvZGVMb2M7XG4gIGNvbnN0IG1hc2sgPSBlbC5kYXRhc2V0Lm1hc2s7XG4gIGNvbnN0ICRpbnB1dCA9IGVsLmNsb3Nlc3QoJy5pbnB1dCcpLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7XG5cbiAgZWwuY2xvc2VzdCgnLmlucHV0X19jb2RlJykuZGF0YXNldC5jb2RlTG9jID0gbG9jO1xuICBlbC5jbG9zZXN0KCcuaW5wdXRfX2NvZGUnKS5kYXRhc2V0Lm1hc2sgPSBtYXNrO1xuICAkaW5wdXQucGxhY2Vob2xkZXIgPSBtYXNrLnJlcGxhY2VBbGwoJzknLCAnXycpO1xuICB1cGRhdGVNYXNrKCRpbnB1dCwgbWFzayk7XG59KSk7XG5cbi8vIENoYW5nZSBpbnB1dCBkcm9wZG93biB2YWx1ZVxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW5wdXRfX2Ryb3Bkb3duLWl0ZW1bZGF0YS1kcm9wZG93bl0nKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCB2YWx1ZSA9IGVsLmlubmVyVGV4dDtcbiAgXG4gIGVsLmNsb3Nlc3QoJy5pbnB1dCcpLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykudmFsdWUgPSB2YWx1ZTtcbiAgZWwuY2xvc2VzdCgnLmlucHV0JykuY2xhc3NMaXN0LnJlbW92ZSgnaW5wdXQtLWVycm9yJyk7XG5cbiAgaWYgKGVsLmNsb3Nlc3QoJy5pbnB1dCcpLmNsYXNzTGlzdC5jb250YWlucygnanMtYXV0aC1jb3VudHJ5JykpIHtcbiAgICBlbC5jbG9zZXN0KCcuaW5wdXQnKS5kaXNwYXRjaEV2ZW50KGNoYW5nZUNvdW50cnlFdmVudCk7XG4gIH1cbn0pKTtcblxuLy8gTWFza2luZyBwaG9uZSBpbnB1dFxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwidGVsXCJdJykpLm1hcChlbCA9PiB7XG4gIElucHV0bWFzayh7bWFzazogZWwuY2xvc2VzdCgnLmlucHV0JykucXVlcnlTZWxlY3RvcignLmlucHV0X19jb2RlJykuZGF0YXNldC5tYXNrfSkubWFzayhlbCk7XG59KTtcbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hlY2tib3hzZWxlY3RfX2xpc3QnKSkubWFwKGxpc3QgPT4ge1xuICBsaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgXG4gICAgY29uc3QgJGNoZWNrYm94U2VsZWN0ID0gbGlzdC5jbG9zZXN0KCcuY2hlY2tib3hzZWxlY3QnKTtcbiAgICBsZXQgY2hlY2tlZCA9IGZhbHNlO1xuXG4gICAgJGNoZWNrYm94U2VsZWN0LmNsYXNzTGlzdC5yZW1vdmUoJ2NoZWNrYm94c2VsZWN0LS1lcnJvcicpO1xuXG4gICAgQXJyYXkuZnJvbShsaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGVja2JveF9faW5wdXQnKSkubWFwKGNoZWNrYm94ID0+IHtcbiAgICAgIGNvbnN0ICRwbGFjZWhvbGRlciA9ICRjaGVja2JveFNlbGVjdC5xdWVyeVNlbGVjdG9yKCcuY2hlY2tib3hzZWxlY3RfX2lucHV0LXBsYWNlaG9sZGVyJyk7XG5cbiAgICAgIGlmIChjaGVja2JveC5jaGVja2VkKSBjaGVja2VkID0gdHJ1ZTtcblxuICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGxldCB2YWx1ZSA9ICcnO1xuXG4gICAgICAgIEFycmF5LmZyb20obGlzdC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dDpjaGVja2VkJykpLm1hcChpdGVtID0+IHtcbiAgICAgICAgICB2YWx1ZSArPSBpdGVtLmNsb3Nlc3QoJy5jaGVja2JveHNlbGVjdF9faXRlbScpLnF1ZXJ5U2VsZWN0b3IoJy5jaGVja2JveF9fdGV4dCcpLmlubmVyVGV4dCArICcsICc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICRwbGFjZWhvbGRlci5pbm5lclRleHQgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgdmFsdWUubGVuZ3RoIC0gMik7XG4gICAgICAgICAgJHBsYWNlaG9sZGVyLmNsYXNzTGlzdC5hZGQoJ2NoZWNrYm94c2VsZWN0X19pbnB1dC1wbGFjZWhvbGRlci0tYWN0aXZlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHBsYWNlaG9sZGVyLmlubmVyVGV4dCA9ICRwbGFjZWhvbGRlci5kYXRhc2V0LnBsYWNlaG9sZGVyO1xuICAgICAgICAgICRwbGFjZWhvbGRlci5jbGFzc0xpc3QucmVtb3ZlKCdjaGVja2JveHNlbGVjdF9faW5wdXQtcGxhY2Vob2xkZXItLWFjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgXG4gICAgaWYgKGNoZWNrZWQpIHtcbiAgICAgICRjaGVja2JveFNlbGVjdC5jbGFzc0xpc3QuYWRkKCdjaGVja2JveHNlbGVjdC0tY2hlY2tlZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkY2hlY2tib3hTZWxlY3QuY2xhc3NMaXN0LnJlbW92ZSgnY2hlY2tib3hzZWxlY3QtLWNoZWNrZWQnKTtcbiAgICB9XG4gIH0pO1xuXG4gIGxpc3QuZmFrZVNjcm9sbCgpO1xufSk7XG5cbiAgY29uc3QgJGNvb2tpZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29va2llcycpO1xuXG5pZiAoIUpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xldG1ldHV0b3I6Y29va2llc0lzSGlkZGVuJykpKSB7XG4gICRjb29raWVzLmNsYXNzTGlzdC5hZGQoJ2Nvb2tpZXMtLXNob3duJyk7XG5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvb2tpZXNfX2J0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICRjb29raWVzLmNsYXNzTGlzdC5yZW1vdmUoJ2Nvb2tpZXMtLXNob3duJyk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAkY29va2llcy5yZW1vdmUoKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsZXRtZXR1dG9yOmNvb2tpZXNJc0hpZGRlbicsIHRydWUpO1xuICAgIH0sIDUwMClcbiAgfSk7XG59IGVsc2Uge1xuICAkY29va2llcy5yZW1vdmUoKTtcbn1cbiAgbGV0IG9mZnNldCA9IDA7XG5jb25zdCAkYmFubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fYmFubmVyJyk7XG5jb25zdCBoaWRlT3ZlcmZsb3cgPSAoKSA9PiB7XG4gIG9mZnNldCA9IC1wYXJzZUludChkb2N1bWVudC5ib2R5LnN0eWxlLm1hcmdpblRvcCk7XG4gIGRvY3VtZW50LmJvZHkuc3R5bGUuY3NzVGV4dCA9IGBwb3NpdGlvbjogZml4ZWQ7IG1hcmdpbi10b3A6ICR7LXdpbmRvdy5zY3JvbGxZfXB4YDtcbn07XG5jb25zdCBzaG93T3ZlcmZsb3cgPSBvZmZzZXQgPT4ge1xuICBkb2N1bWVudC5ib2R5LnN0eWxlLmNzc1RleHQgPSAncG9zaXRpb246IHN0YXRpYzsgbWFyZ2luLXRvcDogMCc7XG4gIHdpbmRvdy5zY3JvbGxUbygwLCBvZmZzZXQpO1xufTtcbmNvbnN0IGhpZGVIZWFkZXJNZW51ID0gKCkgPT4ge1xuICBzaG93T3ZlcmZsb3coKTtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlci1tZW51JykuY2xhc3NMaXN0LnJlbW92ZSgnaGVhZGVyLW1lbnUtLXNob3duJyk7XG59O1xuXG5pZiAoIUpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xldG1ldHV0b3I6YmFubmVySXNIaWRkZW4nKSkpIHtcbiAgJGJhbm5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19iYW5uZXItY2xvc2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAkYmFubmVyLmNsYXNzTGlzdC5hZGQoJ2hlYWRlcl9fYmFubmVyLS1oaWRlJyk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAkYmFubmVyLnJlbW92ZSgpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xldG1ldHV0b3I6YmFubmVySXNIaWRkZW4nLCB0cnVlKTtcbiAgICB9LCA1MDApXG4gIH0pO1xufSBlbHNlIHtcbiAgJGJhbm5lci5yZW1vdmUoKTtcbn1cblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fYnVyZ2VyJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGhpZGVPdmVyZmxvdygpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLW1lbnUnKS5jbGFzc0xpc3QuYWRkKCdoZWFkZXItbWVudS0tc2hvd24nKTtcbn0pO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLW1lbnVfX2JhY2tkcm9wJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlSGVhZGVyTWVudSk7XG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLW1lbnVfX2Nsb3NlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlSGVhZGVyTWVudSk7XG4gIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhlcm9fX2Ryb3Bkb3duLWl0ZW0nKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gIGNvbnN0ICR0aGlzID0gZS5jdXJyZW50VGFyZ2V0O1xuICBjb25zdCB2YWx1ZSA9ICR0aGlzLmlubmVyVGV4dDtcblxuICAkdGhpcy5jbG9zZXN0KCcuaGVyb19faW5wdXQnKS5xdWVyeVNlbGVjdG9yKCcuaGVyb19faW5wdXQtZmllbGQnKS52YWx1ZSA9IHZhbHVlO1xufSkpO1xuXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oZXJvX19pbnB1dC1maWVsZCcpKS5tYXAoZWwgPT4ge1xuICBjb25zdCAkdGhpcyA9IGVsO1xuICBjb25zdCBoYW5kbGVJbnB1dCA9IGZpcnN0UmVuZGVyID0+IHtcbiAgICBjb25zdCAkZHJvcGRvd25FbGVtZW50ID0gJHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGNvbnN0ICRkcm9wZG93biA9ICRkcm9wZG93bkVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZha2VTY3JvbGxfX2NvbnRlbnQnKSB8fCAkZHJvcGRvd25FbGVtZW50O1xuICAgIGNvbnN0IG9wdGlvbnMgPSBKU09OLnBhcnNlKCR0aGlzLmRhdGFzZXQub3B0aW9ucyk7XG4gICAgY29uc3QgbG93ZXJDYXNlVmFsdWUgPSAkdGhpcy52YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgIGxldCBtYXRjaGVzRm91bmQgPSBmYWxzZTtcblxuICAgICRkcm9wZG93bi5pbm5lckhUTUwgPSAnJztcbiAgXG4gICAgb3B0aW9ucy5tYXAoZWwgPT4ge1xuICAgICAgaWYgKGZpcnN0UmVuZGVyIHx8IGVsLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihsb3dlckNhc2VWYWx1ZSkgPT09IDApIHtcbiAgICAgICAgbWF0Y2hlc0ZvdW5kID0gdHJ1ZTtcbiAgICAgICAgJGRyb3Bkb3duLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgYDxhIGNsYXNzPVwiaGVyb19fZHJvcGRvd24taXRlbSBkcm9wZG93bl9fbWVudS1pdGVtXCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiPiR7ZWx9PC9hPmApXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAobWF0Y2hlc0ZvdW5kKSB7XG4gICAgICAkZHJvcGRvd25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hlcm9fX2Ryb3Bkb3duLS1oaWRkZW4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGRyb3Bkb3duRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoZXJvX19kcm9wZG93bi0taGlkZGVuJyk7XG4gICAgfVxuXG4gICAgQXJyYXkuZnJvbSgkZHJvcGRvd24ucXVlcnlTZWxlY3RvckFsbCgnLmhlcm9fX2Ryb3Bkb3duLWl0ZW0nKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgJHRoaXMudmFsdWUgPSBlbC5pbm5lclRleHQ7XG4gICAgICAkdGhpcy5zZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnLCBlbC5pbm5lclRleHQpO1xuICAgIH0pKTtcblxuICAgIGlmIChmaXJzdFJlbmRlciAmJiAhJGRyb3Bkb3duRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2Zha2VTY3JvbGwnKSkge1xuICAgICAgJGRyb3Bkb3duLmZha2VTY3JvbGwoKTtcbiAgICB9XG4gIH07XG5cbiAgJHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiBoYW5kbGVJbnB1dChmYWxzZSkpO1xuICAkdGhpcy5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsICgpID0+IGhhbmRsZUlucHV0KHRydWUpKTtcbiAgJHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsICgpID0+IHtcbiAgICBpZiAoJHRoaXMudmFsdWUgPT09ICcnIHx8ICEkdGhpcy5kYXRhc2V0LnZhbHVlKSB7XG4gICAgICAkdGhpcy52YWx1ZSA9ICcnO1xuICAgIH0gZWxzZSB7XG4gICAgICAkdGhpcy52YWx1ZSA9ICR0aGlzLmRhdGFzZXQudmFsdWU7XG4gICAgfVxuICB9KTtcbn0pO1xuICBjb25zdCBwb3B1bGFyU2xpZGVyID0gbmV3IFN3aXBlcignLnBvcHVsYXJfX2dyaWQtLW1vYmlsZScsIHtcbiAgbG9vcDogdHJ1ZSxcbiAgbG9vcEFkZGl0aW9uYWxTbGlkZXM6IDMsXG4gIHNwYWNlQmV0d2VlbjogMjAsXG4gIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcbiAgY2VudGVyZWRTbGlkZXM6IHRydWUsXG4gIGJyZWFrcG9pbnRzOiB7XG4gICAgNzYwOiB7XG4gICAgICBzbGlkZXNQZXJWaWV3OiAyLFxuICAgICAgY2VudGVyZWRTbGlkZXM6IGZhbHNlXG4gICAgfVxuICB9XG59KTtcbiAgY29uc3QgcmV2aWV3c1NsaWRlciA9IG5ldyBTd2lwZXIoJy5yZXZpZXdzX19zbGlkZXInLCB7XG4gIGxvb3A6IHRydWUsXG4gIHNwYWNlQmV0d2VlbjogMjAsXG4gIHNsaWRlc1BlclZpZXc6IDMsXG4gIHNsaWRlc1Blckdyb3VwOiAzLFxuICBsb29wQWRkaXRpb25hbFNsaWRlczogMyxcbiAgcGFnaW5hdGlvbjoge1xuICAgIGVsOiAnLnN3aXBlci1wYWdpbmF0aW9uJyxcbiAgICBjbGlja2FibGU6IHRydWVcbiAgfVxufSk7XG5cbmNvbnN0IHJldmlld1NsaWRlck1vYmlsZSA9IG5ldyBTd2lwZXIoJy5yZXZpZXdzX19zbGlkZXItLW1vYmlsZScsIHtcbiAgbG9vcDogdHJ1ZSxcbiAgc3BhY2VCZXR3ZWVuOiAyMCxcbiAgbG9vcEFkZGl0aW9uYWxTbGlkZXM6IDMsXG4gIHBhZ2luYXRpb246IHtcbiAgICBlbDogJy5zd2lwZXItcGFnaW5hdGlvbicsXG4gICAgY2xpY2thYmxlOiB0cnVlXG4gIH1cbn0pO1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLWxvZ2luLWZvcm1dJykpIHtcbiAgJGFwaS52YWxpZGF0ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtbG9naW4tZm9ybV0nKSwgKCkgPT4ge2NvbnNvbGUubG9nKHRydWUpfSk7XG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtc2lnbnVwLXN0dWRlbnQtZm9ybV0nKSkge1xuICAkYXBpLnZhbGlkYXRlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1zaWdudXAtc3R1ZGVudC1mb3JtXScpLCAoKSA9PiB7fSk7XG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtc2lnbnVwLXR1dG9yLWZvcm1dJykpIHtcbiAgJGFwaS52YWxpZGF0ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtc2lnbnVwLXR1dG9yLWZvcm1dJyksICgpID0+IHt9KTtcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1zdXBwb3J0LWZvcm1dJykpIHtcbiAgJGFwaS52YWxpZGF0ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtc3VwcG9ydC1mb3JtXScpLCAoKSA9PiB7fSk7XG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtYXV0aC1jb3VudHJ5JykubGVuZ3RoKSB7XG4gIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWF1dGgtY291bnRyeScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlQ291bnRyeScsIGUgPT4ge1xuICAgIGVsLmNsb3Nlc3QoJ2Zvcm0nKS5xdWVyeVNlbGVjdG9yKCcuanMtYXV0aC1jaXR5JykuZGF0YXNldC5jb3VudHJ5ID0gZS50YXJnZXQucXVlcnlTZWxlY3RvcignaW5wdXQnKS52YWx1ZTtcbiAgfSkpO1xufVxuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWF1dGgtY2l0eSBpbnB1dCcpLmxlbmd0aCkge1xuICBjb25zdCBjaXRpZXNEYXRhID0gW3tcbiAgICBcImtleVwiOiBcItCg0L7RgdGB0LjRj1wiLFxuICAgIFwiY2l0aWVzXCI6IFtcbiAgICAgIFwi0JzQvtGB0LrQstCwXCIsXG4gICAgICBcItCh0LDQvdC60YIt0J/QtdGC0LXRgNCx0YPRgNCzXCIsXG4gICAgICBcItCa0LDQt9Cw0L3RjFwiLFxuICAgICAgXCLQndC40LbQvdC40Lkg0J3QvtCy0LPQvtGA0L7QtFwiLFxuICAgICAgXCLQodC+0YfQuFwiLFxuICAgICAgXCLQldC60LDRgtC10YDQuNC90LHRg9GA0LNcIixcbiAgICAgIFwi0KDQvtGB0YLQvtCyLdC90LAt0JTQvtC90YNcIixcbiAgICAgIFwi0J3QvtCy0L7RgdC40LHQuNGA0YHQulwiLFxuICAgICAgXCLQotGO0LzQtdC90YxcIixcbiAgICAgIFwi0JrQsNC70LjQvdC40L3Qs9GA0LDQtFwiLFxuICAgICAgXCLQo9GE0LBcIixcbiAgICAgIFwi0JrRgNCw0YHQvdC+0Y/RgNGB0LpcIixcbiAgICAgIFwi0JrRgNCw0YHQvdC+0LTQsNGAXCIsXG4gICAgICBcItCn0LXQu9GP0LHQuNC90YHQulwiLFxuICAgICAgXCLQktC+0YDQvtC90LXQtlwiXG4gICAgXVxuICB9LFxuICB7XCJrZXlcIjogXCLQo9C60YDQsNC40L3QsFwiLFxuICAgIFwiY2l0aWVzXCI6IFtcbiAgICAgIFwi0JrQuNC10LJcIixcbiAgICAgIFwi0JTQvdC10L/RgFwiLFxuICAgICAgXCLQlNC+0L3QtdGG0LpcIixcbiAgICAgIFwi0JfQsNC/0L7RgNC+0LbRjNC1XCIsXG4gICAgICBcItCb0YzQstC+0LJcIixcbiAgICAgIFwi0JrRgNC40LLQvtC5INCg0L7Qs1wiLFxuICAgICAgXCLQodC10LLQsNGB0YLQvtC/0L7Qu9GMXCIsXG4gICAgICBcItCd0LjQutC+0LvQsNC10LJcIixcbiAgICAgIFwi0JzQsNGA0LjRg9C/0L7Qu9GMXCJcbiAgICBdXG4gIH1dO1xuXG4gIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWF1dGgtY2l0eSBpbnB1dCcpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBlbCA9PiB7XG4gICAgY29uc3QgJHRoaXMgPSBlbC5jdXJyZW50VGFyZ2V0O1xuICAgIGNvbnN0ICRsYWJlbEVsZW1lbnQgPSAkdGhpcy5jbG9zZXN0KCcuaW5wdXQnKTtcbiAgICBjb25zdCBjb3VudHJ5ID0gJGxhYmVsRWxlbWVudC5kYXRhc2V0LmNvdW50cnk7XG4gICAgXG4gICAgaWYgKGNvdW50cnkpIHtcbiAgICAgIGNvbnN0IGNpdGllcyA9IGNpdGllc0RhdGEuZmlsdGVyKGVsID0+IGVsLmtleSA9PT0gY291bnRyeSlbMF0uY2l0aWVzO1xuICAgICAgY29uc3QgbG93ZXJDYXNlVmFsdWUgPSAkdGhpcy52YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgY29uc3QgJGRyb3Bkb3duRWxlbWVudCA9ICR0aGlzLmNsb3Nlc3QoJy5pbnB1dCcpLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bl9fbWVudScpO1xuICAgICAgbGV0IG1hdGNoZXNGb3VuZCA9IGZhbHNlO1xuXG4gICAgICAkZHJvcGRvd25FbGVtZW50LmlubmVySFRNTCA9ICcnO1xuXG4gICAgICBpZiAoZWwuY3VycmVudFRhcmdldC52YWx1ZSAhPT0gJycpIHtcbiAgICAgICAgY2l0aWVzLm1hcChlbCA9PiB7XG4gICAgICAgICAgaWYgKGVsLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihsb3dlckNhc2VWYWx1ZSkgPT09IDApIHtcbiAgICAgICAgICAgIG1hdGNoZXNGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAkZHJvcGRvd25FbGVtZW50Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgYDxhIGNsYXNzPVwiaW5wdXRfX2Ryb3Bkb3duLWl0ZW1cIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCI+JHtlbH08L2E+YClcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChtYXRjaGVzRm91bmQpIHtcbiAgICAgICAgICBBcnJheS5mcm9tKCRsYWJlbEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0X19kcm9wZG93bi1pdGVtJykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICR0aGlzLnZhbHVlID0gZWwuaW5uZXJUZXh0O1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSkpO1xuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1hdXRoLWNpdHkgaW5wdXQnKS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGVsID0+IHtcbiAgICBjb25zdCAkdGhpcyA9IGVsLmN1cnJlbnRUYXJnZXQ7XG4gICAgY29uc3QgJGRyb3Bkb3duRWxlbWVudCA9ICR0aGlzLmNsb3Nlc3QoJy5pbnB1dCcpLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bl9fbWVudScpO1xuXG4gICAgJGRyb3Bkb3duRWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgfSk7XG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtuYW1lPVwicnVsZXNBZ3JlZW1lbnRcIl0nKS5sZW5ndGgpIHtcbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtuYW1lPVwicnVsZXNBZ3JlZW1lbnRcIl0nKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICBjb25zdCAkc3VibWl0QnV0dG9uID0gZWwuY2xvc2VzdCgnZm9ybScpLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJyk7XG5cbiAgICBpZiAoZWwuY2hlY2tlZCkge1xuICAgICAgJHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdidXR0b24tLWRpc2FibGVkJyk7XG4gICAgICAkc3VibWl0QnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidXR0b24tLWRpc2FibGVkJyk7XG4gICAgICAkc3VibWl0QnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICB9XG4gIH0pKTtcbn1cblxufSJdfQ==
