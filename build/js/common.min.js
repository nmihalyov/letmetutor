"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a=[],c=!0,i=!1;try{for(r=r.call(e);!(c=(o=r.next()).done)&&(a.push(o.value),!t||a.length!==t);c=!0);}catch(e){i=!0,n=e}finally{try{c||null==r.return||r.return()}finally{if(i)throw n}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}window.onload=function(){var e={popup:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.onHide,o=t.onShow,n=function(){document.body.style.cssText="position: fixed; margin-top: ".concat(-window.scrollY,"px")},a=function(e){document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,e)};return{isShown:function(){return e.classList.contains("popup--opened")},show:function(){var t=new Promise((function(t){e.style.display="block",t()}));n(),t.then((function(){e.classList.add("popup--opened"),"function"==typeof o&&o()}))},hide:function(){var t=-parseInt(document.body.style.marginTop);e.classList.remove("popup--opened"),setTimeout((function(){e.style.display="none",a(t),"function"==typeof r&&r()}),300)}}},validate:function(e,t){var r=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,o=function(e){e.closest(".input")?e.closest(".input").classList.add("input--error"):e.closest(".textarea")&&e.closest(".textarea").classList.add("textarea--error"),e.focus()};e.querySelector('button[type="submit"]').addEventListener("click",(function(n){n.preventDefault();var a=!0,c=Array.from(e.querySelectorAll("input[required], textarea[required]")),i=e.querySelectorAll(".checkboxselect");c.reverse().map((function(e){switch(e.dataset.passRepeat&&e.value!==e.closest("form").querySelector("input[data-pass]").value&&o(e),e.getAttribute("type")){case"text":case"password":""===e.value&&(o(e),a=!1);break;case"tel":(""===e.value||e.value.includes("_"))&&(o(e),a=!1);break;case"checkbox":e.checked||(e.closest(".checkbox").classList.add("checkbox--error"),a=!1);break;case"email":r.test(e.value)||(o(e),a=!1);break;default:""===e.value&&(o(e),a=!1)}})),i.length&&Array.from(i).map((function(e){var t=!1;Array.from(e.querySelectorAll(".checkbox__input")).map((function(e){e.checked&&(t=!0)})),t||(e.classList.add("checkboxselect--error"),a=!1)})),a&&t()})),Array.from(e.querySelectorAll("input")).concat(Array.from(e.querySelectorAll("textarea"))).map((function(e){return e.addEventListener("input",(function(){e.closest(".input")?e.closest(".input").classList.remove("input--error"):e.closest(".checkbox")?e.closest(".checkbox").classList.remove("checkbox--error"):e.closest(".textarea")&&e.closest(".textarea").classList.remove("textarea--error")}))}))}};document.addEventListener("click",(function(t){var r=t.target;if(r.classList.contains("js-open-popup")){t.preventDefault();var o=r.dataset.popup,n=document.querySelector('.js-popup[data-popup="'.concat(o,'"]'));e.popup(n).show()}})),Array.from(document.querySelectorAll(".js-close-popup")).map((function(t){return t.addEventListener("click",(function(t){if(!t.target.closest(".popup__window")||!t.currentTarget.classList.contains("js-popup")){var r=t.currentTarget.closest(".popup");e.popup(r).hide()}}))})),document.querySelector("form[data-restore-form]")&&e.validate(document.querySelector("form[data-restore-form]"),(function(){})),document.querySelector("form[data-request-auth-form]")&&e.validate(document.querySelector("form[data-request-auth-form]"),(function(){})),document.querySelector("form[data-request-form]")&&e.validate(document.querySelector("form[data-request-form]"),(function(){var t=document.querySelector('.js-popup[data-popup="request"]'),r=document.querySelector('.js-popup[data-popup="request-success"]');e.popup(t,{onHide:function(){Array.from(t.querySelectorAll("input")).map((function(e){return e.value=""})),e.popup(r).show()}}).hide()})),document.querySelector("form[data-request-specific-form]")&&e.validate(document.querySelector("form[data-request-specific-form]"),(function(){var t=document.querySelector('.js-popup[data-popup="request-specific"]'),r=document.querySelector('.js-popup[data-popup="request-success"]');e.popup(t,{onHide:function(){Array.from(t.querySelectorAll("input")).map((function(e){return e.value=""})),e.popup(r).show()}}).hide()}));var t=Array.from(document.querySelectorAll(".dropdown"));document.addEventListener("click",(function(e){var r=e.target;t.map((function(e){e.closest(".dropdown")!==r.closest(".dropdown")&&e.classList.remove("dropdown--active")}))})),t.map((function(e){return e.addEventListener("click",(function(r){e.classList.contains("input__code")&&r.preventDefault(),e.classList.contains("dropdown--active")||(t.map((function(e){return e!=e&&e.classList.remove("dropdown--active")})),e.classList.toggle("dropdown--active"))}))})),document.addEventListener("click",(function(e){var t=e.target.closest(".dropdown__menu-item");if(t&&(document.querySelector(".dropdown--active").classList.remove("dropdown--active"),t.getAttribute("data-toggle"))){var r=e.target,o=r.innerText,n=r.closest(".dropdown__menu").querySelector(".dropdown__menu-item--hidden"),a=r.closest(".dropdown").querySelector(".dropdown__value");n&&n.classList.remove("dropdown__menu-item--hidden"),t.classList.add("dropdown__menu-item--hidden"),a.innerText=o}})),Array.from(document.querySelectorAll(".tabs__item")).map((function(e){return e.addEventListener("click",(function(t){t.preventDefault();var r=e.dataset.tab,o=e.closest("[data-tabs]").querySelector("[data-active]");e.closest(".tabs").querySelector(".tabs__item--active").classList.remove("tabs__item--active"),e.classList.add("tabs__item--active"),o&&(e.closest("[data-tabs]").querySelector("[data-active]").removeAttribute("data-active"),e.closest("[data-tabs]").querySelector('[data-content="'.concat(r,'"]')).setAttribute("data-active",!0))}))}));var r=new Event("changeCountry");Array.from(document.querySelectorAll(".input.dropdown")).concat(Array.from(document.querySelectorAll(".input .dropdown"))).map((function(e){return e.addEventListener("click",(function(){var t=e.querySelector(".dropdown__menu");e.closest(".input").querySelector(".input__dropdown").style.width=e.closest(".input").getBoundingClientRect().width+"px",t.classList.contains("fakeScroll")||t.fakeScroll()}))})),Array.from(document.querySelectorAll(".input__dropdown-item[data-code-loc]")).map((function(e){return e.addEventListener("click",(function(){var t=e.dataset.codeLoc,r=e.dataset.mask,o=e.closest(".input").querySelector("input");e.closest(".input__code").dataset.codeLoc=t,e.closest(".input__code").dataset.mask=r,o.placeholder=r.replaceAll("9","_"),function(e,t){Inputmask({mask:t}).mask(e)}(o,r)}))})),Array.from(document.querySelectorAll(".input__dropdown-item[data-dropdown]")).map((function(e){return e.addEventListener("click",(function(){var t=e.innerText;e.closest(".input").querySelector("input").value=t,e.closest(".input").classList.remove("input--error"),e.closest(".input").classList.contains("js-auth-country")&&e.closest(".input").dispatchEvent(r)}))})),Array.from(document.querySelectorAll('input[type="tel"]')).map((function(e){Inputmask({mask:e.closest(".input").querySelector(".input__code").dataset.mask}).mask(e)})),Array.from(document.querySelectorAll(".checkboxselect__list")).map((function(e){e.addEventListener("click",(function(t){t.stopPropagation();var r=e.closest(".checkboxselect"),o=!1;r.classList.remove("checkboxselect--error"),Array.from(e.querySelectorAll(".checkbox__input")).map((function(t){var n=r.querySelector(".checkboxselect__input-placeholder");t.checked&&(o=!0),t.addEventListener("click",(function(){var t="";Array.from(e.querySelectorAll("input:checked")).map((function(e){t+=e.closest(".checkboxselect__item").querySelector(".checkbox__text").innerText+", "})),t?(n.innerText=t.substring(0,t.length-2),n.classList.add("checkboxselect__input-placeholder--active")):(n.innerText=n.dataset.placeholder,n.classList.remove("checkboxselect__input-placeholder--active"))}))})),o?r.classList.add("checkboxselect--checked"):r.classList.remove("checkboxselect--checked")})),e.fakeScroll()})),Array.from(document.querySelectorAll(".filters__dropdown-item")).map((function(e){return e.addEventListener("click",(function(e){var t=e.currentTarget,r=t.innerText;t.closest(".filters__input").querySelector(".filters__input-field").value=r}))})),document.querySelectorAll(".filters__input-field").length&&Array.from(document.querySelectorAll(".filters__input-field")).map((function(e){fetch("data/location.json").then((function(e){return e.json()})).then((function(t){var r=e,o=function(e){var o=r.nextElementSibling.querySelector(".filters__dropdown-inner"),n=o.querySelector(".fakeScroll__content")||o,a="location"===r.getAttribute("name"),c=a?t.map((function(e){return e.key})).concat(t.flatMap((function(e){return e.cities}))):JSON.parse(r.dataset.options),i=r.value.toLowerCase(),s=n.closest(".filters__dropdown").querySelector('input[type="checkbox"]'),l=!1;n.innerHTML="",c.map((function(t){if(e||0===t.toLowerCase().indexOf(i)){var r=a?'<a class="filters__dropdown-item dropdown__menu-item'.concat(i&&!e?" filters__dropdown-item--smart":"",'" href="javascript:void(0)"><span>').concat(t.substr(0,i.length),"</span>").concat(t.substr(i.length),"</a>"):'<a class="filters__dropdown-item dropdown__menu-item" href="javascript:void(0)">'.concat(t,"</a>");l=!0,n.insertAdjacentHTML("beforeend",r)}})),l?(o.parentNode.classList.remove("filters__dropdown--hidden"),o.parentNode.classList.remove("filters__dropdown--empty")):s?o.parentNode.classList.add("filters__dropdown--empty"):o.parentNode.classList.add("filters__dropdown--hidden"),Array.from(n.querySelectorAll(".filters__dropdown-item")).map((function(e){return e.addEventListener("click",(function(){r.value=e.innerText,r.setAttribute("data-value",e.innerText),s&&(s.checked=!1,r.removeAttribute("readonly"))}))})),e&&!o.classList.contains("fakeScroll")&&n.fakeScroll()};"cost"!==r.name&&(r.addEventListener("input",(function(){return o(!1)})),r.addEventListener("focus",(function(){return o(!0)})),r.addEventListener("blur",(function(){""!==r.value&&r.dataset.value?r.value=r.dataset.value:r.value=""})))}))})),Array.from(document.querySelectorAll(".filters__cost-range")).map((function(e){var t=+e.dataset.min,r=+e.dataset.max,o=+e.dataset.min,n=+e.dataset.max;noUiSlider.create(e,{start:[o,n],connect:!0,range:{min:t,max:r},step:100}),e.noUiSlider.on("slide",(function(t){var r=parseInt(t[0]),o=parseInt(t[1]);e.closest(".filters__input").querySelector(".filters__input-field").value="".concat(r," ₽ – ").concat(o," ₽"),e.closest(".filters__cost").querySelector('[data-cost="from"]').innerText=r,e.closest(".filters__cost").querySelector('[data-cost="to"]').innerText=o}))})),Array.from(document.querySelectorAll(".filters__dropdown-checkbox")).map((function(e){return e.addEventListener("click",(function(){var t=e.closest(".filters__input").querySelector(".filters__input-field");if(e.querySelector("input").checked){var r=e.querySelector(".checkbox__text").innerText;t.value=r,t.setAttribute("data-value",r),t.setAttribute("readonly","readonly")}else t.value="",t.setAttribute("data-value",""),t.removeAttribute("readonly")}))})),document.addEventListener("click",(function(e){var t=e.target;t.classList.contains("js-tutorcard-more")&&(t.style.display="none",Array.from(t.closest(".tutorcard__subjects").querySelectorAll(".tutorcard__subjects-item--hidden")).map((function(e){e.classList.remove("tutorcard__subjects-item--hidden")})))}));var o=document.querySelector(".banner");JSON.parse(localStorage.getItem("letmetutor:bannerIsHidden"))?o.remove():(o.style.display="flex",document.querySelector(".banner__close").addEventListener("click",(function(){o.classList.add("banner--hide"),setTimeout((function(){o.remove(),localStorage.setItem("letmetutor:bannerIsHidden",!0)}),500)})));var n=document.querySelector(".cookies");JSON.parse(localStorage.getItem("letmetutor:cookiesIsHidden"))?n.remove():(n.classList.add("cookies--shown"),document.querySelector(".cookies__btn").addEventListener("click",(function(){n.classList.remove("cookies--shown"),setTimeout((function(){n.remove(),localStorage.setItem("letmetutor:cookiesIsHidden",!0)}),500)})));var a=function(){!function(e){document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,e)}(),document.querySelector(".header-menu").classList.remove("header-menu--shown")};document.querySelector(".header__burger").addEventListener("click",(function(){-parseInt(document.body.style.marginTop),document.body.style.cssText="position: fixed; margin-top: ".concat(-window.scrollY,"px"),document.querySelector(".header-menu").classList.add("header-menu--shown")})),document.querySelector(".header-menu__backdrop").addEventListener("click",a),document.querySelector(".header-menu__close").addEventListener("click",a),Array.from(document.querySelectorAll(".header__notifications-wrapper")).map((function(e){e.classList.contains("fakeScroll")||e.fakeScroll()}));new Swiper(".popular__grid--mobile",{loop:!0,loopAdditionalSlides:3,spaceBetween:20,slidesPerView:"auto",centeredSlides:!0,breakpoints:{760:{slidesPerView:2,centeredSlides:!1}}}),new Swiper(".reviews__slider",{loop:!0,spaceBetween:20,slidesPerView:3,slidesPerGroup:3,loopAdditionalSlides:3,pagination:{el:".swiper-pagination",clickable:!0}}),new Swiper(".reviews__slider--mobile",{loop:!0,spaceBetween:20,loopAdditionalSlides:3,pagination:{el:".swiper-pagination",clickable:!0}});document.querySelector("form[data-login-form]")&&e.validate(document.querySelector("form[data-login-form]"),(function(){document.querySelector("form[data-login-form]").submit()})),document.querySelector("form[data-signup-student-form]")&&e.validate(document.querySelector("form[data-signup-student-form]"),(function(){document.querySelector("form[data-signup-student-form]").submit()})),document.querySelector("form[data-signup-tutor-form]")&&e.validate(document.querySelector("form[data-signup-tutor-form]"),(function(){document.querySelector("form[data-signup-tutor-form]").submit()})),document.querySelector("form[data-support-form]")&&e.validate(document.querySelector("form[data-support-form]"),(function(){document.querySelector("form[data-support-form]").submit()})),Array.from(document.querySelectorAll(".js-auth-country")).map((function(e){return e.addEventListener("changeCountry",(function(t){e.closest("form").querySelector(".js-auth-city").dataset.country=t.target.querySelector("input").value}))})),document.querySelectorAll(".js-auth-city input").length&&fetch("data/location.json").then((function(e){return e.json()})).then((function(e){Array.from(document.querySelectorAll(".js-auth-city input")).map((function(t){t.addEventListener("input",(function(t){var r=t.currentTarget,o=r.closest(".input"),n=o.dataset.country;if(n){var a=e.filter((function(e){return e.key===n}))[0].cities,c=r.value.toLowerCase(),i=r.closest(".input").querySelector(".dropdown__menu"),s=i.querySelector(".fakeScroll__content"),l=!1;s&&(s.innerHTML=""),""!==r.value&&(a.map((function(e){0===e.toLowerCase().indexOf(c)&&(l=!0,s.insertAdjacentHTML("beforeend",'<a class="input__dropdown-item dropdown__menu-item'.concat(c?" input__dropdown-item--smart":"",'" href="javascript:void(0)"><span>').concat(e.substr(0,c.length),"</span>").concat(e.substr(c.length),"</a>")))})),l&&Array.from(o.querySelectorAll(".input__dropdown-item")).map((function(e){return e.addEventListener("click",(function(){r.value=e.innerText}))}))),i.classList.contains("fakeScroll")||i.fakeScroll()}})),t.addEventListener("focus",(function(){var e=t.closest(".input").querySelector(".fakeScroll__content");e&&(e.innerHTML="")}))}))})),Array.from(document.querySelectorAll('input[name="rulesAgreement"]')).map((function(e){return e.addEventListener("change",(function(){var t=e.closest("form").querySelector('button[type="submit"]');e.checked?(t.classList.remove("button--disabled"),t.removeAttribute("disabled")):(t.classList.add("button--disabled"),t.setAttribute("disabled","disabled"))}))})),Array.from(document.querySelectorAll(".auth__toggle .tabs__item")).map((function(e){return e.addEventListener("click",(function(){document.querySelector(".auth__type").value=e.dataset.tab-1}))}));var c=document.querySelector(".js-catalog-more");if(c){var i=document.querySelector(".pagination__arrow--prev"),s=document.querySelector(".pagination__arrow--next"),l={current:[1],total:10},u=function(e){Array.from(document.querySelectorAll(".pagination__page--current")).map((function(e){return e.classList.remove("pagination__page--current")})),document.querySelector('.pagination__page[data-page="'.concat(e,'"]')).classList.add("pagination__page--current")},d=function(e){var t=document.querySelector(".pagination__separator"),r=t.previousSibling,o=document.querySelector(".pagination__page");+r.dataset.page===e?e===l.total-2?(o.remove(),t.classList.add("pagination__separator--hidden"),t.insertAdjacentHTML("beforebegin",'<a class="pagination__page" href="javascript:void(0)" data-page="'.concat(e+1,'">').concat(e+1,"</a>"))):e<l.total-2&&(o.remove(),t.insertAdjacentHTML("beforebegin",'<a class="pagination__page" href="javascript:void(0)" data-page="'.concat(e+1,'">').concat(e+1,"</a>")),t.classList.remove("pagination__separator--hidden")):+o.dataset.page===e&&1!==e&&(r.remove(),document.querySelector(".pagination__pages").insertAdjacentHTML("afterbegin",'<a class="pagination__page" href="javascript:void(0)" data-page="'.concat(e-1,'">').concat(e-1,"</a>")),t.classList.remove("pagination__separator--hidden"))},p=function(e){var t=e,r=Array.from(document.querySelectorAll(".filters__input-field")).map((function(e){return e.name}));return new URL(location.href).searchParams.toString().split("&").map((function(e){var o=_slicedToArray(e.split("="),1)[0];r.includes(o)&&(t+="&"+e)})),t+="&limit=".concat(document.querySelector(".js-catalog-limit .dropdown__value").innerText)},m=function(e){var t=e.top,r=e.image,o=e.verified,n=e.name,a=e.country,c=e.subjects,i=e.location,s=e.description,l=e.link,u=e.rating,d=e.reviews,p=e.price;return'\n    <div class="tutorcard'.concat(t?" tutorcard--top":"",'">\n      <div class="tutorcard__image" style="background-image: url(\'img/inhtml/').concat(r,'\')"></div>\n      <div class="tutorcard__info">\n        <div>\n          <p class="tutorcard__name').concat(o?" tutorcard__name--verified":"",'">').concat(n,'</p>\n          <p class="tutorcard__location" data-loc=').concat(a,">").concat(i,'</p>\n          <div class="tutorcard__subjects">\n            ').concat(c.map((function(e){return'\n              <a class="tutorcard__subjects-item'.concat(e.search?" tutorcard__subjects-item--search":"").concat(e.hidden?" tutorcard__subjects-item--hidden":"",'" href="javascript:void(0)">').concat(e.name," <span>(опыт <b>").concat(e.experience,"</b>)</span></a>\n            ")})).join(""),'\n            <a class="tutorcard__subjects-more js-tutorcard-more" href="javascript:void(0)">+2 предмета</a>\n          </div>\n          <p class="tutorcard__desc">').concat(s,'</p>\n        </div><a class="tutorcard__more" href=').concat(l,'>Подробнее</a>\n      </div>\n      <div class="tutorcard__actions">\n        <div class="tutorcard__actions-info">\n          <div class="tutorcard__rating">\n            <p class="tutorcard__rating-rate">').concat(u,'</p>\n            <p class="tutorcard__rating-reviews">(').concat(d,')</p>\n          </div>\n          <div class="tutorcard__cost">\n            <p class="tutorcard__cost-value">').concat(p,' ₽</p>\n            <p class="tutorcard__cost-desc">в час</p>\n          </div>\n        </div>\n        <button class="button js-open-popup').concat(t?" button--primary":" button--secondary",' tutorcard__btn" data-popup="request-auth">Оставить заявку</button>\n      </div>\n    </div>\n  ')};c.addEventListener("click",(function(e){e.preventDefault();var t=l.current[l.current.length-1]+1,r=p("data/catalog.json?page=".concat(t));l.current.push(t),Array.from(document.querySelectorAll(".pagination__page")).map((function(e){l.current.includes(parseInt(e.innerText))&&e.classList.add("pagination__page--current")})),fetch(r).then((function(e){return e.json()})).then((function(e){e.map((function(e){document.querySelector(".catalog__items").insertAdjacentHTML("beforeend",m(e))})),t===l.total&&(c.classList.add("catalog__bottom-btn--hidden"),s.classList.add("pagination__arrow--disabled"))}))})),i.addEventListener("click",(function(e){e.preventDefault();var t=l.current[0]-1,r=p("data/catalog.json?page=".concat(t));l.current=[t],fetch(r).then((function(e){return e.json()})).then((function(e){var r="";e.map((function(e){r+=m(e)})),document.querySelector(".pagination__arrow--next").classList.remove("pagination__arrow--disabled"),u(t),1===t&&i.classList.add("pagination__arrow--disabled"),c.classList.remove("catalog__bottom-btn--hidden"),document.querySelector(".catalog__items").innerHTML=r})),d(t)})),s.addEventListener("click",(function(e){e.preventDefault();var t=l.current[l.current.length-1]+1,r=p("data/catalog.json?page=".concat(t));l.current=[t],fetch(r).then((function(e){return e.json()})).then((function(e){var r="";e.map((function(e){r+=m(e)})),document.querySelector(".pagination__arrow--prev").classList.remove("pagination__arrow--disabled"),u(t),t===l.total&&(c.classList.add("catalog__bottom-btn--hidden"),s.classList.add("pagination__arrow--disabled")),document.querySelector(".catalog__items").innerHTML=r,d(t)}))})),document.addEventListener("click",(function(e){var t=e.target;if(t.classList.contains("pagination__page")){var r=parseInt(t.dataset.page),o=p("data/catalog.json?page=".concat(r));l.current=[r],fetch(o).then((function(e){return e.json()})).then((function(e){var t="";e.map((function(e){t+=m(e)})),u(r),r===l.total?(c.classList.add("catalog__bottom-btn--hidden"),s.classList.add("pagination__arrow--disabled")):1===r?(i.classList.add("pagination__arrow--disabled"),c.classList.remove("catalog__bottom-btn--hidden")):(s.classList.remove("pagination__arrow--disabled"),i.classList.remove("pagination__arrow--disabled"),c.classList.remove("catalog__bottom-btn--hidden")),d(r),document.querySelector(".catalog__items").innerHTML=t}))}}))}Array.from(document.querySelectorAll(".tutor__nav-link")).map((function(e){return e.addEventListener("click",(function(){var t=e.dataset.target;scrollTo({top:document.querySelector('[data-block="'.concat(t,'"]')).getBoundingClientRect().top+window.pageYOffset-document.querySelector(".header").offsetHeight,behavior:"smooth"})}))})),Array.from(document.querySelectorAll(".profile-head__subjects-item")).map((function(e){return e.addEventListener("click",(function(){var t=e.dataset.pay;e.closest(".profile-head__subjects").querySelector(".profile-head__subjects-item--highlight").classList.remove("profile-head__subjects-item--highlight"),e.classList.add("profile-head__subjects-item--highlight"),Array.from(document.querySelectorAll(".tutor__cost-value span")).map((function(e){return e.innerText=t}))}))}));var f=document.querySelector(".profile-about__video-cover");f&&f.addEventListener("click",(function(){var e=f.parentNode.querySelector("iframe");f.parentNode.querySelector("iframe").setAttribute("src",e.getAttribute("src")+"?autoplay=1"),f.classList.add("profile-about__video-cover--hidden")}));var _=document.querySelector(".js-reviews-more");if(_){var v={current:1,total:3};_.addEventListener("click",(function(e){e.preventDefault(),++v.current,fetch("data/tutorReviews.json?page=".concat(v.current)).then((function(e){return e.json()})).then((function(e){e.map((function(e){var t,r,o,n,a,c;document.querySelector(".profile-reviews__feedbacks").insertAdjacentHTML("beforeend",(r=(t=e).image,o=t.name,n=t.date,a=t.rating,c=t.feedback,'\n    <div class="profile-reviews__feedback">\n      '.concat(r?'<div class="profile-reviews__feedback-image" style="background-image: url(\'img/inhtml/'.concat(r,"')\"></div>"):'<div class="profile-reviews__feedback-image"></div>','\n      <div class="profile-reviews__feedback-info">\n        <div class="profile-reviews__feedback-head">\n          <p class="profile-reviews__feedback-name">').concat(o,'</p>\n          <p class="profile-reviews__feedback-date">').concat(n,'</p>\n        </div>\n        <div class="profile-reviews__rating-stars">\n          ').concat([1,2,3,4,5].map((function(e){return e<=a?'<div class="profile-reviews__rating-star profile-reviews__rating-star--full"></div>':'<div class="profile-reviews__rating-star"></div>'})).join(""),'\n        </div>\n        <p class="profile-reviews__feedback-text">').concat(c,"</p>\n      </div>\n    </div>\n  "))),v.current===v.total&&_.remove()}))}))}))}if(document.querySelector(".profile-schedule")){var y=document.querySelector(".profile-schedule__timezone-menu");y.classList.contains("fakeScroll")||y.fakeScroll()}var h=function(){var e=document.querySelector(".profile-schedule__unit--current"),t=document.querySelector('.js-popup[data-popup="request-specific"]');e&&setTimeout((function(){var r=e.dataset.date,o=e.querySelector(".profile-schedule__time-value").innerText;document.querySelector(".profile-schedule__pick").classList.add("profile-schedule__pick--active"),document.querySelector(".profile-schedule__pick-date").innerText=r,document.querySelector(".profile-schedule__pick-time").innerText=o,t&&(t.querySelector(".popup__heading-date").innerText=r,t.querySelector(".popup__heading-time").innerText=o,t.querySelector('input[name="time"]').value=o)}),0)},S=document.querySelector(".profile-schedule__controls-button--prev"),b=document.querySelector(".profile-schedule__controls-button--next");S&&S.addEventListener("click",(function(){var e=document.querySelector(".profile-schedule__slide--active"),t=+e.dataset.slide,r=document.querySelector('.profile-schedule__slide[data-slide="'.concat(t-1,'"]'));r&&(e.classList.remove("profile-schedule__slide--active"),r.classList.add("profile-schedule__slide--active"),document.querySelector(".profile-schedule__controls-button--next").classList.remove("profile-schedule__controls-button--disabled"),document.querySelector(".profile-schedule__controls-dates").innerText=r.dataset.dates,r.dataset.first&&S.classList.add("profile-schedule__controls-button--disabled"))})),b&&b.addEventListener("click",(function(){var e=document.querySelector(".profile-schedule__slide--active"),t=+e.dataset.slide,r=document.querySelector('.profile-schedule__slide[data-slide="'.concat(t+1,'"]'));r&&(e.classList.remove("profile-schedule__slide--active"),r.classList.add("profile-schedule__slide--active"),document.querySelector(".profile-schedule__controls-button--prev").classList.remove("profile-schedule__controls-button--disabled"),document.querySelector(".profile-schedule__controls-dates").innerText=r.dataset.dates,r.dataset.last&&b.classList.add("profile-schedule__controls-button--disabled"))})),Array.from(document.querySelectorAll(".profile-schedule__unit")).map((function(e){return e.addEventListener("click",(function(t){if(!t.target.closest(".profile-schedule__time")){var r=document.querySelector(".profile-schedule__unit--current");r&&r.classList.remove("profile-schedule__unit--current"),e.classList.add("profile-schedule__unit--current"),h()}}))})),Array.from(document.querySelectorAll(".profile-schedule__time-menu .dropdown__menu-item")).map((function(e){return e.addEventListener("click",h)}))};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJvbmxvYWQiLCIkYXBpIiwiJHBvcHVwIiwiX3JlZiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm9uSGlkZSIsIm9uU2hvdyIsImhpZGVPdmVyZmxvdyIsImRvY3VtZW50IiwiYm9keSIsInN0eWxlIiwiY3NzVGV4dCIsImNvbmNhdCIsInNjcm9sbFkiLCJzaG93T3ZlcmZsb3ciLCJvZmZzZXQiLCJzY3JvbGxUbyIsImlzU2hvd24iLCJjb250YWlucyIsInNob3ciLCJQcm9taXNlIiwicmVzb2x2ZSIsImNsYXNzTGlzdCIsImFkZCIsImhpZGUiLCJwYXJzZUludCIsIm1hcmdpblRvcCIsImRpc3BsYXkiLCJ0aGVuIiwiZm9ybSIsInJlcXVlc3QiLCJlbWFpbFJlZ2V4cCIsInJlbW92ZSIsInNldFRpbWVvdXQiLCJpbnB1dCIsImNsb3Nlc3QiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIiRmb3JtSW5wdXRzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsInNldEludmFsaWRJbnB1dCIsIm1hcCIsImVsIiwiZGF0YXNldCIsInZhbHVlIiwiZm9jdXMiLCJzZXRJbnZhbGlkQ2hlY2tib3giLCJmb3JtSXNWYWxpZCIsImluY2x1ZGVzIiwiJGNoZWNrYm94U2VsZWN0IiwiY2hlY2tlZCIsImdldEF0dHJpYnV0ZSIsImNoZWNrYm94IiwiJHRoaXMiLCJ0YXJnZXQiLCJwb3B1cCIsImN1cnJlbnRUYXJnZXQiLCJ2YWxpZGF0ZSIsIiRzdWNjZXNzUG9wdXAiLCIkZHJvcGRvd25zIiwidG9nZ2xlIiwiJGRyb3Bkb3duTWVudUl0ZW0iLCJuZXdWYWx1ZSIsImlubmVyVGV4dCIsIiRoaWRkZW5JdGVtIiwiJGRyb3Bkb3duVmFsdWUiLCJ0YWIiLCIkYWN0aXZlVGFiQ29udGVudCIsInJlbW92ZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImNoYW5nZUNvdW50cnlFdmVudCIsIiRkcm9wZG93biIsIndpZHRoIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibG9jIiwibWFzayIsImNvZGVMb2MiLCIkaW5wdXQiLCJyZXBsYWNlQWxsIiwidXBkYXRlTWFzayIsImRpc3BhdGNoRXZlbnQiLCJJbnB1dG1hc2siLCJsaXN0Iiwic3RvcFByb3BhZ2F0aW9uIiwiJHBsYWNlaG9sZGVyIiwiaXRlbSIsInN1YnN0cmluZyIsInBsYWNlaG9sZGVyIiwiZmV0Y2giLCJyZXMiLCJqc29uIiwiZGF0YSIsImZpcnN0UmVuZGVyIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiJGRyb3Bkb3duRWxlbWVudCIsIm9wdGlvbnMiLCJpbnB1dFNtYXJ0U2VhcmNoIiwia2V5IiwiZmxhdE1hcCIsImNpdGllcyIsIkpTT04iLCJwYXJzZSIsImxvd2VyQ2FzZVZhbHVlIiwidG9Mb3dlckNhc2UiLCJmYWtlU2Nyb2xsIiwibWF0Y2hlc0ZvdW5kIiwiJGVsZW1lbnQiLCJzdWJzdHIiLCJwYXJlbnROb2RlIiwiaGFuZGxlSW5wdXQiLCIkY2hlY2tib3giLCJuYW1lIiwiJHJhbmdlIiwibWluIiwibWF4Iiwic21heCIsIm5vVWlTbGlkZXIiLCJjcmVhdGUiLCJzdGFydCIsInNtaW4iLCJjb25uZWN0Iiwic3RlcCIsInZhbHVlcyIsImNoZWNrYm94VmFsdWUiLCJyYW5nZSIsIiRpbnB1dEZpZWxkIiwiJHRhcmdldCIsIiRiYW5uZXIiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiZ2V0SXRlbSIsIiRjb29raWVzIiwiaGlkZUhlYWRlck1lbnUiLCJTd2lwZXIiLCJsb29wIiwic2xpZGVzUGVyVmlldyIsImNlbnRlcmVkU2xpZGVzIiwiYnJlYWtwb2ludHMiLCJsb29wQWRkaXRpb25hbFNsaWRlcyIsImNsaWNrYWJsZSIsInBhZ2luYXRpb24iLCJyZXZpZXdzU2xpZGVyIiwic3BhY2VCZXR3ZWVuIiwic3VibWl0IiwiY291bnRyeSIsIiRsYWJlbEVsZW1lbnQiLCJmaWx0ZXIiLCIkZHJvcGRvd25Db250ZW50IiwiaW5kZXhPZiIsImlubmVySFRNTCIsIiRzdWJtaXRCdXR0b24iLCIkY2F0YWxvZ01vcmVCdG4iLCIkcHJldkFycm93IiwiY2F0YWxvZ1BhZ2VzIiwiY3VycmVudCIsInRvdGFsIiwic2V0Q3VycmVudFBhZ2UiLCJjdXJyZW50UGFnZSIsInNldEJyZWFrIiwibGF0ZXN0UGFnZSIsInByZXZpb3VzU2libGluZyIsIiRmaXJzdEl0ZW0iLCIkYmVmb3JlU2VwYXJhdG9ySXRlbSIsInBhZ2UiLCIkc2VwYXJhdG9yIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiJG5leHRBcnJvdyIsImZvcm1hdHRlZFVSTCIsImZpbHRlcnNOYW1lcyIsIlVSTCIsImxvY2F0aW9uIiwiaHJlZiIsInNlYXJjaFBhcmFtcyIsInRvU3RyaW5nIiwic3BsaXQiLCJfc2xpY2VkVG9BcnJheSIsImNhdGFsb2dJdGVtRWxlbWVudCIsIl9yZWYyIiwidmVyaWZpZWQiLCJzdWJqZWN0cyIsImRlc2NyaXB0aW9uIiwibGluayIsInJhdGluZyIsInJldmlld3MiLCJwcmljZSIsInRvcCIsImltYWdlIiwic2VhcmNoIiwiaGlkZGVuIiwiZXhwZXJpZW5jZSIsImpvaW4iLCJ1cmwiLCJmb3JtYXRVUkwiLCJwdXNoIiwicXVlcnlVcmwiLCIkZWxlbWVudHMiLCJwYWdlWU9mZnNldCIsIm9mZnNldEhlaWdodCIsImJlaGF2aW9yIiwicGF5bWVudCIsInBheSIsIiRwcm9maWxlVmlkZW9Db3ZlciIsIiR2aWRlbyIsIiRyZXZpZXdzTW9yZUJ0biIsInJldmlld3NQYWdlcyIsInJldmlldyIsIl9yZWYzIiwiZGF0ZSIsImZlZWRiYWNrIiwiJHRpbWV6b25lRHJvcGRvd24iLCJzZXREYXRlVGltZSIsIiRjdXJyZW50VW5pdCIsInRpbWUiLCIkcHJldkJ1dHRvbiIsIiRhY3RpdmVTbGlkZSIsIiRuZXh0QnV0dG9uIiwiY3VycmVudEluZGV4IiwiJHByZXZTbGlkZSIsInNsaWRlIiwiZGF0ZXMiLCJmaXJzdCIs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QyxTQUFTbUMsaUJBQWlCLHNEQUFzREUsS0FBSSxTQUFBQyxHQUFFLE9BQUlBLEVBQUdULGlCQUFpQixRQUFTaUwiLCJmaWxlIjoiY29tbW9uLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XG5cbiAgLy8g0J7QsdGK0LXQutGCINCz0LvQvtCx0LDQu9GM0L3QvtCz0L4gQVBJXG5jb25zdCAkYXBpID0ge307XG5cbi8vIEFQSSDQtNC70Y8g0YDQsNCx0L7RgtGLINGBINC/0L7Qv9Cw0L/QsNC80LhcbiRhcGkucG9wdXAgPSAoJHBvcHVwLCB7IG9uSGlkZSwgb25TaG93IH0gPSB7fSkgPT4ge1xuICAvLyDQntGC0LrQu9GO0YfQsNC10YIg0LLQvtC30LzQvtC20L3QvtGB0YLRjCDRgdC60YDQvtC70LvQuNGC0Ywg0YHRgtGA0LDQvdC40YbRg1xuICBjb25zdCBoaWRlT3ZlcmZsb3cgPSAoKSA9PiB7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jc3NUZXh0ID0gYHBvc2l0aW9uOiBmaXhlZDsgbWFyZ2luLXRvcDogJHstd2luZG93LnNjcm9sbFl9cHhgO1xuICB9O1xuICBcbiAgLy8g0JLQutC70Y7Rh9Cw0LXRgiDQstC+0LfQvNC+0LbQvdC+0YHRgtGMINGB0LrRgNC+0LvQu9C40YLRjCDRgdGC0YDQsNC90LjRhtGDXG4gIGNvbnN0IHNob3dPdmVyZmxvdyA9IG9mZnNldCA9PiB7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jc3NUZXh0ID0gJ3Bvc2l0aW9uOiBzdGF0aWM7IG1hcmdpbi10b3A6IDAnO1xuICAgIFxuICAgIHdpbmRvdy5zY3JvbGxUbygwLCBvZmZzZXQpO1xuICB9O1xuICBcbiAgcmV0dXJuIHtcbiAgICAvLyDQktC+0LfQstGA0LDRidCw0LXRgiB0cnVlLCDQtdGB0LvQuCDQv9C+0L/QsNC/INC/0L7QutCw0LfRi9Cy0LDQtdGC0YHRjywg0LIg0LjQvdC+0Lwg0YHQu9GD0YfQsNC1IGZhbHNlXG4gICAgaXNTaG93bjogKCkgPT4gJHBvcHVwLmNsYXNzTGlzdC5jb250YWlucygncG9wdXAtLW9wZW5lZCcpLFxuICAgIC8vINCf0L7QutCw0LfRi9Cy0LDQtdGCINC/0L7Qv9Cw0L9cbiAgICBzaG93KCkge1xuICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAkcG9wdXAuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0pO1xuXG4gICAgICBoaWRlT3ZlcmZsb3coKTtcblxuICAgICAgcHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgJHBvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwLS1vcGVuZWQnKTtcbiAgICAgICAgaWYgKHR5cGVvZiBvblNob3cgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBvblNob3coKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyDQodC60YDRi9Cy0LDQtdGCINC/0L7Qv9Cw0L9cbiAgICBoaWRlKCkge1xuICAgICAgY29uc3Qgb2Zmc2V0ID0gLXBhcnNlSW50KGRvY3VtZW50LmJvZHkuc3R5bGUubWFyZ2luVG9wKTtcbiAgXG4gICAgICAkcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXAtLW9wZW5lZCcpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICRwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBzaG93T3ZlcmZsb3cob2Zmc2V0KTtcbiAgICAgICAgaWYgKHR5cGVvZiBvbkhpZGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBvbkhpZGUoKTtcbiAgICAgICAgfVxuICAgICAgfSwgMzAwKTtcbiAgICB9XG4gIH07XG59O1xuXG4vLyBBUEkg0LTQu9GPINCy0LDQu9C40LTQsNGG0LjQuCDRhNC+0YDQvFxuJGFwaS52YWxpZGF0ZSA9IChmb3JtLCByZXF1ZXN0KSA9PiB7XG4gIGNvbnN0IGVtYWlsUmVnZXhwID0gL14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC87XG4gIGNvbnN0IHNldEludmFsaWRJbnB1dCA9IGlucHV0ID0+IHtcbiAgICBpZiAoaW5wdXQuY2xvc2VzdCgnLmlucHV0JykpIHtcbiAgICAgIGlucHV0LmNsb3Nlc3QoJy5pbnB1dCcpLmNsYXNzTGlzdC5hZGQoJ2lucHV0LS1lcnJvcicpO1xuICAgIH0gZWxzZSBpZiAoaW5wdXQuY2xvc2VzdCgnLnRleHRhcmVhJykpIHtcbiAgICAgIGlucHV0LmNsb3Nlc3QoJy50ZXh0YXJlYScpLmNsYXNzTGlzdC5hZGQoJ3RleHRhcmVhLS1lcnJvcicpO1xuICAgIH1cbiAgICBpbnB1dC5mb2N1cygpO1xuICB9O1xuICBjb25zdCBzZXRJbnZhbGlkQ2hlY2tib3ggPSBpbnB1dCA9PiB7XG4gICAgaW5wdXQuY2xvc2VzdCgnLmNoZWNrYm94JykuY2xhc3NMaXN0LmFkZCgnY2hlY2tib3gtLWVycm9yJyk7XG4gIH07XG5cbiAgZm9ybS5xdWVyeVNlbGVjdG9yKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgbGV0IGZvcm1Jc1ZhbGlkID0gdHJ1ZTtcbiAgICBjb25zdCAkZm9ybUlucHV0cyA9IEFycmF5LmZyb20oZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtyZXF1aXJlZF0sIHRleHRhcmVhW3JlcXVpcmVkXScpKTtcbiAgICBjb25zdCAkY2hlY2tib3hTZWxlY3QgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGVja2JveHNlbGVjdCcpO1xuXG4gICAgJGZvcm1JbnB1dHMucmV2ZXJzZSgpLm1hcChlbCA9PiB7XG4gICAgICBpZiAoZWwuZGF0YXNldC5wYXNzUmVwZWF0ICYmIGVsLnZhbHVlICE9PSBlbC5jbG9zZXN0KCdmb3JtJykucXVlcnlTZWxlY3RvcignaW5wdXRbZGF0YS1wYXNzXScpLnZhbHVlKSB7XG4gICAgICAgIHNldEludmFsaWRJbnB1dChlbCk7XG4gICAgICB9XG5cbiAgICAgIHN3aXRjaChlbC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSkge1xuICAgICAgICBjYXNlICd0ZXh0JzpcbiAgICAgICAgY2FzZSAncGFzc3dvcmQnOlxuICAgICAgICAgIGlmIChlbC52YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgIHNldEludmFsaWRJbnB1dChlbCk7XG4gICAgICAgICAgICBmb3JtSXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndGVsJzpcbiAgICAgICAgICBpZiAoZWwudmFsdWUgPT09ICcnIHx8IGVsLnZhbHVlLmluY2x1ZGVzKCdfJykpIHtcbiAgICAgICAgICAgIHNldEludmFsaWRJbnB1dChlbCk7XG4gICAgICAgICAgICBmb3JtSXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnY2hlY2tib3gnOlxuICAgICAgICAgIGlmICghZWwuY2hlY2tlZCkge1xuICAgICAgICAgICAgc2V0SW52YWxpZENoZWNrYm94KGVsKTtcbiAgICAgICAgICAgIGZvcm1Jc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgaWYgKCFlbWFpbFJlZ2V4cC50ZXN0KGVsLnZhbHVlKSkge1xuICAgICAgICAgICAgc2V0SW52YWxpZElucHV0KGVsKTtcbiAgICAgICAgICAgIGZvcm1Jc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGlmIChlbC52YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgIHNldEludmFsaWRJbnB1dChlbCk7XG4gICAgICAgICAgICBmb3JtSXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgXG4gICAgaWYgKCRjaGVja2JveFNlbGVjdC5sZW5ndGgpIHtcbiAgICAgIEFycmF5LmZyb20oJGNoZWNrYm94U2VsZWN0KS5tYXAoZWwgPT4ge1xuICAgICAgICBsZXQgY2hlY2tlZCA9IGZhbHNlO1xuICBcbiAgICAgICAgQXJyYXkuZnJvbShlbC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hlY2tib3hfX2lucHV0JykpLm1hcChjaGVja2JveCA9PiB7XG4gICAgICAgICAgaWYgKGNoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgICAgICAgIGNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gIFxuICAgICAgICBpZiAoIWNoZWNrZWQpIHtcbiAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdjaGVja2JveHNlbGVjdC0tZXJyb3InKTtcbiAgICAgICAgICBmb3JtSXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoZm9ybUlzVmFsaWQpIHtcbiAgICAgIHJlcXVlc3QoKTtcbiAgICB9XG4gIH0pO1xuXG4gIEFycmF5LmZyb20oZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpKS5jb25jYXQoQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJykpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgaWYgKGVsLmNsb3Nlc3QoJy5pbnB1dCcpKSB7XG4gICAgICBlbC5jbG9zZXN0KCcuaW5wdXQnKS5jbGFzc0xpc3QucmVtb3ZlKCdpbnB1dC0tZXJyb3InKTtcbiAgICB9IGVsc2UgaWYgKGVsLmNsb3Nlc3QoJy5jaGVja2JveCcpKSB7XG4gICAgICBlbC5jbG9zZXN0KCcuY2hlY2tib3gnKS5jbGFzc0xpc3QucmVtb3ZlKCdjaGVja2JveC0tZXJyb3InKTtcbiAgICB9IGVsc2UgaWYgKGVsLmNsb3Nlc3QoJy50ZXh0YXJlYScpKSB7XG4gICAgICBlbC5jbG9zZXN0KCcudGV4dGFyZWEnKS5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0YXJlYS0tZXJyb3InKTtcbiAgICB9XG4gIH0pKTtcbn07XG5cbiAgLy8gaGFuZGxlIG9wZW4gcG9wdXBcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gIGNvbnN0ICR0aGlzID0gZS50YXJnZXQ7XG5cbiAgaWYgKCR0aGlzLmNsYXNzTGlzdC5jb250YWlucygnanMtb3Blbi1wb3B1cCcpKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc3QgdGFyZ2V0ID0gJHRoaXMuZGF0YXNldC5wb3B1cDtcbiAgICBjb25zdCAkcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuanMtcG9wdXBbZGF0YS1wb3B1cD1cIiR7dGFyZ2V0fVwiXWApO1xuICAgIFxuICAgICRhcGkucG9wdXAoJHBvcHVwKS5zaG93KCk7XG4gIH1cbn0pO1xuXG4vLyBoYW5kbGUgY2xvc2UgcG9wdXBcbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWNsb3NlLXBvcHVwJykpLm1hcChlbCA9PlxuICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGlmKCFlLnRhcmdldC5jbG9zZXN0KCcucG9wdXBfX3dpbmRvdycpIHx8ICFlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1wb3B1cCcpKSB7XG4gICAgICBjb25zdCAkcG9wdXAgPSBlLmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnBvcHVwJyk7XG5cbiAgICAgICRhcGkucG9wdXAoJHBvcHVwKS5oaWRlKCk7XG4gICAgfVxuICB9KVxuKTtcblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1yZXN0b3JlLWZvcm1dJykpIHtcbiAgJGFwaS52YWxpZGF0ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtcmVzdG9yZS1mb3JtXScpLCAoKSA9PiB7fSk7XG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtcmVxdWVzdC1hdXRoLWZvcm1dJykpIHtcbiAgJGFwaS52YWxpZGF0ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtcmVxdWVzdC1hdXRoLWZvcm1dJyksICgpID0+IHt9KTtcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1yZXF1ZXN0LWZvcm1dJykpIHtcbiAgJGFwaS52YWxpZGF0ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtcmVxdWVzdC1mb3JtXScpLCAoKSA9PiB7XG4gICAgY29uc3QgJHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXBvcHVwW2RhdGEtcG9wdXA9XCJyZXF1ZXN0XCJdJyk7XG4gICAgY29uc3QgJHN1Y2Nlc3NQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wb3B1cFtkYXRhLXBvcHVwPVwicmVxdWVzdC1zdWNjZXNzXCJdJyk7XG5cbiAgICAkYXBpLnBvcHVwKCRwb3B1cCwge1xuICAgICAgb25IaWRlKCkge1xuICAgICAgICBBcnJheS5mcm9tKCRwb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpKS5tYXAoZWwgPT4gZWwudmFsdWUgPSAnJyk7XG4gICAgICAgICRhcGkucG9wdXAoJHN1Y2Nlc3NQb3B1cCkuc2hvdygpO1xuICAgICAgfVxuICAgIH0pLmhpZGUoKTtcbiAgfSk7XG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtcmVxdWVzdC1zcGVjaWZpYy1mb3JtXScpKSB7XG4gICRhcGkudmFsaWRhdGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXJlcXVlc3Qtc3BlY2lmaWMtZm9ybV0nKSwgKCkgPT4ge1xuICAgIGNvbnN0ICRwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wb3B1cFtkYXRhLXBvcHVwPVwicmVxdWVzdC1zcGVjaWZpY1wiXScpO1xuICAgIGNvbnN0ICRzdWNjZXNzUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtcG9wdXBbZGF0YS1wb3B1cD1cInJlcXVlc3Qtc3VjY2Vzc1wiXScpO1xuXG4gICAgJGFwaS5wb3B1cCgkcG9wdXAsIHtcbiAgICAgIG9uSGlkZSgpIHtcbiAgICAgICAgQXJyYXkuZnJvbSgkcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKSkubWFwKGVsID0+IGVsLnZhbHVlID0gJycpO1xuICAgICAgICAkYXBpLnBvcHVwKCRzdWNjZXNzUG9wdXApLnNob3coKTtcbiAgICAgIH1cbiAgICB9KS5oaWRlKCk7XG4gIH0pO1xufVxuICBjb25zdCAkZHJvcGRvd25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZHJvcGRvd24nKSk7XG5cbi8vIGNsb3NlIGRyb3Bkb3duIG9uIG91dGVyIGNsaWNrXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9IGUudGFyZ2V0O1xuXG4gICRkcm9wZG93bnMubWFwKGVsID0+IHtcbiAgICBpZihlbC5jbG9zZXN0KCcuZHJvcGRvd24nKSAhPT0gJHRoaXMuY2xvc2VzdCgnLmRyb3Bkb3duJykpIHtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3Bkb3duLS1hY3RpdmUnKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbi8vIG9wZW4gZHJvcGRvd25cbiRkcm9wZG93bnMubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2lucHV0X19jb2RlJykpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICBpZiAoIWVsLmNsYXNzTGlzdC5jb250YWlucygnZHJvcGRvd24tLWFjdGl2ZScpKSB7XG4gICAgJGRyb3Bkb3ducy5tYXAoZWwgPT4gZWwgIT09IGVsICYmIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3Bkb3duLS1hY3RpdmUnKSk7XG4gICAgZWwuY2xhc3NMaXN0LnRvZ2dsZSgnZHJvcGRvd24tLWFjdGl2ZScpO1xuICB9XG59KSk7XG5cbi8vIGNoYW5nZSBkcm9wZG93biB2YWx1ZVxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgY29uc3QgJGRyb3Bkb3duTWVudUl0ZW0gPSBlLnRhcmdldC5jbG9zZXN0KCcuZHJvcGRvd25fX21lbnUtaXRlbScpO1xuXG4gIGlmICgkZHJvcGRvd25NZW51SXRlbSkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi0tYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgnZHJvcGRvd24tLWFjdGl2ZScpO1xuXG4gICAgaWYgKCRkcm9wZG93bk1lbnVJdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS10b2dnbGUnKSkge1xuICAgICAgY29uc3QgJHRoaXMgPSBlLnRhcmdldDtcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gJHRoaXMuaW5uZXJUZXh0O1xuICAgICAgY29uc3QgJGhpZGRlbkl0ZW0gPSAkdGhpcy5jbG9zZXN0KCcuZHJvcGRvd25fX21lbnUnKS5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd25fX21lbnUtaXRlbS0taGlkZGVuJyk7XG4gICAgICBjb25zdCAkZHJvcGRvd25WYWx1ZSA9ICR0aGlzLmNsb3Nlc3QoJy5kcm9wZG93bicpLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bl9fdmFsdWUnKTtcblxuICAgICAgaWYgKCRoaWRkZW5JdGVtKSB7XG4gICAgICAgICRoaWRkZW5JdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3Bkb3duX19tZW51LWl0ZW0tLWhpZGRlbicpO1xuICAgICAgfVxuXG4gICAgICAkZHJvcGRvd25NZW51SXRlbS5jbGFzc0xpc3QuYWRkKCdkcm9wZG93bl9fbWVudS1pdGVtLS1oaWRkZW4nKTsgXG4gICAgICAkZHJvcGRvd25WYWx1ZS5pbm5lclRleHQgPSBuZXdWYWx1ZTtcbiAgICB9XG4gIH1cbn0pO1xuICAvLyBoYW5kbGUgdGFicyBsb2dpY1xuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFic19faXRlbScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCB0YXJnZXQgPSBlbC5kYXRhc2V0LnRhYjtcbiAgY29uc3QgJGFjdGl2ZVRhYkNvbnRlbnQgPSBlbC5jbG9zZXN0KCdbZGF0YS10YWJzXScpLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFjdGl2ZV0nKTtcblxuICBlbC5jbG9zZXN0KCcudGFicycpLnF1ZXJ5U2VsZWN0b3IoJy50YWJzX19pdGVtLS1hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCd0YWJzX19pdGVtLS1hY3RpdmUnKTtcbiAgZWwuY2xhc3NMaXN0LmFkZCgndGFic19faXRlbS0tYWN0aXZlJyk7XG5cbiAgaWYgKCRhY3RpdmVUYWJDb250ZW50KSB7XG4gICAgZWwuY2xvc2VzdCgnW2RhdGEtdGFic10nKS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3RpdmVdJykucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWFjdGl2ZScpO1xuICAgIGVsLmNsb3Nlc3QoJ1tkYXRhLXRhYnNdJykucXVlcnlTZWxlY3RvcihgW2RhdGEtY29udGVudD1cIiR7dGFyZ2V0fVwiXWApLnNldEF0dHJpYnV0ZSgnZGF0YS1hY3RpdmUnLCB0cnVlKTtcbiAgfVxufSkpO1xuICBjb25zdCBjaGFuZ2VDb3VudHJ5RXZlbnQgPSBuZXcgRXZlbnQoJ2NoYW5nZUNvdW50cnknKTtcblxuY29uc3QgdXBkYXRlTWFzayA9IChpbnB1dCwgbWFzaykgPT4ge1xuICBJbnB1dG1hc2soe21hc2t9KS5tYXNrKGlucHV0KTtcbn07XG5cbi8vIE9wZW4gaW5wdXQgZHJvcGRvd25cbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0LmRyb3Bkb3duJykpXG4uY29uY2F0KEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0IC5kcm9wZG93bicpKSlcbi5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0ICRkcm9wZG93biA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bl9fbWVudScpO1xuICBlbC5jbG9zZXN0KCcuaW5wdXQnKS5xdWVyeVNlbGVjdG9yKCcuaW5wdXRfX2Ryb3Bkb3duJykuc3R5bGUud2lkdGggPSBlbC5jbG9zZXN0KCcuaW5wdXQnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCArICdweCc7XG5cbiAgaWYgKCEkZHJvcGRvd24uY2xhc3NMaXN0LmNvbnRhaW5zKCdmYWtlU2Nyb2xsJykpIHtcbiAgICAkZHJvcGRvd24uZmFrZVNjcm9sbCgpO1xuICB9XG59KSk7XG5cbi8vIENoYW5nZSBwaG9uZSBjb2RlIG9uIGlucHV0IGRyb3Bkb3duXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dF9fZHJvcGRvd24taXRlbVtkYXRhLWNvZGUtbG9jXScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0IGxvYyA9IGVsLmRhdGFzZXQuY29kZUxvYztcbiAgY29uc3QgbWFzayA9IGVsLmRhdGFzZXQubWFzaztcbiAgY29uc3QgJGlucHV0ID0gZWwuY2xvc2VzdCgnLmlucHV0JykucXVlcnlTZWxlY3RvcignaW5wdXQnKTtcblxuICBlbC5jbG9zZXN0KCcuaW5wdXRfX2NvZGUnKS5kYXRhc2V0LmNvZGVMb2MgPSBsb2M7XG4gIGVsLmNsb3Nlc3QoJy5pbnB1dF9fY29kZScpLmRhdGFzZXQubWFzayA9IG1hc2s7XG4gICRpbnB1dC5wbGFjZWhvbGRlciA9IG1hc2sucmVwbGFjZUFsbCgnOScsICdfJyk7XG4gIHVwZGF0ZU1hc2soJGlucHV0LCBtYXNrKTtcbn0pKTtcblxuLy8gQ2hhbmdlIGlucHV0IGRyb3Bkb3duIHZhbHVlXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dF9fZHJvcGRvd24taXRlbVtkYXRhLWRyb3Bkb3duXScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gZWwuaW5uZXJUZXh0O1xuICBcbiAgZWwuY2xvc2VzdCgnLmlucHV0JykucXVlcnlTZWxlY3RvcignaW5wdXQnKS52YWx1ZSA9IHZhbHVlO1xuICBlbC5jbG9zZXN0KCcuaW5wdXQnKS5jbGFzc0xpc3QucmVtb3ZlKCdpbnB1dC0tZXJyb3InKTtcblxuICBpZiAoZWwuY2xvc2VzdCgnLmlucHV0JykuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1hdXRoLWNvdW50cnknKSkge1xuICAgIGVsLmNsb3Nlc3QoJy5pbnB1dCcpLmRpc3BhdGNoRXZlbnQoY2hhbmdlQ291bnRyeUV2ZW50KTtcbiAgfVxufSkpO1xuXG4vLyBNYXNraW5nIHBob25lIGlucHV0XG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJ0ZWxcIl0nKSkubWFwKGVsID0+IHtcbiAgSW5wdXRtYXNrKHttYXNrOiBlbC5jbG9zZXN0KCcuaW5wdXQnKS5xdWVyeVNlbGVjdG9yKCcuaW5wdXRfX2NvZGUnKS5kYXRhc2V0Lm1hc2t9KS5tYXNrKGVsKTtcbn0pO1xuICAvLyBoYW5kbGUgY2hlY2tib3hzZWxlY3QgbG9naWNcbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoZWNrYm94c2VsZWN0X19saXN0JykpLm1hcChsaXN0ID0+IHtcbiAgbGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIFxuICAgIGNvbnN0ICRjaGVja2JveFNlbGVjdCA9IGxpc3QuY2xvc2VzdCgnLmNoZWNrYm94c2VsZWN0Jyk7XG4gICAgbGV0IGNoZWNrZWQgPSBmYWxzZTtcblxuICAgICRjaGVja2JveFNlbGVjdC5jbGFzc0xpc3QucmVtb3ZlKCdjaGVja2JveHNlbGVjdC0tZXJyb3InKTtcblxuICAgIEFycmF5LmZyb20obGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hlY2tib3hfX2lucHV0JykpLm1hcChjaGVja2JveCA9PiB7XG4gICAgICBjb25zdCAkcGxhY2Vob2xkZXIgPSAkY2hlY2tib3hTZWxlY3QucXVlcnlTZWxlY3RvcignLmNoZWNrYm94c2VsZWN0X19pbnB1dC1wbGFjZWhvbGRlcicpO1xuXG4gICAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkgY2hlY2tlZCA9IHRydWU7XG5cbiAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBsZXQgdmFsdWUgPSAnJztcblxuICAgICAgICBBcnJheS5mcm9tKGxpc3QucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQ6Y2hlY2tlZCcpKS5tYXAoaXRlbSA9PiB7XG4gICAgICAgICAgdmFsdWUgKz0gaXRlbS5jbG9zZXN0KCcuY2hlY2tib3hzZWxlY3RfX2l0ZW0nKS5xdWVyeVNlbGVjdG9yKCcuY2hlY2tib3hfX3RleHQnKS5pbm5lclRleHQgKyAnLCAnO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAkcGxhY2Vob2xkZXIuaW5uZXJUZXh0ID0gdmFsdWUuc3Vic3RyaW5nKDAsIHZhbHVlLmxlbmd0aCAtIDIpO1xuICAgICAgICAgICRwbGFjZWhvbGRlci5jbGFzc0xpc3QuYWRkKCdjaGVja2JveHNlbGVjdF9faW5wdXQtcGxhY2Vob2xkZXItLWFjdGl2ZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRwbGFjZWhvbGRlci5pbm5lclRleHQgPSAkcGxhY2Vob2xkZXIuZGF0YXNldC5wbGFjZWhvbGRlcjtcbiAgICAgICAgICAkcGxhY2Vob2xkZXIuY2xhc3NMaXN0LnJlbW92ZSgnY2hlY2tib3hzZWxlY3RfX2lucHV0LXBsYWNlaG9sZGVyLS1hY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIFxuICAgIGlmIChjaGVja2VkKSB7XG4gICAgICAkY2hlY2tib3hTZWxlY3QuY2xhc3NMaXN0LmFkZCgnY2hlY2tib3hzZWxlY3QtLWNoZWNrZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGNoZWNrYm94U2VsZWN0LmNsYXNzTGlzdC5yZW1vdmUoJ2NoZWNrYm94c2VsZWN0LS1jaGVja2VkJyk7XG4gICAgfVxuICB9KTtcblxuICBsaXN0LmZha2VTY3JvbGwoKTtcbn0pO1xuICAvLyBzZXQgZmlsdGVyIGlucHV0IHZhbHVlXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWx0ZXJzX19kcm9wZG93bi1pdGVtJykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9IGUuY3VycmVudFRhcmdldDtcbiAgY29uc3QgdmFsdWUgPSAkdGhpcy5pbm5lclRleHQ7XG5cbiAgJHRoaXMuY2xvc2VzdCgnLmZpbHRlcnNfX2lucHV0JykucXVlcnlTZWxlY3RvcignLmZpbHRlcnNfX2lucHV0LWZpZWxkJykudmFsdWUgPSB2YWx1ZTtcbn0pKTtcblxuLy8gZmlsdGVyIG1haW4gbG9naWNcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmlsdGVyc19faW5wdXQtZmllbGQnKS5sZW5ndGgpIHtcbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmlsdGVyc19faW5wdXQtZmllbGQnKSkubWFwKGVsID0+IHtcbiAgICBmZXRjaCgnZGF0YS9sb2NhdGlvbi5qc29uJykudGhlbihyZXMgPT4gcmVzLmpzb24oKSkudGhlbihkYXRhID0+IHtcbiAgICAgIGNvbnN0ICR0aGlzID0gZWw7XG4gICAgICAvLyBoYW5kbGUgZmlsdGVyIGlucHV0XG4gICAgICBjb25zdCBoYW5kbGVJbnB1dCA9IGZpcnN0UmVuZGVyID0+IHtcbiAgICAgICAgY29uc3QgJGRyb3Bkb3duRWxlbWVudCA9ICR0aGlzLm5leHRFbGVtZW50U2libGluZy5xdWVyeVNlbGVjdG9yKCcuZmlsdGVyc19fZHJvcGRvd24taW5uZXInKTtcbiAgICAgICAgY29uc3QgJGRyb3Bkb3duID0gJGRyb3Bkb3duRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZmFrZVNjcm9sbF9fY29udGVudCcpIHx8ICRkcm9wZG93bkVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGlucHV0U21hcnRTZWFyY2ggPSAkdGhpcy5nZXRBdHRyaWJ1dGUoJ25hbWUnKSA9PT0gJ2xvY2F0aW9uJztcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGlucHV0U21hcnRTZWFyY2ggPyBkYXRhLm1hcChlbCA9PiBlbC5rZXkpLmNvbmNhdChkYXRhLmZsYXRNYXAoaXRlbSA9PiBpdGVtLmNpdGllcykpIDogSlNPTi5wYXJzZSgkdGhpcy5kYXRhc2V0Lm9wdGlvbnMpO1xuICAgICAgICBjb25zdCBsb3dlckNhc2VWYWx1ZSA9ICR0aGlzLnZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0ICRjaGVja2JveCA9ICRkcm9wZG93bi5jbG9zZXN0KCcuZmlsdGVyc19fZHJvcGRvd24nKS5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKTtcbiAgICAgICAgbGV0IG1hdGNoZXNGb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgICRkcm9wZG93bi5pbm5lckhUTUwgPSAnJztcbiAgICAgIFxuICAgICAgICAvLyByZW5kZXIgZmlsdGVyIGRyb3Bkb3duIGl0ZW1zXG4gICAgICAgIG9wdGlvbnMubWFwKGVsID0+IHtcbiAgICAgICAgICBpZiAoZmlyc3RSZW5kZXIgfHwgZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKGxvd2VyQ2FzZVZhbHVlKSA9PT0gMCkge1xuICAgICAgICAgICAgY29uc3QgJGVsZW1lbnQgPSBpbnB1dFNtYXJ0U2VhcmNoID9cbiAgICAgICAgICAgICAgYDxhIGNsYXNzPVwiZmlsdGVyc19fZHJvcGRvd24taXRlbSBkcm9wZG93bl9fbWVudS1pdGVtJHsobG93ZXJDYXNlVmFsdWUgJiYgIWZpcnN0UmVuZGVyKSA/ICcgZmlsdGVyc19fZHJvcGRvd24taXRlbS0tc21hcnQnIDogJyd9XCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiPjxzcGFuPiR7ZWwuc3Vic3RyKDAsIGxvd2VyQ2FzZVZhbHVlLmxlbmd0aCl9PC9zcGFuPiR7ZWwuc3Vic3RyKGxvd2VyQ2FzZVZhbHVlLmxlbmd0aCl9PC9hPmAgOlxuICAgICAgICAgICAgICBgPGEgY2xhc3M9XCJmaWx0ZXJzX19kcm9wZG93bi1pdGVtIGRyb3Bkb3duX19tZW51LWl0ZW1cIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCI+JHtlbH08L2E+YDtcbiAgICAgICAgICAgIG1hdGNoZXNGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAkZHJvcGRvd24uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCAkZWxlbWVudClcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIHRvZ2dsZSBmaWx0ZXIgZHJvcGRvd24gdmlzaWJpbGl0eVxuICAgICAgICBpZiAobWF0Y2hlc0ZvdW5kKSB7XG4gICAgICAgICAgJGRyb3Bkb3duRWxlbWVudC5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2ZpbHRlcnNfX2Ryb3Bkb3duLS1oaWRkZW4nKTtcbiAgICAgICAgICAkZHJvcGRvd25FbGVtZW50LnBhcmVudE5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnZmlsdGVyc19fZHJvcGRvd24tLWVtcHR5Jyk7XG4gICAgICAgIH0gZWxzZSBpZiAoISRjaGVja2JveCkge1xuICAgICAgICAgICRkcm9wZG93bkVsZW1lbnQucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdmaWx0ZXJzX19kcm9wZG93bi0taGlkZGVuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJGRyb3Bkb3duRWxlbWVudC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2ZpbHRlcnNfX2Ryb3Bkb3duLS1lbXB0eScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaGFuZGxlIGlucHV0IHZhbHVlXG4gICAgICAgIEFycmF5LmZyb20oJGRyb3Bkb3duLnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWx0ZXJzX19kcm9wZG93bi1pdGVtJykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAkdGhpcy52YWx1ZSA9IGVsLmlubmVyVGV4dDtcbiAgICAgICAgICAkdGhpcy5zZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnLCBlbC5pbm5lclRleHQpO1xuXG4gICAgICAgICAgaWYgKCRjaGVja2JveCkge1xuICAgICAgICAgICAgJGNoZWNrYm94LmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICR0aGlzLnJlbW92ZUF0dHJpYnV0ZSgncmVhZG9ubHknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pKTtcblxuICAgICAgICAvLyBmYWtlU2Nyb2xsIGluaXRcbiAgICAgICAgaWYgKGZpcnN0UmVuZGVyICYmICEkZHJvcGRvd25FbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZmFrZVNjcm9sbCcpKSB7XG4gICAgICAgICAgJGRyb3Bkb3duLmZha2VTY3JvbGwoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIC8vIGFkZCBsaXN0ZW5lcnMgb24gZmlsdGVyIGlucHV0XG4gICAgICBpZiAoJHRoaXMubmFtZSAhPT0gJ2Nvc3QnKSB7XG4gICAgICAgICR0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gaGFuZGxlSW5wdXQoZmFsc2UpKTtcbiAgICAgICAgJHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoKSA9PiBoYW5kbGVJbnB1dCh0cnVlKSk7XG4gICAgICAgICR0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiB7XG4gICAgICAgICAgaWYgKCR0aGlzLnZhbHVlID09PSAnJyB8fCAhJHRoaXMuZGF0YXNldC52YWx1ZSkge1xuICAgICAgICAgICAgJHRoaXMudmFsdWUgPSAnJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHRoaXMudmFsdWUgPSAkdGhpcy5kYXRhc2V0LnZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG5cbi8vIGhhbmRsZSBmaWx0ZXIgcmFuZ2Ugc2xpZGVyXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWx0ZXJzX19jb3N0LXJhbmdlJykpLm1hcCgkcmFuZ2UgPT4ge1xuICBjb25zdCBtaW4gPSArJHJhbmdlLmRhdGFzZXQubWluO1xuICBjb25zdCBtYXggPSArJHJhbmdlLmRhdGFzZXQubWF4O1xuICBjb25zdCBzbWluID0gKyRyYW5nZS5kYXRhc2V0Lm1pbjtcbiAgY29uc3Qgc21heCA9ICskcmFuZ2UuZGF0YXNldC5tYXg7XG5cbiAgbm9VaVNsaWRlci5jcmVhdGUoJHJhbmdlLCB7XG4gICAgc3RhcnQ6IFtzbWluLCBzbWF4XSxcbiAgICBjb25uZWN0OiB0cnVlLFxuICAgIHJhbmdlOiB7XG4gICAgICBtaW4sXG4gICAgICBtYXhcbiAgICB9LFxuICAgIHN0ZXA6IDEwMFxuICB9KTtcblxuICAkcmFuZ2Uubm9VaVNsaWRlci5vbignc2xpZGUnLCB2YWx1ZXMgPT4ge1xuICAgIGNvbnN0IG1pbiA9IHBhcnNlSW50KHZhbHVlc1swXSk7XG4gICAgY29uc3QgbWF4ID0gcGFyc2VJbnQodmFsdWVzWzFdKTtcblxuICAgICRyYW5nZS5jbG9zZXN0KCcuZmlsdGVyc19faW5wdXQnKS5xdWVyeVNlbGVjdG9yKCcuZmlsdGVyc19faW5wdXQtZmllbGQnKS52YWx1ZSA9IGAke21pbn0g4oK9IOKAkyAke21heH0g4oK9YDtcbiAgICAkcmFuZ2UuY2xvc2VzdCgnLmZpbHRlcnNfX2Nvc3QnKS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jb3N0PVwiZnJvbVwiXScpLmlubmVyVGV4dCA9IG1pbjtcbiAgICAkcmFuZ2UuY2xvc2VzdCgnLmZpbHRlcnNfX2Nvc3QnKS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jb3N0PVwidG9cIl0nKS5pbm5lclRleHQgPSBtYXg7XG4gIH0pO1xufSk7XG5cblxuLy8gaGFuZGxlIGZpbHRlciBjaGVja2JveFxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmlsdGVyc19fZHJvcGRvd24tY2hlY2tib3gnKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCAkaW5wdXRGaWVsZCA9IGVsLmNsb3Nlc3QoJy5maWx0ZXJzX19pbnB1dCcpLnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXJzX19pbnB1dC1maWVsZCcpO1xuXG4gIGlmIChlbC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLmNoZWNrZWQpIHtcbiAgICBjb25zdCBjaGVja2JveFZhbHVlID0gZWwucXVlcnlTZWxlY3RvcignLmNoZWNrYm94X190ZXh0JykuaW5uZXJUZXh0O1xuICBcbiAgICAkaW5wdXRGaWVsZC52YWx1ZSA9IGNoZWNrYm94VmFsdWU7XG4gICAgJGlucHV0RmllbGQuc2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJywgY2hlY2tib3hWYWx1ZSk7XG4gICAgJGlucHV0RmllbGQuc2V0QXR0cmlidXRlKCdyZWFkb25seScsICdyZWFkb25seScpO1xuICB9IGVsc2Uge1xuICAgICRpbnB1dEZpZWxkLnZhbHVlID0gJyc7XG4gICAgJGlucHV0RmllbGQuc2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJywgJycpO1xuICAgICRpbnB1dEZpZWxkLnJlbW92ZUF0dHJpYnV0ZSgncmVhZG9ubHknKTtcbiAgfVxufSkpO1xuICAvLyBzaG93IGhpZGRuZSBzdWJqZWN0IGluIHR1dG9yY2FyZFxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgY29uc3QgJHRhcmdldCA9IGUudGFyZ2V0O1xuXG4gIGlmICgkdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnanMtdHV0b3JjYXJkLW1vcmUnKSkge1xuICAgICR0YXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBcbiAgICBBcnJheS5mcm9tKCR0YXJnZXQuY2xvc2VzdCgnLnR1dG9yY2FyZF9fc3ViamVjdHMnKS5xdWVyeVNlbGVjdG9yQWxsKCcudHV0b3JjYXJkX19zdWJqZWN0cy1pdGVtLS1oaWRkZW4nKSkubWFwKGVsID0+IHtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3R1dG9yY2FyZF9fc3ViamVjdHMtaXRlbS0taGlkZGVuJyk7XG4gICAgfSk7XG4gIH1cbn0pO1xuICBcbiAgY29uc3QgJGJhbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYW5uZXInKTtcblxuLy8gYmFubmVyIGhhbmRsaW5nXG5pZiAoIUpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xldG1ldHV0b3I6YmFubmVySXNIaWRkZW4nKSkpIHtcbiAgJGJhbm5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFubmVyX19jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICRiYW5uZXIuY2xhc3NMaXN0LmFkZCgnYmFubmVyLS1oaWRlJyk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAkYmFubmVyLnJlbW92ZSgpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xldG1ldHV0b3I6YmFubmVySXNIaWRkZW4nLCB0cnVlKTtcbiAgICB9LCA1MDApXG4gIH0pO1xufSBlbHNlIHtcbiAgJGJhbm5lci5yZW1vdmUoKTtcbn1cbiAgY29uc3QgJGNvb2tpZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29va2llcycpO1xuXG4vLyBjb29raWVzIGhhbmRsaW5nXG5pZiAoIUpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xldG1ldHV0b3I6Y29va2llc0lzSGlkZGVuJykpKSB7XG4gICRjb29raWVzLmNsYXNzTGlzdC5hZGQoJ2Nvb2tpZXMtLXNob3duJyk7XG5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvb2tpZXNfX2J0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICRjb29raWVzLmNsYXNzTGlzdC5yZW1vdmUoJ2Nvb2tpZXMtLXNob3duJyk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAkY29va2llcy5yZW1vdmUoKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsZXRtZXR1dG9yOmNvb2tpZXNJc0hpZGRlbicsIHRydWUpO1xuICAgIH0sIDUwMClcbiAgfSk7XG59IGVsc2Uge1xuICAkY29va2llcy5yZW1vdmUoKTtcbn1cbiAgbGV0IG9mZnNldCA9IDA7XG5jb25zdCBoaWRlT3ZlcmZsb3cgPSAoKSA9PiB7XG4gIG9mZnNldCA9IC1wYXJzZUludChkb2N1bWVudC5ib2R5LnN0eWxlLm1hcmdpblRvcCk7XG4gIGRvY3VtZW50LmJvZHkuc3R5bGUuY3NzVGV4dCA9IGBwb3NpdGlvbjogZml4ZWQ7IG1hcmdpbi10b3A6ICR7LXdpbmRvdy5zY3JvbGxZfXB4YDtcbn07XG5jb25zdCBzaG93T3ZlcmZsb3cgPSBvZmZzZXQgPT4ge1xuICBkb2N1bWVudC5ib2R5LnN0eWxlLmNzc1RleHQgPSAncG9zaXRpb246IHN0YXRpYzsgbWFyZ2luLXRvcDogMCc7XG4gIHdpbmRvdy5zY3JvbGxUbygwLCBvZmZzZXQpO1xufTtcbmNvbnN0IGhpZGVIZWFkZXJNZW51ID0gKCkgPT4ge1xuICBzaG93T3ZlcmZsb3coKTtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlci1tZW51JykuY2xhc3NMaXN0LnJlbW92ZSgnaGVhZGVyLW1lbnUtLXNob3duJyk7XG59O1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19idXJnZXInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgaGlkZU92ZXJmbG93KCk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItbWVudScpLmNsYXNzTGlzdC5hZGQoJ2hlYWRlci1tZW51LS1zaG93bicpO1xufSk7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItbWVudV9fYmFja2Ryb3AnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhpZGVIZWFkZXJNZW51KTtcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItbWVudV9fY2xvc2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhpZGVIZWFkZXJNZW51KTtcblxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaGVhZGVyX19ub3RpZmljYXRpb25zLXdyYXBwZXInKSkubWFwKGVsID0+IHtcbiAgaWYgKCFlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2Zha2VTY3JvbGwnKSkge1xuICAgIGVsLmZha2VTY3JvbGwoKTtcbiAgfVxufSk7XG4gIGNvbnN0IHBvcHVsYXJTbGlkZXIgPSBuZXcgU3dpcGVyKCcucG9wdWxhcl9fZ3JpZC0tbW9iaWxlJywge1xuICBsb29wOiB0cnVlLFxuICBsb29wQWRkaXRpb25hbFNsaWRlczogMyxcbiAgc3BhY2VCZXR3ZWVuOiAyMCxcbiAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxuICBjZW50ZXJlZFNsaWRlczogdHJ1ZSxcbiAgYnJlYWtwb2ludHM6IHtcbiAgICA3NjA6IHtcbiAgICAgIHNsaWRlc1BlclZpZXc6IDIsXG4gICAgICBjZW50ZXJlZFNsaWRlczogZmFsc2VcbiAgICB9XG4gIH1cbn0pO1xuICBjb25zdCByZXZpZXdzU2xpZGVyID0gbmV3IFN3aXBlcignLnJldmlld3NfX3NsaWRlcicsIHtcbiAgbG9vcDogdHJ1ZSxcbiAgc3BhY2VCZXR3ZWVuOiAyMCxcbiAgc2xpZGVzUGVyVmlldzogMyxcbiAgc2xpZGVzUGVyR3JvdXA6IDMsXG4gIGxvb3BBZGRpdGlvbmFsU2xpZGVzOiAzLFxuICBwYWdpbmF0aW9uOiB7XG4gICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxuICAgIGNsaWNrYWJsZTogdHJ1ZVxuICB9XG59KTtcblxuY29uc3QgcmV2aWV3U2xpZGVyTW9iaWxlID0gbmV3IFN3aXBlcignLnJldmlld3NfX3NsaWRlci0tbW9iaWxlJywge1xuICBsb29wOiB0cnVlLFxuICBzcGFjZUJldHdlZW46IDIwLFxuICBsb29wQWRkaXRpb25hbFNsaWRlczogMyxcbiAgcGFnaW5hdGlvbjoge1xuICAgIGVsOiAnLnN3aXBlci1wYWdpbmF0aW9uJyxcbiAgICBjbGlja2FibGU6IHRydWVcbiAgfVxufSk7XG4gIC8vIGF1dGggZm9ybSB2YWxpZGF0aW9uXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLWxvZ2luLWZvcm1dJykpIHtcbiAgJGFwaS52YWxpZGF0ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtbG9naW4tZm9ybV0nKSwgKCkgPT4ge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1sb2dpbi1mb3JtXScpLnN1Ym1pdCgpO1xuICB9KTtcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1zaWdudXAtc3R1ZGVudC1mb3JtXScpKSB7XG4gICRhcGkudmFsaWRhdGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXNpZ251cC1zdHVkZW50LWZvcm1dJyksICgpID0+IHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtc2lnbnVwLXN0dWRlbnQtZm9ybV0nKS5zdWJtaXQoKTtcbiAgfSk7XG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtc2lnbnVwLXR1dG9yLWZvcm1dJykpIHtcbiAgJGFwaS52YWxpZGF0ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtc2lnbnVwLXR1dG9yLWZvcm1dJyksICgpID0+IHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtc2lnbnVwLXR1dG9yLWZvcm1dJykuc3VibWl0KCk7XG4gIH0pO1xufVxuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXN1cHBvcnQtZm9ybV0nKSkge1xuICAkYXBpLnZhbGlkYXRlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1zdXBwb3J0LWZvcm1dJyksICgpID0+IHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtc3VwcG9ydC1mb3JtXScpLnN1Ym1pdCgpO1xuICB9KTtcbn1cblxuLy8gc2V0IGNvdW50cnkgdmFsdWUgdG8gY2l0aWVzIGlucHV0XG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1hdXRoLWNvdW50cnknKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZUNvdW50cnknLCBlID0+IHtcbiAgZWwuY2xvc2VzdCgnZm9ybScpLnF1ZXJ5U2VsZWN0b3IoJy5qcy1hdXRoLWNpdHknKS5kYXRhc2V0LmNvdW50cnkgPSBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLnZhbHVlO1xufSkpO1xuXG4vLyBoYW5kbGluZyBjaXRpZXMgaW5wdXRcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtYXV0aC1jaXR5IGlucHV0JykubGVuZ3RoKSB7XG4gIGZldGNoKCdkYXRhL2xvY2F0aW9uLmpzb24nKS50aGVuKHJlcyA9PiByZXMuanNvbigpKS50aGVuKGRhdGEgPT4ge1xuICAgIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWF1dGgtY2l0eSBpbnB1dCcpKS5tYXAoZWwgPT4ge1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBlID0+IHtcbiAgICAgICAgY29uc3QgJHRoaXMgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgICAgIGNvbnN0ICRsYWJlbEVsZW1lbnQgPSAkdGhpcy5jbG9zZXN0KCcuaW5wdXQnKTtcbiAgICAgICAgY29uc3QgY291bnRyeSA9ICRsYWJlbEVsZW1lbnQuZGF0YXNldC5jb3VudHJ5O1xuXG4gICAgICAgIGlmIChjb3VudHJ5KSB7XG4gICAgICAgICAgY29uc3QgY2l0aWVzID0gZGF0YS5maWx0ZXIoZWwgPT4gZWwua2V5ID09PSBjb3VudHJ5KVswXS5jaXRpZXM7XG4gICAgICAgICAgY29uc3QgbG93ZXJDYXNlVmFsdWUgPSAkdGhpcy52YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIGNvbnN0ICRkcm9wZG93bkVsZW1lbnQgPSAkdGhpcy5jbG9zZXN0KCcuaW5wdXQnKS5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd25fX21lbnUnKTtcbiAgICAgICAgICBjb25zdCAkZHJvcGRvd25Db250ZW50ID0gJGRyb3Bkb3duRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZmFrZVNjcm9sbF9fY29udGVudCcpO1xuICAgICAgICAgIGxldCBtYXRjaGVzRm91bmQgPSBmYWxzZTtcblxuICAgICAgICAgIGlmICgkZHJvcGRvd25Db250ZW50KSB7XG4gICAgICAgICAgICAkZHJvcGRvd25Db250ZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICgkdGhpcy52YWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICAgIGNpdGllcy5tYXAoZWwgPT4ge1xuICAgICAgICAgICAgICBpZiAoZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKGxvd2VyQ2FzZVZhbHVlKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG1hdGNoZXNGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgJGRyb3Bkb3duQ29udGVudC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGA8YSBjbGFzcz1cImlucHV0X19kcm9wZG93bi1pdGVtIGRyb3Bkb3duX19tZW51LWl0ZW0ke2xvd2VyQ2FzZVZhbHVlID8gJyBpbnB1dF9fZHJvcGRvd24taXRlbS0tc21hcnQnIDogJyd9XCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiPjxzcGFuPiR7ZWwuc3Vic3RyKDAsIGxvd2VyQ2FzZVZhbHVlLmxlbmd0aCl9PC9zcGFuPiR7ZWwuc3Vic3RyKGxvd2VyQ2FzZVZhbHVlLmxlbmd0aCl9PC9hPmApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAobWF0Y2hlc0ZvdW5kKSB7XG4gICAgICAgICAgICAgIEFycmF5LmZyb20oJGxhYmVsRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW5wdXRfX2Ryb3Bkb3duLWl0ZW0nKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICR0aGlzLnZhbHVlID0gZWwuaW5uZXJUZXh0O1xuICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCEkZHJvcGRvd25FbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZmFrZVNjcm9sbCcpKSB7XG4gICAgICAgICAgICAkZHJvcGRvd25FbGVtZW50LmZha2VTY3JvbGwoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsICgpID0+IHtcbiAgICAgICAgY29uc3QgJGRyb3Bkb3duRWxlbWVudCA9IGVsLmNsb3Nlc3QoJy5pbnB1dCcpLnF1ZXJ5U2VsZWN0b3IoJy5mYWtlU2Nyb2xsX19jb250ZW50Jyk7XG5cbiAgICAgICAgaWYgKCRkcm9wZG93bkVsZW1lbnQpIHtcbiAgICAgICAgICAkZHJvcGRvd25FbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbi8vIGhhbmRsaW5nIHJlcXVpcmVkIGFncmVlbWVudCBjaGVja2JveFxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtuYW1lPVwicnVsZXNBZ3JlZW1lbnRcIl0nKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgY29uc3QgJHN1Ym1pdEJ1dHRvbiA9IGVsLmNsb3Nlc3QoJ2Zvcm0nKS5xdWVyeVNlbGVjdG9yKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xuXG4gIGlmIChlbC5jaGVja2VkKSB7XG4gICAgJHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdidXR0b24tLWRpc2FibGVkJyk7XG4gICAgJHN1Ym1pdEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gIH0gZWxzZSB7XG4gICAgJHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidXR0b24tLWRpc2FibGVkJyk7XG4gICAgJHN1Ym1pdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gIH1cbn0pKTtcblxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYXV0aF9fdG9nZ2xlIC50YWJzX19pdGVtJykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmF1dGhfX3R5cGUnKS52YWx1ZSA9IGVsLmRhdGFzZXQudGFiIC0gMTtcbn0pKTtcbiAgY29uc3QgJGNhdGFsb2dNb3JlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWNhdGFsb2ctbW9yZScpO1xuXG5pZiAoJGNhdGFsb2dNb3JlQnRuKSB7XG4gIGNvbnN0ICRwcmV2QXJyb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnaW5hdGlvbl9fYXJyb3ctLXByZXYnKTtcbiAgY29uc3QgJG5leHRBcnJvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYWdpbmF0aW9uX19hcnJvdy0tbmV4dCcpO1xuXG4gIC8vIGNhdGFsb2cgcGFnZXMgc3RhdGVcbiAgY29uc3QgY2F0YWxvZ1BhZ2VzID0ge1xuICAgIGN1cnJlbnQ6IFsxXSxcbiAgICB0b3RhbDogMTBcbiAgfTtcblxuICAvLyBzZXQgcGFnaW5hdGlvbiBjdXJyZW50IHBhZ2VcbiAgY29uc3Qgc2V0Q3VycmVudFBhZ2UgPSBjdXJyZW50UGFnZSA9PiB7XG4gICAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGFnaW5hdGlvbl9fcGFnZS0tY3VycmVudCcpKS5tYXAoZWwgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZSgncGFnaW5hdGlvbl9fcGFnZS0tY3VycmVudCcpKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAucGFnaW5hdGlvbl9fcGFnZVtkYXRhLXBhZ2U9XCIke2N1cnJlbnRQYWdlfVwiXWApLmNsYXNzTGlzdC5hZGQoJ3BhZ2luYXRpb25fX3BhZ2UtLWN1cnJlbnQnKTtcbiAgfTtcblxuICAvLyBzZXQgcGFnaW5hdGlvbiBicmVha1xuICBjb25zdCBzZXRCcmVhayA9IGxhdGVzdFBhZ2UgPT4ge1xuICAgIGNvbnN0ICRzZXBhcmF0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnaW5hdGlvbl9fc2VwYXJhdG9yJyk7XG4gICAgY29uc3QgJGJlZm9yZVNlcGFyYXRvckl0ZW0gPSAkc2VwYXJhdG9yLnByZXZpb3VzU2libGluZztcbiAgICBjb25zdCAkZmlyc3RJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhZ2luYXRpb25fX3BhZ2UnKTtcblxuICAgIGlmICgrJGJlZm9yZVNlcGFyYXRvckl0ZW0uZGF0YXNldC5wYWdlID09PSBsYXRlc3RQYWdlKSB7XG4gICAgICBpZiAobGF0ZXN0UGFnZSA9PT0gY2F0YWxvZ1BhZ2VzLnRvdGFsIC0gMikge1xuICAgICAgICAkZmlyc3RJdGVtLnJlbW92ZSgpO1xuICAgICAgICAkc2VwYXJhdG9yLmNsYXNzTGlzdC5hZGQoJ3BhZ2luYXRpb25fX3NlcGFyYXRvci0taGlkZGVuJyk7XG4gICAgICAgICRzZXBhcmF0b3IuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmViZWdpbicsIGA8YSBjbGFzcz1cInBhZ2luYXRpb25fX3BhZ2VcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCIgZGF0YS1wYWdlPVwiJHtsYXRlc3RQYWdlICsgMX1cIj4ke2xhdGVzdFBhZ2UgKyAxfTwvYT5gKTtcbiAgICAgIH0gZWxzZSBpZiAobGF0ZXN0UGFnZSA8IGNhdGFsb2dQYWdlcy50b3RhbCAtIDIpIHtcbiAgICAgICAgJGZpcnN0SXRlbS5yZW1vdmUoKTtcbiAgICAgICAgJHNlcGFyYXRvci5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWJlZ2luJywgYDxhIGNsYXNzPVwicGFnaW5hdGlvbl9fcGFnZVwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIiBkYXRhLXBhZ2U9XCIke2xhdGVzdFBhZ2UgKyAxfVwiPiR7bGF0ZXN0UGFnZSArIDF9PC9hPmApO1xuICAgICAgICAkc2VwYXJhdG9yLmNsYXNzTGlzdC5yZW1vdmUoJ3BhZ2luYXRpb25fX3NlcGFyYXRvci0taGlkZGVuJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgrJGZpcnN0SXRlbS5kYXRhc2V0LnBhZ2UgPT09IGxhdGVzdFBhZ2UgJiYgbGF0ZXN0UGFnZSAhPT0gMSkge1xuICAgICAgJGJlZm9yZVNlcGFyYXRvckl0ZW0ucmVtb3ZlKCk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnaW5hdGlvbl9fcGFnZXMnKS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCBgPGEgY2xhc3M9XCJwYWdpbmF0aW9uX19wYWdlXCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiIGRhdGEtcGFnZT1cIiR7bGF0ZXN0UGFnZSAtIDF9XCI+JHtsYXRlc3RQYWdlIC0gMX08L2E+YCk7XG4gICAgICAkc2VwYXJhdG9yLmNsYXNzTGlzdC5yZW1vdmUoJ3BhZ2luYXRpb25fX3NlcGFyYXRvci0taGlkZGVuJyk7XG4gICAgfVxuICB9O1xuXG4gIC8vIGZvcm1pbmcgcXVlcnkgdXJsIHdpdGggZmlsdGVycyB2YWx1ZXMgZnJvbSB1cmwgcGFyYW1lcnRyZXNcbiAgY29uc3QgZm9ybWF0VVJMID0gdXJsID0+IHtcbiAgICBsZXQgZm9ybWF0dGVkVVJMID0gdXJsO1xuICAgIGNvbnN0IGZpbHRlcnNOYW1lcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZpbHRlcnNfX2lucHV0LWZpZWxkJykpLm1hcChlbCA9PiBlbC5uYW1lKTtcbiAgICBcbiAgICBuZXcgVVJMKGxvY2F0aW9uLmhyZWYpLnNlYXJjaFBhcmFtcy50b1N0cmluZygpLnNwbGl0KFwiJlwiKS5tYXAoZWwgPT4ge1xuICAgICAgY29uc3QgWyBrZXkgXSA9IGVsLnNwbGl0KCc9Jyk7XG4gICAgICBpZiAoZmlsdGVyc05hbWVzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgZm9ybWF0dGVkVVJMICs9ICcmJyArIGVsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZm9ybWF0dGVkVVJMICs9IGAmbGltaXQ9JHtkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtY2F0YWxvZy1saW1pdCAuZHJvcGRvd25fX3ZhbHVlJykuaW5uZXJUZXh0fWA7XG5cbiAgICByZXR1cm4gZm9ybWF0dGVkVVJMO1xuICB9O1xuXG4gIC8vIGdlbmVyYXRlIGNhdGFsb2cgaXRlbSBlbGVtZW50XG4gIGNvbnN0IGNhdGFsb2dJdGVtRWxlbWVudCA9ICh7IHRvcCwgaW1hZ2UsIHZlcmlmaWVkLCBuYW1lLCBjb3VudHJ5LCBzdWJqZWN0cywgbG9jYXRpb24sIGRlc2NyaXB0aW9uLCBsaW5rLCByYXRpbmcsIHJldmlld3MsIHByaWNlIH0pID0+IGBcbiAgICA8ZGl2IGNsYXNzPVwidHV0b3JjYXJkJHt0b3AgPyAnIHR1dG9yY2FyZC0tdG9wJyA6ICcnfVwiPlxuICAgICAgPGRpdiBjbGFzcz1cInR1dG9yY2FyZF9faW1hZ2VcIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgnaW1nL2luaHRtbC8ke2ltYWdlfScpXCI+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwidHV0b3JjYXJkX19pbmZvXCI+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPHAgY2xhc3M9XCJ0dXRvcmNhcmRfX25hbWUke3ZlcmlmaWVkID8gJyB0dXRvcmNhcmRfX25hbWUtLXZlcmlmaWVkJyA6ICcnfVwiPiR7bmFtZX08L3A+XG4gICAgICAgICAgPHAgY2xhc3M9XCJ0dXRvcmNhcmRfX2xvY2F0aW9uXCIgZGF0YS1sb2M9JHtjb3VudHJ5fT4ke2xvY2F0aW9ufTwvcD5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidHV0b3JjYXJkX19zdWJqZWN0c1wiPlxuICAgICAgICAgICAgJHtzdWJqZWN0cy5tYXAoZWwgPT4gYFxuICAgICAgICAgICAgICA8YSBjbGFzcz1cInR1dG9yY2FyZF9fc3ViamVjdHMtaXRlbSR7ZWwuc2VhcmNoID8gJyB0dXRvcmNhcmRfX3N1YmplY3RzLWl0ZW0tLXNlYXJjaCcgOiAnJ30ke2VsLmhpZGRlbiA/ICcgdHV0b3JjYXJkX19zdWJqZWN0cy1pdGVtLS1oaWRkZW4nIDogJyd9XCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiPiR7ZWwubmFtZX0gPHNwYW4+KNC+0L/Ri9GCIDxiPiR7ZWwuZXhwZXJpZW5jZX08L2I+KTwvc3Bhbj48L2E+XG4gICAgICAgICAgICBgKS5qb2luKCcnKX1cbiAgICAgICAgICAgIDxhIGNsYXNzPVwidHV0b3JjYXJkX19zdWJqZWN0cy1tb3JlIGpzLXR1dG9yY2FyZC1tb3JlXCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiPisyINC/0YDQtdC00LzQtdGC0LA8L2E+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPHAgY2xhc3M9XCJ0dXRvcmNhcmRfX2Rlc2NcIj4ke2Rlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgPC9kaXY+PGEgY2xhc3M9XCJ0dXRvcmNhcmRfX21vcmVcIiBocmVmPSR7bGlua30+0J/QvtC00YDQvtCx0L3QtdC1PC9hPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwidHV0b3JjYXJkX19hY3Rpb25zXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0dXRvcmNhcmRfX2FjdGlvbnMtaW5mb1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0dXRvcmNhcmRfX3JhdGluZ1wiPlxuICAgICAgICAgICAgPHAgY2xhc3M9XCJ0dXRvcmNhcmRfX3JhdGluZy1yYXRlXCI+JHtyYXRpbmd9PC9wPlxuICAgICAgICAgICAgPHAgY2xhc3M9XCJ0dXRvcmNhcmRfX3JhdGluZy1yZXZpZXdzXCI+KCR7cmV2aWV3c30pPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0dXRvcmNhcmRfX2Nvc3RcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzPVwidHV0b3JjYXJkX19jb3N0LXZhbHVlXCI+JHtwcmljZX0g4oK9PC9wPlxuICAgICAgICAgICAgPHAgY2xhc3M9XCJ0dXRvcmNhcmRfX2Nvc3QtZGVzY1wiPtCyINGH0LDRgTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24ganMtb3Blbi1wb3B1cCR7dG9wID8gJyBidXR0b24tLXByaW1hcnknIDogJyBidXR0b24tLXNlY29uZGFyeSd9IHR1dG9yY2FyZF9fYnRuXCIgZGF0YS1wb3B1cD1cInJlcXVlc3QtYXV0aFwiPtCe0YHRgtCw0LLQuNGC0Ywg0LfQsNGP0LLQutGDPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYDtcblxuICAvLyBsb2FkIG1vcmUgY2F0YWxvZyBpdGVtc1xuICAkY2F0YWxvZ01vcmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgbGF0ZXN0UGFnZSA9IGNhdGFsb2dQYWdlcy5jdXJyZW50W2NhdGFsb2dQYWdlcy5jdXJyZW50Lmxlbmd0aCAtIDFdICsgMTtcbiAgICBjb25zdCBxdWVyeVVybCA9IGZvcm1hdFVSTChgZGF0YS9jYXRhbG9nLmpzb24/cGFnZT0ke2xhdGVzdFBhZ2V9YCk7XG5cbiAgICAvLyBzZXQgY3VycmVudCBwYWdlc1xuICAgIGNhdGFsb2dQYWdlcy5jdXJyZW50LnB1c2gobGF0ZXN0UGFnZSk7XG5cbiAgICAvLyBzZXQgY3VycmVudCBwYWdpbnRhaW9uIHBhZ2VzXG4gICAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGFnaW5hdGlvbl9fcGFnZScpKS5tYXAoZWwgPT4ge1xuICAgICAgaWYgKGNhdGFsb2dQYWdlcy5jdXJyZW50LmluY2x1ZGVzKHBhcnNlSW50KGVsLmlubmVyVGV4dCkpKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3BhZ2luYXRpb25fX3BhZ2UtLWN1cnJlbnQnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGZldGNoKHF1ZXJ5VXJsKS50aGVuKHJlcyA9PiByZXMuanNvbigpKS50aGVuKGRhdGEgPT4ge1xuICAgICAgZGF0YS5tYXAoaXRlbSA9PiB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19pdGVtcycpLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgY2F0YWxvZ0l0ZW1FbGVtZW50KGl0ZW0pKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAobGF0ZXN0UGFnZSA9PT0gY2F0YWxvZ1BhZ2VzLnRvdGFsKSB7XG4gICAgICAgICRjYXRhbG9nTW9yZUJ0bi5jbGFzc0xpc3QuYWRkKCdjYXRhbG9nX19ib3R0b20tYnRuLS1oaWRkZW4nKTtcbiAgICAgICAgJG5leHRBcnJvdy5jbGFzc0xpc3QuYWRkKCdwYWdpbmF0aW9uX19hcnJvdy0tZGlzYWJsZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gZ28gdG8gcHJldmlvdXMgcGFnZVxuICAkcHJldkFycm93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc3QgY3VycmVudFBhZ2UgPSBjYXRhbG9nUGFnZXMuY3VycmVudFswXSAtIDE7XG4gICAgY29uc3QgcXVlcnlVcmwgPSBmb3JtYXRVUkwoYGRhdGEvY2F0YWxvZy5qc29uP3BhZ2U9JHtjdXJyZW50UGFnZX1gKTtcblxuICAgIGNhdGFsb2dQYWdlcy5jdXJyZW50ID0gW2N1cnJlbnRQYWdlXTtcblxuICAgIGZldGNoKHF1ZXJ5VXJsKS50aGVuKHJlcyA9PiByZXMuanNvbigpKS50aGVuKGRhdGEgPT4ge1xuICAgICAgbGV0ICRlbGVtZW50cyA9ICcnO1xuICBcbiAgICAgIGRhdGEubWFwKGl0ZW0gPT4ge1xuICAgICAgICAkZWxlbWVudHMgKz0gY2F0YWxvZ0l0ZW1FbGVtZW50KGl0ZW0pO1xuICAgICAgfSk7XG5cbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYWdpbmF0aW9uX19hcnJvdy0tbmV4dCcpLmNsYXNzTGlzdC5yZW1vdmUoJ3BhZ2luYXRpb25fX2Fycm93LS1kaXNhYmxlZCcpO1xuICAgICAgc2V0Q3VycmVudFBhZ2UoY3VycmVudFBhZ2UpO1xuXG4gICAgICBpZiAoY3VycmVudFBhZ2UgPT09IDEpIHtcbiAgICAgICAgJHByZXZBcnJvdy5jbGFzc0xpc3QuYWRkKCdwYWdpbmF0aW9uX19hcnJvdy0tZGlzYWJsZWQnKTtcbiAgICAgIH1cblxuICAgICAgJGNhdGFsb2dNb3JlQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2NhdGFsb2dfX2JvdHRvbS1idG4tLWhpZGRlbicpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGFsb2dfX2l0ZW1zJykuaW5uZXJIVE1MID0gJGVsZW1lbnRzO1xuICAgIH0pO1xuXG4gICAgc2V0QnJlYWsoY3VycmVudFBhZ2UpO1xuICB9KTtcblxuICAvLyBnbyB0byBuZXh0IHBhZ2VcbiAgJG5leHRBcnJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGNvbnN0IGN1cnJlbnRQYWdlID0gY2F0YWxvZ1BhZ2VzLmN1cnJlbnRbY2F0YWxvZ1BhZ2VzLmN1cnJlbnQubGVuZ3RoIC0gMV0gKyAxO1xuICAgIGNvbnN0IHF1ZXJ5VXJsID0gZm9ybWF0VVJMKGBkYXRhL2NhdGFsb2cuanNvbj9wYWdlPSR7Y3VycmVudFBhZ2V9YCk7XG5cbiAgICBjYXRhbG9nUGFnZXMuY3VycmVudCA9IFtjdXJyZW50UGFnZV07XG5cbiAgICBmZXRjaChxdWVyeVVybCkudGhlbihyZXMgPT4gcmVzLmpzb24oKSkudGhlbihkYXRhID0+IHtcbiAgICAgIGxldCAkZWxlbWVudHMgPSAnJztcbiAgXG4gICAgICBkYXRhLm1hcChpdGVtID0+IHtcbiAgICAgICAgJGVsZW1lbnRzICs9IGNhdGFsb2dJdGVtRWxlbWVudChpdGVtKTtcbiAgICAgIH0pO1xuXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnaW5hdGlvbl9fYXJyb3ctLXByZXYnKS5jbGFzc0xpc3QucmVtb3ZlKCdwYWdpbmF0aW9uX19hcnJvdy0tZGlzYWJsZWQnKTtcbiAgICAgIHNldEN1cnJlbnRQYWdlKGN1cnJlbnRQYWdlKTtcblxuICAgICAgaWYgKGN1cnJlbnRQYWdlID09PSBjYXRhbG9nUGFnZXMudG90YWwpIHtcbiAgICAgICAgJGNhdGFsb2dNb3JlQnRuLmNsYXNzTGlzdC5hZGQoJ2NhdGFsb2dfX2JvdHRvbS1idG4tLWhpZGRlbicpO1xuICAgICAgICAkbmV4dEFycm93LmNsYXNzTGlzdC5hZGQoJ3BhZ2luYXRpb25fX2Fycm93LS1kaXNhYmxlZCcpO1xuICAgICAgfVxuXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19faXRlbXMnKS5pbm5lckhUTUwgPSAkZWxlbWVudHM7XG4gIFxuICAgICAgc2V0QnJlYWsoY3VycmVudFBhZ2UpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBnbyB0byBzcGVjaWZpYyBwYWdlXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgY29uc3QgJHRoaXMgPSBlLnRhcmdldDtcbiAgXG4gICAgaWYgKCR0aGlzLmNsYXNzTGlzdC5jb250YWlucygncGFnaW5hdGlvbl9fcGFnZScpKSB7XG4gICAgICBjb25zdCBjdXJyZW50UGFnZSA9IHBhcnNlSW50KCR0aGlzLmRhdGFzZXQucGFnZSk7XG4gICAgICBjb25zdCBxdWVyeVVybCA9IGZvcm1hdFVSTChgZGF0YS9jYXRhbG9nLmpzb24/cGFnZT0ke2N1cnJlbnRQYWdlfWApO1xuXG4gICAgICBjYXRhbG9nUGFnZXMuY3VycmVudCA9IFtjdXJyZW50UGFnZV07XG5cbiAgICAgIGZldGNoKHF1ZXJ5VXJsKS50aGVuKHJlcyA9PiByZXMuanNvbigpKS50aGVuKGRhdGEgPT4ge1xuICAgICAgICBsZXQgJGVsZW1lbnRzID0gJyc7XG4gICAgXG4gICAgICAgIGRhdGEubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgICRlbGVtZW50cyArPSBjYXRhbG9nSXRlbUVsZW1lbnQoaXRlbSk7XG4gICAgICAgIH0pO1xuICBcbiAgICAgICAgc2V0Q3VycmVudFBhZ2UoY3VycmVudFBhZ2UpO1xuICBcbiAgICAgICAgaWYgKGN1cnJlbnRQYWdlID09PSBjYXRhbG9nUGFnZXMudG90YWwpIHtcbiAgICAgICAgICAkY2F0YWxvZ01vcmVCdG4uY2xhc3NMaXN0LmFkZCgnY2F0YWxvZ19fYm90dG9tLWJ0bi0taGlkZGVuJyk7XG4gICAgICAgICAgJG5leHRBcnJvdy5jbGFzc0xpc3QuYWRkKCdwYWdpbmF0aW9uX19hcnJvdy0tZGlzYWJsZWQnKTtcbiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50UGFnZSA9PT0gMSkge1xuICAgICAgICAgICRwcmV2QXJyb3cuY2xhc3NMaXN0LmFkZCgncGFnaW5hdGlvbl9fYXJyb3ctLWRpc2FibGVkJyk7XG4gICAgICAgICAgJGNhdGFsb2dNb3JlQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2NhdGFsb2dfX2JvdHRvbS1idG4tLWhpZGRlbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRuZXh0QXJyb3cuY2xhc3NMaXN0LnJlbW92ZSgncGFnaW5hdGlvbl9fYXJyb3ctLWRpc2FibGVkJyk7XG4gICAgICAgICAgJHByZXZBcnJvdy5jbGFzc0xpc3QucmVtb3ZlKCdwYWdpbmF0aW9uX19hcnJvdy0tZGlzYWJsZWQnKTtcbiAgICAgICAgICAkY2F0YWxvZ01vcmVCdG4uY2xhc3NMaXN0LnJlbW92ZSgnY2F0YWxvZ19fYm90dG9tLWJ0bi0taGlkZGVuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBzZXRCcmVhayhjdXJyZW50UGFnZSk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19pdGVtcycpLmlubmVySFRNTCA9ICRlbGVtZW50cztcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59XG4gIC8vIHNjcm9sbCB0byB0dXRvciBzZWN0aW9uXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50dXRvcl9fbmF2LWxpbmsnKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCB0YXJnZXQgPSBlbC5kYXRhc2V0LnRhcmdldDtcblxuICBzY3JvbGxUbyh7XG4gICAgdG9wOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1ibG9jaz1cIiR7dGFyZ2V0fVwiXWApLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHdpbmRvdy5wYWdlWU9mZnNldCAtIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKS5vZmZzZXRIZWlnaHQsXG4gICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gIH0pO1xufSkpO1xuXG4vLyBzZXQgcGF5bWVudCBwZXIgaG91clxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvZmlsZS1oZWFkX19zdWJqZWN0cy1pdGVtJykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgY29uc3QgcGF5bWVudCA9IGVsLmRhdGFzZXQucGF5O1xuXG4gIGVsLmNsb3Nlc3QoJy5wcm9maWxlLWhlYWRfX3N1YmplY3RzJykucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtaGVhZF9fc3ViamVjdHMtaXRlbS0taGlnaGxpZ2h0JykuY2xhc3NMaXN0LnJlbW92ZSgncHJvZmlsZS1oZWFkX19zdWJqZWN0cy1pdGVtLS1oaWdobGlnaHQnKTtcbiAgZWwuY2xhc3NMaXN0LmFkZCgncHJvZmlsZS1oZWFkX19zdWJqZWN0cy1pdGVtLS1oaWdobGlnaHQnKTtcblxuICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50dXRvcl9fY29zdC12YWx1ZSBzcGFuJykpLm1hcChlbCA9PiBlbC5pbm5lclRleHQgPSBwYXltZW50KTtcbn0pKTtcbiAgY29uc3QgJHByb2ZpbGVWaWRlb0NvdmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtYWJvdXRfX3ZpZGVvLWNvdmVyJyk7XG5cbi8vIHBsYXkgdmlkZSBvbiBhYm91dCBzZWN0aW9uXG5pZiAoJHByb2ZpbGVWaWRlb0NvdmVyKSB7XG4gICRwcm9maWxlVmlkZW9Db3Zlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zdCAkdmlkZW8gPSAkcHJvZmlsZVZpZGVvQ292ZXIucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdpZnJhbWUnKTtcblxuICAgICRwcm9maWxlVmlkZW9Db3Zlci5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ2lmcmFtZScpLnNldEF0dHJpYnV0ZSgnc3JjJywgJHZpZGVvLmdldEF0dHJpYnV0ZSgnc3JjJykgKyAnP2F1dG9wbGF5PTEnKTtcbiAgICAkcHJvZmlsZVZpZGVvQ292ZXIuY2xhc3NMaXN0LmFkZCgncHJvZmlsZS1hYm91dF9fdmlkZW8tY292ZXItLWhpZGRlbicpO1xuICB9KTtcbn1cbiAgY29uc3QgJHJldmlld3NNb3JlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXJldmlld3MtbW9yZScpO1xuXG5pZiAoJHJldmlld3NNb3JlQnRuKSB7XG4gIC8vIHJldmlld3MgcGFnZXMgc3RhdGVcbiAgY29uc3QgcmV2aWV3c1BhZ2VzID0ge1xuICAgIGN1cnJlbnQ6IDEsXG4gICAgdG90YWw6IDNcbiAgfTtcbiAgLy8gZ2VuZXJhdGUgcmV2aWV3IGVsZW1lbnRcbiAgY29uc3QgcmV2aWV3RWxlbWVudCA9ICh7IGltYWdlLCBuYW1lLCBkYXRlLCByYXRpbmcsIGZlZWRiYWNrIH0pID0+IGBcbiAgICA8ZGl2IGNsYXNzPVwicHJvZmlsZS1yZXZpZXdzX19mZWVkYmFja1wiPlxuICAgICAgJHtpbWFnZSA/XG4gICAgICAgIGA8ZGl2IGNsYXNzPVwicHJvZmlsZS1yZXZpZXdzX19mZWVkYmFjay1pbWFnZVwiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdpbWcvaW5odG1sLyR7aW1hZ2V9JylcIj48L2Rpdj5gIDpcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJwcm9maWxlLXJldmlld3NfX2ZlZWRiYWNrLWltYWdlXCI+PC9kaXY+J1xuICAgICAgfVxuICAgICAgPGRpdiBjbGFzcz1cInByb2ZpbGUtcmV2aWV3c19fZmVlZGJhY2staW5mb1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZmlsZS1yZXZpZXdzX19mZWVkYmFjay1oZWFkXCI+XG4gICAgICAgICAgPHAgY2xhc3M9XCJwcm9maWxlLXJldmlld3NfX2ZlZWRiYWNrLW5hbWVcIj4ke25hbWV9PC9wPlxuICAgICAgICAgIDxwIGNsYXNzPVwicHJvZmlsZS1yZXZpZXdzX19mZWVkYmFjay1kYXRlXCI+JHtkYXRlfTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJwcm9maWxlLXJldmlld3NfX3JhdGluZy1zdGFyc1wiPlxuICAgICAgICAgICR7WzEsIDIsIDMsIDQsIDVdLm1hcChlID0+IGUgPD0gcmF0aW5nID9cbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwicHJvZmlsZS1yZXZpZXdzX19yYXRpbmctc3RhciBwcm9maWxlLXJldmlld3NfX3JhdGluZy1zdGFyLS1mdWxsXCI+PC9kaXY+JyA6XG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cInByb2ZpbGUtcmV2aWV3c19fcmF0aW5nLXN0YXJcIj48L2Rpdj4nXG4gICAgICAgICAgKS5qb2luKCcnKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxwIGNsYXNzPVwicHJvZmlsZS1yZXZpZXdzX19mZWVkYmFjay10ZXh0XCI+JHtmZWVkYmFja308L3A+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYDtcblxuICAvLyBsb2FkIG1vcmUgcmV2aWV3IG9uIGJ1dHRvbiBjbGlja1xuICAkcmV2aWV3c01vcmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAvLyBpbmNyZW1lbnQgY3VycmVudCBsb2FkZWQgcmV2aWV3cyBwYWdlXG4gICAgKytyZXZpZXdzUGFnZXMuY3VycmVudDtcbiAgICBcbiAgICAvLyBsb2FkIHJldmlldyBvciByZW1vdmVcbiAgICBmZXRjaChgZGF0YS90dXRvclJldmlld3MuanNvbj9wYWdlPSR7cmV2aWV3c1BhZ2VzLmN1cnJlbnR9YCkudGhlbihyZXMgPT4gcmVzLmpzb24oKSkudGhlbihkYXRhID0+IHtcbiAgICAgIGRhdGEubWFwKHJldmlldyA9PiB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlLXJldmlld3NfX2ZlZWRiYWNrcycpLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgcmV2aWV3RWxlbWVudChyZXZpZXcpKTtcblxuICAgICAgICBpZiAocmV2aWV3c1BhZ2VzLmN1cnJlbnQgPT09IHJldmlld3NQYWdlcy50b3RhbCkge1xuICAgICAgICAgICRyZXZpZXdzTW9yZUJ0bi5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufVxuICAvLyBpbml0IGZha2VTY3JvbGwgb24gdGltZXpvbmUgZHJvcGRvd25cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1zY2hlZHVsZScpKSB7XG4gIGNvbnN0ICR0aW1lem9uZURyb3Bkb3duID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX3RpbWV6b25lLW1lbnUnKTtcblxuICBpZiAoISR0aW1lem9uZURyb3Bkb3duLmNsYXNzTGlzdC5jb250YWlucygnZmFrZVNjcm9sbCcpKSB7XG4gICAgJHRpbWV6b25lRHJvcGRvd24uZmFrZVNjcm9sbCgpO1xuICB9XG59XG5cbmNvbnN0IHNldERhdGVUaW1lID0gKCkgPT4ge1xuICBjb25zdCAkY3VycmVudFVuaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1zY2hlZHVsZV9fdW5pdC0tY3VycmVudCcpO1xuICBjb25zdCAkcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtcG9wdXBbZGF0YS1wb3B1cD1cInJlcXVlc3Qtc3BlY2lmaWNcIl0nKTtcblxuICBpZiAoJGN1cnJlbnRVbml0KSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBkYXRlID0gJGN1cnJlbnRVbml0LmRhdGFzZXQuZGF0ZTtcbiAgICAgIGNvbnN0IHRpbWUgPSAkY3VycmVudFVuaXQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX3RpbWUtdmFsdWUnKS5pbm5lclRleHQ7XG4gIFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX3BpY2snKS5jbGFzc0xpc3QuYWRkKCdwcm9maWxlLXNjaGVkdWxlX19waWNrLS1hY3RpdmUnKTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlLXNjaGVkdWxlX19waWNrLWRhdGUnKS5pbm5lclRleHQgPSBkYXRlO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX3BpY2stdGltZScpLmlubmVyVGV4dCA9IHRpbWU7XG5cbiAgICAgIGlmICgkcG9wdXApIHtcbiAgICAgICAgJHBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faGVhZGluZy1kYXRlJykuaW5uZXJUZXh0ID0gZGF0ZTtcbiAgICAgICAgJHBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faGVhZGluZy10aW1lJykuaW5uZXJUZXh0ID0gdGltZTtcbiAgICAgICAgJHBvcHVwLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJ0aW1lXCJdJykudmFsdWUgPSB0aW1lO1xuICAgICAgfVxuICAgIH0sIDApO1xuICB9XG59XG5cbi8vIGhhbmRsZSBzY2hlZHVsZSBzbGlkZXJcbmNvbnN0ICRwcmV2QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX2NvbnRyb2xzLWJ1dHRvbi0tcHJldicpO1xuY29uc3QgJG5leHRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1zY2hlZHVsZV9fY29udHJvbHMtYnV0dG9uLS1uZXh0Jyk7XG5cbmlmICgkcHJldkJ1dHRvbikge1xuICAkcHJldkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zdCAkYWN0aXZlU2xpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1zY2hlZHVsZV9fc2xpZGUtLWFjdGl2ZScpO1xuICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9ICskYWN0aXZlU2xpZGUuZGF0YXNldC5zbGlkZTtcbiAgICBjb25zdCAkcHJldlNsaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnByb2ZpbGUtc2NoZWR1bGVfX3NsaWRlW2RhdGEtc2xpZGU9XCIke2N1cnJlbnRJbmRleCAtIDF9XCJdYCk7XG4gIFxuICAgIGlmICgkcHJldlNsaWRlKSB7XG4gICAgICAkYWN0aXZlU2xpZGUuY2xhc3NMaXN0LnJlbW92ZSgncHJvZmlsZS1zY2hlZHVsZV9fc2xpZGUtLWFjdGl2ZScpO1xuICAgICAgJHByZXZTbGlkZS5jbGFzc0xpc3QuYWRkKCdwcm9maWxlLXNjaGVkdWxlX19zbGlkZS0tYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1zY2hlZHVsZV9fY29udHJvbHMtYnV0dG9uLS1uZXh0JykuY2xhc3NMaXN0LnJlbW92ZSgncHJvZmlsZS1zY2hlZHVsZV9fY29udHJvbHMtYnV0dG9uLS1kaXNhYmxlZCcpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX2NvbnRyb2xzLWRhdGVzJykuaW5uZXJUZXh0ID0gJHByZXZTbGlkZS5kYXRhc2V0LmRhdGVzO1xuICBcbiAgICAgIGlmICgkcHJldlNsaWRlLmRhdGFzZXQuZmlyc3QpIHtcbiAgICAgICAgJHByZXZCdXR0b24uY2xhc3NMaXN0LmFkZCgncHJvZmlsZS1zY2hlZHVsZV9fY29udHJvbHMtYnV0dG9uLS1kaXNhYmxlZCcpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5cbmlmICgkbmV4dEJ1dHRvbikge1xuICAkbmV4dEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zdCAkYWN0aXZlU2xpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1zY2hlZHVsZV9fc2xpZGUtLWFjdGl2ZScpO1xuICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9ICskYWN0aXZlU2xpZGUuZGF0YXNldC5zbGlkZTtcbiAgICBjb25zdCAkbmV4dFNsaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnByb2ZpbGUtc2NoZWR1bGVfX3NsaWRlW2RhdGEtc2xpZGU9XCIke2N1cnJlbnRJbmRleCArIDF9XCJdYCk7XG4gIFxuICAgIGlmICgkbmV4dFNsaWRlKSB7XG4gICAgICAkYWN0aXZlU2xpZGUuY2xhc3NMaXN0LnJlbW92ZSgncHJvZmlsZS1zY2hlZHVsZV9fc2xpZGUtLWFjdGl2ZScpO1xuICAgICAgJG5leHRTbGlkZS5jbGFzc0xpc3QuYWRkKCdwcm9maWxlLXNjaGVkdWxlX19zbGlkZS0tYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1zY2hlZHVsZV9fY29udHJvbHMtYnV0dG9uLS1wcmV2JykuY2xhc3NMaXN0LnJlbW92ZSgncHJvZmlsZS1zY2hlZHVsZV9fY29udHJvbHMtYnV0dG9uLS1kaXNhYmxlZCcpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX2NvbnRyb2xzLWRhdGVzJykuaW5uZXJUZXh0ID0gJG5leHRTbGlkZS5kYXRhc2V0LmRhdGVzO1xuICBcbiAgICAgIGlmICgkbmV4dFNsaWRlLmRhdGFzZXQubGFzdCkge1xuICAgICAgICAkbmV4dEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdwcm9maWxlLXNjaGVkdWxlX19jb250cm9scy1idXR0b24tLWRpc2FibGVkJyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuLy8gaGFuZGxlIHNlbGVjdCBkYXRldGltZSB1bml0XG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9maWxlLXNjaGVkdWxlX191bml0JykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJy5wcm9maWxlLXNjaGVkdWxlX190aW1lJykpIHtcbiAgICBjb25zdCAkY3VycmVudFVuaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1zY2hlZHVsZV9fdW5pdC0tY3VycmVudCcpO1xuICBcbiAgICBpZiAoJGN1cnJlbnRVbml0KSB7XG4gICAgICAkY3VycmVudFVuaXQuY2xhc3NMaXN0LnJlbW92ZSgncHJvZmlsZS1zY2hlZHVsZV9fdW5pdC0tY3VycmVudCcpO1xuICAgIH1cbiAgXG4gICAgZWwuY2xhc3NMaXN0LmFkZCgncHJvZmlsZS1zY2hlZHVsZV9fdW5pdC0tY3VycmVudCcpO1xuICAgIHNldERhdGVUaW1lKCk7XG4gIH1cbn0pKTtcblxuLy8gZXhlY3V0ZSBzZXQgZGF0ZXRpbWUgb24gdGltZSBjaGFuZ2VcbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2ZpbGUtc2NoZWR1bGVfX3RpbWUtbWVudSAuZHJvcGRvd25fX21lbnUtaXRlbScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZXREYXRlVGltZSkpO1xuXG59Il19
