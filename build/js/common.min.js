"use strict";window.onload=function(){var e={popup:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.onHide,o=t.onShow,n=function(){document.body.style.cssText="position: fixed; margin-top: ".concat(-window.scrollY,"px")},c=function(e){document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,e)};return{isShown:function(){return e.classList.contains("popup--opened")},show:function(){var t=new Promise((function(t){e.style.display="block",t()}));n(),t.then((function(){e.classList.add("popup--opened"),"function"==typeof o&&o()}))},hide:function(){var t=-parseInt(document.body.style.marginTop);e.classList.remove("popup--opened"),setTimeout((function(){e.style.display="none",c(t),"function"==typeof r&&r()}),300)}}},validate:function(e,t){var r=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,o=function(e){e.closest(".input")?e.closest(".input").classList.add("input--error"):e.closest(".textarea")&&e.closest(".textarea").classList.add("textarea--error"),e.focus()};e.querySelector('button[type="submit"]').addEventListener("click",(function(n){n.preventDefault();var c=!0,a=Array.from(e.querySelectorAll("input[required], textarea[required]")),s=e.querySelectorAll(".checkboxselect");a.reverse().map((function(e){switch(e.dataset.passRepeat&&e.value!==e.closest("form").querySelector("input[data-pass]").value&&o(e),e.getAttribute("type")){case"text":case"password":""===e.value&&(o(e),c=!1);break;case"tel":(""===e.value||e.value.includes("_"))&&(o(e),c=!1);break;case"checkbox":e.checked||(e.closest(".checkbox").classList.add("checkbox--error"),c=!1);break;case"email":r.test(e.value)||(o(e),c=!1);break;default:""===e.value&&(o(e),c=!1)}})),s.length&&Array.from(s).map((function(e){var t=!1;Array.from(e.querySelectorAll(".checkbox__input")).map((function(e){e.checked&&(t=!0)})),t||(e.classList.add("checkboxselect--error"),c=!1)})),c&&t()})),Array.from(e.querySelectorAll("input")).concat(Array.from(e.querySelectorAll("textarea"))).map((function(e){return e.addEventListener("input",(function(){e.closest(".input")?e.closest(".input").classList.remove("input--error"):e.closest(".checkbox")?e.closest(".checkbox").classList.remove("checkbox--error"):e.closest(".textarea")&&e.closest(".textarea").classList.remove("textarea--error")}))}))}};Array.from(document.querySelectorAll(".js-open-popup")).map((function(t){return t.addEventListener("click",(function(t){t.preventDefault();var r=t.currentTarget.dataset.popup,o=document.querySelector('.js-popup[data-popup="'.concat(r,'"]'));e.popup(o).show()}))})),Array.from(document.querySelectorAll(".js-close-popup")).map((function(t){return t.addEventListener("click",(function(t){if(t.preventDefault(),!t.target.closest(".popup__window")||!t.currentTarget.classList.contains("js-popup")){var r=t.currentTarget.closest(".popup");e.popup(r).hide()}}))})),document.querySelector("form[data-restore-form]")&&e.validate(document.querySelector("form[data-restore-form]"),(function(){})),document.querySelector("form[data-request-auth-form]")&&e.validate(document.querySelector("form[data-request-auth-form]"),(function(){})),document.querySelector("form[data-request-form]")&&e.validate(document.querySelector("form[data-request-form]"),(function(){var t=document.querySelector('.js-popup[data-popup="request"]'),r=document.querySelector('.js-popup[data-popup="request-success"]');e.popup(t,{onHide:function(){Array.from(t.querySelectorAll("input")).map((function(e){return e.value=""})),e.popup(r).show()}}).hide()}));var t=Array.from(document.querySelectorAll(".dropdown"));document.addEventListener("click",(function(e){e.target.closest(".dropdown")||t.map((function(e){return e.classList.remove("dropdown--active")}))})),t.map((function(e){return e.addEventListener("click",(function(e){e.preventDefault();var r=e.currentTarget;r.classList.contains("dropdown--active")||(t.map((function(e){return e!==r&&e.classList.remove("dropdown--active")})),r.classList.toggle("dropdown--active"))}))})),document.addEventListener("click",(function(e){if(e.target.getAttribute("data-toggle")){var t=e.target,r=t.innerText,o=t.cloneNode(),n=t.closest(".dropdown").querySelector(".dropdown__value");o.innerText=n.innerText,n.innerText=r,t.parentNode.prepend(o),t.parentNode.removeChild(t)}e.target.closest(".dropdown__menu-item")&&document.querySelector(".dropdown--active").classList.remove("dropdown--active")})),Array.from(document.querySelectorAll(".tabs__item")).map((function(e){return e.addEventListener("click",(function(e){e.preventDefault();var t=e.currentTarget,r=t.dataset.tab;t.closest(".tabs").querySelector(".tabs__item--active").classList.remove("tabs__item--active"),t.classList.add("tabs__item--active"),t.closest("[data-tabs]").querySelector("[data-active]").removeAttribute("data-active"),t.closest("[data-tabs]").querySelector('[data-content="'.concat(r,'"]')).setAttribute("data-active",!0)}))}));var r=new Event("changeCountry");Array.from(document.querySelectorAll(".input.dropdown")).concat(Array.from(document.querySelectorAll(".input .dropdown"))).map((function(e){return e.addEventListener("click",(function(){var t=e.querySelector(".dropdown__menu");e.closest(".input").querySelector(".input__dropdown").style.width=e.closest(".input").getBoundingClientRect().width+"px",t.classList.contains("fakeScroll")||t.fakeScroll()}))})),Array.from(document.querySelectorAll(".input__dropdown-item[data-code-loc]")).map((function(e){return e.addEventListener("click",(function(){var t=e.dataset.codeLoc,r=e.dataset.mask,o=e.closest(".input").querySelector("input");e.closest(".input__code").dataset.codeLoc=t,e.closest(".input__code").dataset.mask=r,o.placeholder=r.replaceAll("9","_"),function(e,t){Inputmask({mask:t}).mask(e)}(o,r)}))})),Array.from(document.querySelectorAll(".input__dropdown-item[data-dropdown]")).map((function(e){return e.addEventListener("click",(function(){var t=e.innerText;e.closest(".input").querySelector("input").value=t,e.closest(".input").classList.remove("input--error"),e.closest(".input").classList.contains("js-auth-country")&&e.closest(".input").dispatchEvent(r)}))})),Array.from(document.querySelectorAll('input[type="tel"]')).map((function(e){Inputmask({mask:e.closest(".input").querySelector(".input__code").dataset.mask}).mask(e)})),Array.from(document.querySelectorAll(".checkboxselect__list")).map((function(e){e.addEventListener("click",(function(t){t.stopPropagation();var r=e.closest(".checkboxselect"),o=!1;r.classList.remove("checkboxselect--error"),Array.from(e.querySelectorAll(".checkbox__input")).map((function(t){var n=r.querySelector(".checkboxselect__input-placeholder");t.checked&&(o=!0),t.addEventListener("click",(function(){var t="";Array.from(e.querySelectorAll("input:checked")).map((function(e){t+=e.closest(".checkboxselect__item").querySelector(".checkbox__text").innerText+", "})),t?(n.innerText=t.substring(0,t.length-2),n.classList.add("checkboxselect__input-placeholder--active")):(n.innerText=n.dataset.placeholder,n.classList.remove("checkboxselect__input-placeholder--active"))}))})),o?r.classList.add("checkboxselect--checked"):r.classList.remove("checkboxselect--checked")})),e.fakeScroll()})),Array.from(document.querySelectorAll(".filters__dropdown-item")).map((function(e){return e.addEventListener("click",(function(e){var t=e.currentTarget,r=t.innerText;t.closest(".filters__input").querySelector(".filters__input-field").value=r}))})),Array.from(document.querySelectorAll(".filters__input-field")).map((function(e){var t=e,r=function(e){var r=t.nextElementSibling,o=r.querySelector(".fakeScroll__content")||r,n=JSON.parse(t.dataset.options),c=t.value.toLowerCase(),a=!1;o.innerHTML="",n.map((function(t){(e||0===t.toLowerCase().indexOf(c))&&(a=!0,o.insertAdjacentHTML("beforeend",'<a class="filters__dropdown-item dropdown__menu-item" href="javascript:void(0)">'.concat(t,"</a>")))})),a?r.classList.remove("filters__dropdown--hidden"):r.classList.add("filters__dropdown--hidden"),Array.from(o.querySelectorAll(".filters__dropdown-item")).map((function(e){return e.addEventListener("click",(function(){t.value=e.innerText,t.setAttribute("data-value",e.innerText)}))})),e&&!r.classList.contains("fakeScroll")&&o.fakeScroll()};"cost"!==t.name&&(t.addEventListener("input",(function(){return r(!1)})),t.addEventListener("focus",(function(){return r(!0)})),t.addEventListener("blur",(function(){""!==t.value&&t.dataset.value?t.value=t.dataset.value:t.value=""})))})),Array.from(document.querySelectorAll(".filters__cost-range")).map((function(e){var t=+e.dataset.min,r=+e.dataset.max;noUiSlider.create(e,{start:[t,r],connect:!0,range:{min:t,max:r},step:100}),e.noUiSlider.on("slide",(function(t){var r=parseInt(t[0]),o=parseInt(t[1]);e.closest(".filters__input").querySelector(".filters__input-field").value="".concat(r," ₽ – ").concat(o," ₽"),e.closest(".filters__cost").querySelector('[data-cost="from"]').innerText=r,e.closest(".filters__cost").querySelector('[data-cost="to"]').innerText=o}))})),Array.from(document.querySelectorAll(".js-tutorcard-more")).map((function(e){return e.addEventListener("click",(function(){e.style.display="none",Array.from(e.closest(".tutorcard__subjects").querySelectorAll(".tutorcard__subjects-item--hidden")).map((function(e){e.classList.remove("tutorcard__subjects-item--hidden")}))}))}));var o=document.querySelector(".cookies");JSON.parse(localStorage.getItem("letmetutor:cookiesIsHidden"))?o.remove():(o.classList.add("cookies--shown"),document.querySelector(".cookies__btn").addEventListener("click",(function(){o.classList.remove("cookies--shown"),setTimeout((function(){o.remove(),localStorage.setItem("letmetutor:cookiesIsHidden",!0)}),500)})));var n=document.querySelector(".header__banner"),c=function(){!function(e){document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,e)}(),document.querySelector(".header-menu").classList.remove("header-menu--shown")};JSON.parse(localStorage.getItem("letmetutor:bannerIsHidden"))?n.remove():(n.style.display="flex",document.querySelector(".header__banner-close").addEventListener("click",(function(){n.classList.add("header__banner--hide"),setTimeout((function(){n.remove(),localStorage.setItem("letmetutor:bannerIsHidden",!0)}),500)}))),document.querySelector(".header__burger").addEventListener("click",(function(){-parseInt(document.body.style.marginTop),document.body.style.cssText="position: fixed; margin-top: ".concat(-window.scrollY,"px"),document.querySelector(".header-menu").classList.add("header-menu--shown")})),document.querySelector(".header-menu__backdrop").addEventListener("click",c),document.querySelector(".header-menu__close").addEventListener("click",c),Array.from(document.querySelectorAll(".header__notifications-wrapper")).map((function(e){e.classList.contains("fakeScroll")||e.fakeScroll()}));new Swiper(".popular__grid--mobile",{loop:!0,loopAdditionalSlides:3,spaceBetween:20,slidesPerView:"auto",centeredSlides:!0,breakpoints:{760:{slidesPerView:2,centeredSlides:!1}}}),new Swiper(".reviews__slider",{loop:!0,spaceBetween:20,slidesPerView:3,slidesPerGroup:3,loopAdditionalSlides:3,pagination:{el:".swiper-pagination",clickable:!0}}),new Swiper(".reviews__slider--mobile",{loop:!0,spaceBetween:20,loopAdditionalSlides:3,pagination:{el:".swiper-pagination",clickable:!0}});if(document.querySelector("form[data-login-form]")&&e.validate(document.querySelector("form[data-login-form]"),(function(){console.log(!0)})),document.querySelector("form[data-signup-student-form]")&&e.validate(document.querySelector("form[data-signup-student-form]"),(function(){})),document.querySelector("form[data-signup-tutor-form]")&&e.validate(document.querySelector("form[data-signup-tutor-form]"),(function(){})),document.querySelector("form[data-support-form]")&&e.validate(document.querySelector("form[data-support-form]"),(function(){})),document.querySelectorAll(".js-auth-country").length&&Array.from(document.querySelectorAll(".js-auth-country")).map((function(e){return e.addEventListener("changeCountry",(function(t){e.closest("form").querySelector(".js-auth-city").dataset.country=t.target.querySelector("input").value}))})),document.querySelectorAll(".js-auth-city input").length){var a=[{key:"Россия",cities:["Москва","Санкт-Петербург","Казань","Нижний Новгород","Сочи","Екатеринбург","Ростов-на-Дону","Новосибирск","Тюмень","Калининград","Уфа","Красноярск","Краснодар","Челябинск","Воронеж"]},{key:"Украина",cities:["Киев","Днепр","Донецк","Запорожье","Львов","Кривой Рог","Севастополь","Николаев","Мариуполь"]}];Array.from(document.querySelectorAll(".js-auth-city input")).map((function(e){return e.addEventListener("input",(function(e){var t=e.currentTarget,r=t.closest(".input"),o=r.dataset.country;if(o){var n=a.filter((function(e){return e.key===o}))[0].cities,c=t.value.toLowerCase(),s=t.closest(".input").querySelector(".dropdown__menu"),i=!1;s.innerHTML="",""!==e.currentTarget.value&&(n.map((function(e){0===e.toLowerCase().indexOf(c)&&(i=!0,s.insertAdjacentHTML("beforeend",'<a class="input__dropdown-item" href="javascript:void(0)">'.concat(e,"</a>")))})),i&&Array.from(r.querySelectorAll(".input__dropdown-item")).map((function(e){return e.addEventListener("click",(function(){t.value=e.innerText}))})))}}))})),document.querySelector(".js-auth-city input").addEventListener("focus",(function(e){e.currentTarget.closest(".input").querySelector(".dropdown__menu").innerHTML=""}))}document.querySelectorAll('input[name="rulesAgreement"]').length&&Array.from(document.querySelectorAll('input[name="rulesAgreement"]')).map((function(e){return e.addEventListener("change",(function(){var t=e.closest("form").querySelector('button[type="submit"]');e.checked?(t.classList.remove("button--disabled"),t.removeAttribute("disabled")):(t.classList.add("button--disabled"),t.setAttribute("disabled","disabled"))}))}))};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJvbmxvYWQiLCIkYXBpIiwiJHBvcHVwIiwiX3JlZiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm9uSGlkZSIsIm9uU2hvdyIsImRvY3VtZW50Iiwic3R5bGUiLCJjb25jYXQiLCJzY3JvbGxZIiwiYm9keSIsImNzc1RleHQiLCJzY3JvbGxUbyIsIm9mZnNldCIsImlzU2hvd24iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNob3ciLCJQcm9taXNlIiwicmVzb2x2ZSIsImRpc3BsYXkiLCJoaWRlT3ZlcmZsb3ciLCJhZGQiLCJwcm9taXNlIiwiaGlkZSIsInBhcnNlSW50IiwibWFyZ2luVG9wIiwicmVtb3ZlIiwiZm9ybSIsInJlcXVlc3QiLCJlbWFpbFJlZ2V4cCIsInNldEludmFsaWRJbnB1dCIsImlucHV0IiwiY2xvc2VzdCIsInZhbGlkYXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInNldEludmFsaWRDaGVja2JveCIsIkFycmF5IiwiZnJvbSIsIiRjaGVja2JveFNlbGVjdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJxdWVyeVNlbGVjdG9yIiwibWFwIiwiZWwiLCIkZm9ybUlucHV0cyIsInZhbHVlIiwiZm9ybUlzVmFsaWQiLCJnZXRBdHRyaWJ1dGUiLCJpbmNsdWRlcyIsImNoZWNrZWQiLCJ0ZXN0IiwiY2hlY2tib3giLCJjdXJyZW50VGFyZ2V0IiwidGFyZ2V0IiwicG9wdXAiLCIkc3VjY2Vzc1BvcHVwIiwiJGRyb3Bkb3ducyIsIiR0aGlzIiwidG9nZ2xlIiwiaW5uZXJUZXh0IiwiJGRyb3Bkb3duVmFsdWUiLCJuZXdWYWx1ZSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsIiRjbG9uZUVsZW1lbnQiLCJ0YWIiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJjaGFuZ2VDb3VudHJ5RXZlbnQiLCJFdmVudCIsIiRkcm9wZG93biIsIndpZHRoIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidXBkYXRlTWFzayIsImxvYyIsImRhdGFzZXQiLCJjb2RlTG9jIiwiJGlucHV0IiwibWFzayIsInBsYWNlaG9sZGVyIiwiZmFrZVNjcm9sbCIsImRpc3BhdGNoRXZlbnQiLCJsaXN0IiwiJHBsYWNlaG9sZGVyIiwic3RvcFByb3BhZ2F0aW9uIiwiaXRlbSIsImhhbmRsZUlucHV0IiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiJGRyb3Bkb3duRWxlbWVudCIsIkpTT04iLCJwYXJzZSIsImxvd2VyQ2FzZVZhbHVlIiwidG9Mb3dlckNhc2UiLCJtYXRjaGVzRm91bmQiLCJpbm5lckhUTUwiLCJvcHRpb25zIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiZmlyc3RSZW5kZXIiLCIkcmFuZ2UiLCJtaW4iLCJtYXgiLCJub1VpU2xpZGVyIiwiY29ubmVjdCIsInN0ZXAiLCJjcmVhdGUiLCJzdGFydCIsInZhbHVlcyIsInJhbmdlIiwiJGNvb2tpZXMiLCJzZXRUaW1lb3V0IiwiJGJhbm5lciIsInNob3dPdmVyZmxvdyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzZXRJdGVtIiwiaGlkZUhlYWRlck1lbnUiLCJTd2lwZXIiLCJsb29wQWRkaXRpb25hbFNsaWRlcyIsImJyZWFrcG9pbnRzIiwic2xpZGVzUGVyVmlldyIsImNlbnRlcmVkU2xpZGVzIiwic2xpZGVzUGVyR3JvdXAiLCJjbGlja2FibGUiLCJwYWdpbmF0aW9uIiwicmV2aWV3U2xpZGVyTW9iaWxlIiwibG9vcCIsImNvbnNvbGUiLCJsb2ciLCJjb3VudHJ5IiwiY2l0aWVzRGF0YSIsImtleSIsIiRsYWJlbEVsZW1lbnQiLCJjaXRpZXMiLCJmaWx0ZXIiLCJpbmRleE9mIiwiJHN1Ym1pdEJ1dHRvbiJdLCJtYXBwaW5ncyI6ImFBQUFBLE9BQU9DLE9BQVMsV0FFZCxJQUFBQyxFQUFBLENBSUZBLE1BQUEsU0FBQUMsR0FBa0QsSUFBQUMsRUFBQUMsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFB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QUFBQSxpQkFBY3BFLGdDQUFkbkUsUUFDRHFDLE1BQUFDLEtBQUFsQyxTQUFBb0MsaUJBQUEsaUNBQUFFLEtBQUEsU0FBQUMsR0FBQSxPQUFBQSxFQUFBVixpQkFBQSxVQUFBLFdBQ0YsSUFWMkVzRyxFQUFBNUYsRUFBQVosUUFBQSxRQUFBVSxjQUFBLHlCQVc3RUUsRUFBQU0sU0FybUJEc0YsRUFBQTFILFVBQUFZLE9BQUEsb0JBK2xCTThHLEVBQWNyRSxnQkFBZ0IsY0FFOUJxRSxFQUFjMUgsVUFBVU8sSUFBSSxvQkFDNUJtSCxFQUFjcEUsYUFBYSxXQUFZIiwiZmlsZSI6ImNvbW1vbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3aW5kb3cub25sb2FkID0gKCkgPT4ge1xuXG4gIC8vINCe0LHRitC10LrRgiDQs9C70L7QsdCw0LvRjNC90L7Qs9C+IEFQSVxuY29uc3QgJGFwaSA9IHt9O1xuXG4vLyBBUEkg0LTQu9GPINGA0LDQsdC+0YLRiyDRgSDQv9C+0L/QsNC/0LDQvNC4XG4kYXBpLnBvcHVwID0gKCRwb3B1cCwgeyBvbkhpZGUsIG9uU2hvdyB9ID0ge30pID0+IHtcbiAgLy8g0J7RgtC60LvRjtGH0LDQtdGCINCy0L7Qt9C80L7QttC90L7RgdGC0Ywg0YHQutGA0L7Qu9C70LjRgtGMINGB0YLRgNCw0L3QuNGG0YNcbiAgY29uc3QgaGlkZU92ZXJmbG93ID0gKCkgPT4ge1xuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3NzVGV4dCA9IGBwb3NpdGlvbjogZml4ZWQ7IG1hcmdpbi10b3A6ICR7LXdpbmRvdy5zY3JvbGxZfXB4YDtcbiAgfTtcbiAgXG4gIC8vINCS0LrQu9GO0YfQsNC10YIg0LLQvtC30LzQvtC20L3QvtGB0YLRjCDRgdC60YDQvtC70LvQuNGC0Ywg0YHRgtGA0LDQvdC40YbRg1xuICBjb25zdCBzaG93T3ZlcmZsb3cgPSBvZmZzZXQgPT4ge1xuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3NzVGV4dCA9ICdwb3NpdGlvbjogc3RhdGljOyBtYXJnaW4tdG9wOiAwJztcbiAgICBcbiAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgb2Zmc2V0KTtcbiAgfTtcbiAgXG4gIHJldHVybiB7XG4gICAgLy8g0JLQvtC30LLRgNCw0YnQsNC10YIgdHJ1ZSwg0LXRgdC70Lgg0L/QvtC/0LDQvyDQv9C+0LrQsNC30YvQstCw0LXRgtGB0Y8sINCyINC40L3QvtC8INGB0LvRg9GH0LDQtSBmYWxzZVxuICAgIGlzU2hvd246ICgpID0+ICRwb3B1cC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwLS1vcGVuZWQnKSxcbiAgICAvLyDQn9C+0LrQsNC30YvQstCw0LXRgiDQv9C+0L/QsNC/XG4gICAgc2hvdygpIHtcbiAgICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgJHBvcHVwLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcblxuICAgICAgaGlkZU92ZXJmbG93KCk7XG5cbiAgICAgIHByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICRwb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cC0tb3BlbmVkJyk7XG4gICAgICAgIGlmICh0eXBlb2Ygb25TaG93ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgb25TaG93KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8g0KHQutGA0YvQstCw0LXRgiDQv9C+0L/QsNC/XG4gICAgaGlkZSgpIHtcbiAgICAgIGNvbnN0IG9mZnNldCA9IC1wYXJzZUludChkb2N1bWVudC5ib2R5LnN0eWxlLm1hcmdpblRvcCk7XG4gIFxuICAgICAgJHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwLS1vcGVuZWQnKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAkcG9wdXAuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgc2hvd092ZXJmbG93KG9mZnNldCk7XG4gICAgICAgIGlmICh0eXBlb2Ygb25IaWRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgb25IaWRlKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIDMwMCk7XG4gICAgfVxuICB9O1xufTtcblxuLy8gQVBJINC00LvRjyDQstCw0LvQuNC00LDRhtC40Lgg0YTQvtGA0LxcbiRhcGkudmFsaWRhdGUgPSAoZm9ybSwgcmVxdWVzdCkgPT4ge1xuICBjb25zdCBlbWFpbFJlZ2V4cCA9IC9eKChbXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKFxcLltePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfV0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvO1xuICBjb25zdCBzZXRJbnZhbGlkSW5wdXQgPSBpbnB1dCA9PiB7XG4gICAgaWYgKGlucHV0LmNsb3Nlc3QoJy5pbnB1dCcpKSB7XG4gICAgICBpbnB1dC5jbG9zZXN0KCcuaW5wdXQnKS5jbGFzc0xpc3QuYWRkKCdpbnB1dC0tZXJyb3InKTtcbiAgICB9IGVsc2UgaWYgKGlucHV0LmNsb3Nlc3QoJy50ZXh0YXJlYScpKSB7XG4gICAgICBpbnB1dC5jbG9zZXN0KCcudGV4dGFyZWEnKS5jbGFzc0xpc3QuYWRkKCd0ZXh0YXJlYS0tZXJyb3InKTtcbiAgICB9XG4gICAgaW5wdXQuZm9jdXMoKTtcbiAgfTtcbiAgY29uc3Qgc2V0SW52YWxpZENoZWNrYm94ID0gaW5wdXQgPT4ge1xuICAgIGlucHV0LmNsb3Nlc3QoJy5jaGVja2JveCcpLmNsYXNzTGlzdC5hZGQoJ2NoZWNrYm94LS1lcnJvcicpO1xuICB9O1xuXG4gIGZvcm0ucXVlcnlTZWxlY3RvcignYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGxldCBmb3JtSXNWYWxpZCA9IHRydWU7XG4gICAgY29uc3QgJGZvcm1JbnB1dHMgPSBBcnJheS5mcm9tKGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbcmVxdWlyZWRdLCB0ZXh0YXJlYVtyZXF1aXJlZF0nKSk7XG4gICAgY29uc3QgJGNoZWNrYm94U2VsZWN0ID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuY2hlY2tib3hzZWxlY3QnKTtcblxuICAgICRmb3JtSW5wdXRzLnJldmVyc2UoKS5tYXAoZWwgPT4ge1xuICAgICAgaWYgKGVsLmRhdGFzZXQucGFzc1JlcGVhdCAmJiBlbC52YWx1ZSAhPT0gZWwuY2xvc2VzdCgnZm9ybScpLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W2RhdGEtcGFzc10nKS52YWx1ZSkge1xuICAgICAgICBzZXRJbnZhbGlkSW5wdXQoZWwpO1xuICAgICAgfVxuXG4gICAgICBzd2l0Y2goZWwuZ2V0QXR0cmlidXRlKCd0eXBlJykpIHtcbiAgICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgIGNhc2UgJ3Bhc3N3b3JkJzpcbiAgICAgICAgICBpZiAoZWwudmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICBzZXRJbnZhbGlkSW5wdXQoZWwpO1xuICAgICAgICAgICAgZm9ybUlzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3RlbCc6XG4gICAgICAgICAgaWYgKGVsLnZhbHVlID09PSAnJyB8fCBlbC52YWx1ZS5pbmNsdWRlcygnXycpKSB7XG4gICAgICAgICAgICBzZXRJbnZhbGlkSW5wdXQoZWwpO1xuICAgICAgICAgICAgZm9ybUlzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2NoZWNrYm94JzpcbiAgICAgICAgICBpZiAoIWVsLmNoZWNrZWQpIHtcbiAgICAgICAgICAgIHNldEludmFsaWRDaGVja2JveChlbCk7XG4gICAgICAgICAgICBmb3JtSXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZW1haWwnOlxuICAgICAgICAgIGlmICghZW1haWxSZWdleHAudGVzdChlbC52YWx1ZSkpIHtcbiAgICAgICAgICAgIHNldEludmFsaWRJbnB1dChlbCk7XG4gICAgICAgICAgICBmb3JtSXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBpZiAoZWwudmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICBzZXRJbnZhbGlkSW5wdXQoZWwpO1xuICAgICAgICAgICAgZm9ybUlzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIFxuICAgIGlmICgkY2hlY2tib3hTZWxlY3QubGVuZ3RoKSB7XG4gICAgICBBcnJheS5mcm9tKCRjaGVja2JveFNlbGVjdCkubWFwKGVsID0+IHtcbiAgICAgICAgbGV0IGNoZWNrZWQgPSBmYWxzZTtcbiAgXG4gICAgICAgIEFycmF5LmZyb20oZWwucXVlcnlTZWxlY3RvckFsbCgnLmNoZWNrYm94X19pbnB1dCcpKS5tYXAoY2hlY2tib3ggPT4ge1xuICAgICAgICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7XG4gICAgICAgICAgICBjaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICBcbiAgICAgICAgaWYgKCFjaGVja2VkKSB7XG4gICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnY2hlY2tib3hzZWxlY3QtLWVycm9yJyk7XG4gICAgICAgICAgZm9ybUlzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGZvcm1Jc1ZhbGlkKSB7XG4gICAgICByZXF1ZXN0KCk7XG4gICAgfVxuICB9KTtcblxuICBBcnJheS5mcm9tKGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKSkuY29uY2F0KEFycmF5LmZyb20oZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCd0ZXh0YXJlYScpKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgIGlmIChlbC5jbG9zZXN0KCcuaW5wdXQnKSkge1xuICAgICAgZWwuY2xvc2VzdCgnLmlucHV0JykuY2xhc3NMaXN0LnJlbW92ZSgnaW5wdXQtLWVycm9yJyk7XG4gICAgfSBlbHNlIGlmIChlbC5jbG9zZXN0KCcuY2hlY2tib3gnKSkge1xuICAgICAgZWwuY2xvc2VzdCgnLmNoZWNrYm94JykuY2xhc3NMaXN0LnJlbW92ZSgnY2hlY2tib3gtLWVycm9yJyk7XG4gICAgfSBlbHNlIGlmIChlbC5jbG9zZXN0KCcudGV4dGFyZWEnKSkge1xuICAgICAgZWwuY2xvc2VzdCgnLnRleHRhcmVhJykuY2xhc3NMaXN0LnJlbW92ZSgndGV4dGFyZWEtLWVycm9yJyk7XG4gICAgfVxuICB9KSk7XG59O1xuXG4gIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLW9wZW4tcG9wdXAnKSkubWFwKGVsID0+XG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc3QgdGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucG9wdXA7XG4gICAgY29uc3QgJHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmpzLXBvcHVwW2RhdGEtcG9wdXA9XCIke3RhcmdldH1cIl1gKTtcbiAgICBcbiAgICAkYXBpLnBvcHVwKCRwb3B1cCkuc2hvdygpO1xuICB9KVxuKTtcbiAgXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1jbG9zZS1wb3B1cCcpKS5tYXAoZWwgPT5cbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBpZighZS50YXJnZXQuY2xvc2VzdCgnLnBvcHVwX193aW5kb3cnKSB8fCAhZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnanMtcG9wdXAnKSkge1xuICAgICAgY29uc3QgJHBvcHVwID0gZS5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5wb3B1cCcpO1xuXG4gICAgICAkYXBpLnBvcHVwKCRwb3B1cCkuaGlkZSgpO1xuICAgIH1cbiAgfSlcbik7XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtcmVzdG9yZS1mb3JtXScpKSB7XG4gICRhcGkudmFsaWRhdGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXJlc3RvcmUtZm9ybV0nKSwgKCkgPT4ge30pO1xufVxuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXJlcXVlc3QtYXV0aC1mb3JtXScpKSB7XG4gICRhcGkudmFsaWRhdGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXJlcXVlc3QtYXV0aC1mb3JtXScpLCAoKSA9PiB7fSk7XG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtcmVxdWVzdC1mb3JtXScpKSB7XG4gICRhcGkudmFsaWRhdGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXJlcXVlc3QtZm9ybV0nKSwgKCkgPT4ge1xuICAgIGNvbnN0ICRwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wb3B1cFtkYXRhLXBvcHVwPVwicmVxdWVzdFwiXScpO1xuICAgIGNvbnN0ICRzdWNjZXNzUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtcG9wdXBbZGF0YS1wb3B1cD1cInJlcXVlc3Qtc3VjY2Vzc1wiXScpO1xuXG4gICAgJGFwaS5wb3B1cCgkcG9wdXAsIHtcbiAgICAgIG9uSGlkZSgpIHtcbiAgICAgICAgQXJyYXkuZnJvbSgkcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKSkubWFwKGVsID0+IGVsLnZhbHVlID0gJycpO1xuICAgICAgICAkYXBpLnBvcHVwKCRzdWNjZXNzUG9wdXApLnNob3coKTtcbiAgICAgIH1cbiAgICB9KS5oaWRlKCk7XG4gIH0pO1xufVxuICBjb25zdCAkZHJvcGRvd25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZHJvcGRvd24nKSk7XG5cbi8vIGNsb3NlIGRyb3Bkb3duIG9uIG91dGVyIGNsaWNrXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9IGUudGFyZ2V0O1xuXG4gIGlmKCEkdGhpcy5jbG9zZXN0KCcuZHJvcGRvd24nKSkge1xuICAgICRkcm9wZG93bnMubWFwKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3Bkb3duLS1hY3RpdmUnKSk7XG4gIH1cbn0pO1xuXG4vLyBvcGVuIGRyb3Bkb3duXG4kZHJvcGRvd25zLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0ICR0aGlzID0gZS5jdXJyZW50VGFyZ2V0O1xuXG4gIGlmICghJHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdkcm9wZG93bi0tYWN0aXZlJykpIHtcbiAgICAkZHJvcGRvd25zLm1hcChlbCA9PiBlbCAhPT0gJHRoaXMgJiYgZWwuY2xhc3NMaXN0LnJlbW92ZSgnZHJvcGRvd24tLWFjdGl2ZScpKTtcbiAgICAkdGhpcy5jbGFzc0xpc3QudG9nZ2xlKCdkcm9wZG93bi0tYWN0aXZlJyk7XG4gIH1cbn0pKTtcblxuLy8gY2hhbmdlIGRyb3Bkb3duIHZhbHVlXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICBpZiAoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRvZ2dsZScpKSB7XG4gICAgY29uc3QgJHRoaXMgPSBlLnRhcmdldDtcbiAgICBjb25zdCBuZXdWYWx1ZSA9ICR0aGlzLmlubmVyVGV4dDtcbiAgICBjb25zdCAkY2xvbmVFbGVtZW50ID0gJHRoaXMuY2xvbmVOb2RlKCk7XG4gICAgY29uc3QgJGRyb3Bkb3duVmFsdWUgPSAkdGhpcy5jbG9zZXN0KCcuZHJvcGRvd24nKS5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd25fX3ZhbHVlJyk7XG4gICAgXG4gICAgJGNsb25lRWxlbWVudC5pbm5lclRleHQgPSAkZHJvcGRvd25WYWx1ZS5pbm5lclRleHQ7XG4gICAgJGRyb3Bkb3duVmFsdWUuaW5uZXJUZXh0ID0gbmV3VmFsdWU7XG4gICAgXG4gICAgJHRoaXMucGFyZW50Tm9kZS5wcmVwZW5kKCRjbG9uZUVsZW1lbnQpO1xuICAgICR0aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoJHRoaXMpO1xuICB9XG5cbiAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5kcm9wZG93bl9fbWVudS1pdGVtJykpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tLWFjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3Bkb3duLS1hY3RpdmUnKTtcbiAgfVxufSk7XG4gIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYnNfX2l0ZW0nKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcblxuICBjb25zdCAkdGhpcyA9IGUuY3VycmVudFRhcmdldDtcbiAgY29uc3QgdGFyZ2V0ID0gJHRoaXMuZGF0YXNldC50YWI7XG5cbiAgJHRoaXMuY2xvc2VzdCgnLnRhYnMnKS5xdWVyeVNlbGVjdG9yKCcudGFic19faXRlbS0tYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgndGFic19faXRlbS0tYWN0aXZlJyk7XG4gICR0aGlzLmNsYXNzTGlzdC5hZGQoJ3RhYnNfX2l0ZW0tLWFjdGl2ZScpO1xuXG4gICR0aGlzLmNsb3Nlc3QoJ1tkYXRhLXRhYnNdJykucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aXZlXScpLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1hY3RpdmUnKTtcbiAgJHRoaXMuY2xvc2VzdCgnW2RhdGEtdGFic10nKS5xdWVyeVNlbGVjdG9yKGBbZGF0YS1jb250ZW50PVwiJHt0YXJnZXR9XCJdYCkuc2V0QXR0cmlidXRlKCdkYXRhLWFjdGl2ZScsIHRydWUpO1xufSkpO1xuICBjb25zdCBjaGFuZ2VDb3VudHJ5RXZlbnQgPSBuZXcgRXZlbnQoJ2NoYW5nZUNvdW50cnknKTtcblxuY29uc3QgdXBkYXRlTWFzayA9IChpbnB1dCwgbWFzaykgPT4ge1xuICBJbnB1dG1hc2soe21hc2t9KS5tYXNrKGlucHV0KTtcbn07XG5cbi8vIE9wZW4gaW5wdXQgZHJvcGRvd25cbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0LmRyb3Bkb3duJykpXG4uY29uY2F0KEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0IC5kcm9wZG93bicpKSlcbi5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0ICRkcm9wZG93biA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bl9fbWVudScpO1xuICBlbC5jbG9zZXN0KCcuaW5wdXQnKS5xdWVyeVNlbGVjdG9yKCcuaW5wdXRfX2Ryb3Bkb3duJykuc3R5bGUud2lkdGggPSBlbC5jbG9zZXN0KCcuaW5wdXQnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCArICdweCc7XG5cbiAgaWYgKCEkZHJvcGRvd24uY2xhc3NMaXN0LmNvbnRhaW5zKCdmYWtlU2Nyb2xsJykpIHtcbiAgICAkZHJvcGRvd24uZmFrZVNjcm9sbCgpO1xuICB9XG59KSk7XG5cbi8vIENoYW5nZSBwaG9uZSBjb2RlIG9uIGlucHV0IGRyb3Bkb3duXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dF9fZHJvcGRvd24taXRlbVtkYXRhLWNvZGUtbG9jXScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0IGxvYyA9IGVsLmRhdGFzZXQuY29kZUxvYztcbiAgY29uc3QgbWFzayA9IGVsLmRhdGFzZXQubWFzaztcbiAgY29uc3QgJGlucHV0ID0gZWwuY2xvc2VzdCgnLmlucHV0JykucXVlcnlTZWxlY3RvcignaW5wdXQnKTtcblxuICBlbC5jbG9zZXN0KCcuaW5wdXRfX2NvZGUnKS5kYXRhc2V0LmNvZGVMb2MgPSBsb2M7XG4gIGVsLmNsb3Nlc3QoJy5pbnB1dF9fY29kZScpLmRhdGFzZXQubWFzayA9IG1hc2s7XG4gICRpbnB1dC5wbGFjZWhvbGRlciA9IG1hc2sucmVwbGFjZUFsbCgnOScsICdfJyk7XG4gIHVwZGF0ZU1hc2soJGlucHV0LCBtYXNrKTtcbn0pKTtcblxuLy8gQ2hhbmdlIGlucHV0IGRyb3Bkb3duIHZhbHVlXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dF9fZHJvcGRvd24taXRlbVtkYXRhLWRyb3Bkb3duXScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gZWwuaW5uZXJUZXh0O1xuICBcbiAgZWwuY2xvc2VzdCgnLmlucHV0JykucXVlcnlTZWxlY3RvcignaW5wdXQnKS52YWx1ZSA9IHZhbHVlO1xuICBlbC5jbG9zZXN0KCcuaW5wdXQnKS5jbGFzc0xpc3QucmVtb3ZlKCdpbnB1dC0tZXJyb3InKTtcblxuICBpZiAoZWwuY2xvc2VzdCgnLmlucHV0JykuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1hdXRoLWNvdW50cnknKSkge1xuICAgIGVsLmNsb3Nlc3QoJy5pbnB1dCcpLmRpc3BhdGNoRXZlbnQoY2hhbmdlQ291bnRyeUV2ZW50KTtcbiAgfVxufSkpO1xuXG4vLyBNYXNraW5nIHBob25lIGlucHV0XG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJ0ZWxcIl0nKSkubWFwKGVsID0+IHtcbiAgSW5wdXRtYXNrKHttYXNrOiBlbC5jbG9zZXN0KCcuaW5wdXQnKS5xdWVyeVNlbGVjdG9yKCcuaW5wdXRfX2NvZGUnKS5kYXRhc2V0Lm1hc2t9KS5tYXNrKGVsKTtcbn0pO1xuICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGVja2JveHNlbGVjdF9fbGlzdCcpKS5tYXAobGlzdCA9PiB7XG4gIGxpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICBcbiAgICBjb25zdCAkY2hlY2tib3hTZWxlY3QgPSBsaXN0LmNsb3Nlc3QoJy5jaGVja2JveHNlbGVjdCcpO1xuICAgIGxldCBjaGVja2VkID0gZmFsc2U7XG5cbiAgICAkY2hlY2tib3hTZWxlY3QuY2xhc3NMaXN0LnJlbW92ZSgnY2hlY2tib3hzZWxlY3QtLWVycm9yJyk7XG5cbiAgICBBcnJheS5mcm9tKGxpc3QucXVlcnlTZWxlY3RvckFsbCgnLmNoZWNrYm94X19pbnB1dCcpKS5tYXAoY2hlY2tib3ggPT4ge1xuICAgICAgY29uc3QgJHBsYWNlaG9sZGVyID0gJGNoZWNrYm94U2VsZWN0LnF1ZXJ5U2VsZWN0b3IoJy5jaGVja2JveHNlbGVjdF9faW5wdXQtcGxhY2Vob2xkZXInKTtcblxuICAgICAgaWYgKGNoZWNrYm94LmNoZWNrZWQpIGNoZWNrZWQgPSB0cnVlO1xuXG4gICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgbGV0IHZhbHVlID0gJyc7XG5cbiAgICAgICAgQXJyYXkuZnJvbShsaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0OmNoZWNrZWQnKSkubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgIHZhbHVlICs9IGl0ZW0uY2xvc2VzdCgnLmNoZWNrYm94c2VsZWN0X19pdGVtJykucXVlcnlTZWxlY3RvcignLmNoZWNrYm94X190ZXh0JykuaW5uZXJUZXh0ICsgJywgJztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgJHBsYWNlaG9sZGVyLmlubmVyVGV4dCA9IHZhbHVlLnN1YnN0cmluZygwLCB2YWx1ZS5sZW5ndGggLSAyKTtcbiAgICAgICAgICAkcGxhY2Vob2xkZXIuY2xhc3NMaXN0LmFkZCgnY2hlY2tib3hzZWxlY3RfX2lucHV0LXBsYWNlaG9sZGVyLS1hY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkcGxhY2Vob2xkZXIuaW5uZXJUZXh0ID0gJHBsYWNlaG9sZGVyLmRhdGFzZXQucGxhY2Vob2xkZXI7XG4gICAgICAgICAgJHBsYWNlaG9sZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2NoZWNrYm94c2VsZWN0X19pbnB1dC1wbGFjZWhvbGRlci0tYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICBcbiAgICBpZiAoY2hlY2tlZCkge1xuICAgICAgJGNoZWNrYm94U2VsZWN0LmNsYXNzTGlzdC5hZGQoJ2NoZWNrYm94c2VsZWN0LS1jaGVja2VkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRjaGVja2JveFNlbGVjdC5jbGFzc0xpc3QucmVtb3ZlKCdjaGVja2JveHNlbGVjdC0tY2hlY2tlZCcpO1xuICAgIH1cbiAgfSk7XG5cbiAgbGlzdC5mYWtlU2Nyb2xsKCk7XG59KTtcbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmlsdGVyc19fZHJvcGRvd24taXRlbScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgY29uc3QgJHRoaXMgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gIGNvbnN0IHZhbHVlID0gJHRoaXMuaW5uZXJUZXh0O1xuXG4gICR0aGlzLmNsb3Nlc3QoJy5maWx0ZXJzX19pbnB1dCcpLnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXJzX19pbnB1dC1maWVsZCcpLnZhbHVlID0gdmFsdWU7XG59KSk7XG5cbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZpbHRlcnNfX2lucHV0LWZpZWxkJykpLm1hcChlbCA9PiB7XG4gIGNvbnN0ICR0aGlzID0gZWw7XG4gIGNvbnN0IGhhbmRsZUlucHV0ID0gZmlyc3RSZW5kZXIgPT4ge1xuICAgIGNvbnN0ICRkcm9wZG93bkVsZW1lbnQgPSAkdGhpcy5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgY29uc3QgJGRyb3Bkb3duID0gJGRyb3Bkb3duRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZmFrZVNjcm9sbF9fY29udGVudCcpIHx8ICRkcm9wZG93bkVsZW1lbnQ7XG4gICAgY29uc3Qgb3B0aW9ucyA9IEpTT04ucGFyc2UoJHRoaXMuZGF0YXNldC5vcHRpb25zKTtcbiAgICBjb25zdCBsb3dlckNhc2VWYWx1ZSA9ICR0aGlzLnZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgbGV0IG1hdGNoZXNGb3VuZCA9IGZhbHNlO1xuXG4gICAgJGRyb3Bkb3duLmlubmVySFRNTCA9ICcnO1xuICBcbiAgICBvcHRpb25zLm1hcChlbCA9PiB7XG4gICAgICBpZiAoZmlyc3RSZW5kZXIgfHwgZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKGxvd2VyQ2FzZVZhbHVlKSA9PT0gMCkge1xuICAgICAgICBtYXRjaGVzRm91bmQgPSB0cnVlO1xuICAgICAgICAkZHJvcGRvd24uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBgPGEgY2xhc3M9XCJmaWx0ZXJzX19kcm9wZG93bi1pdGVtIGRyb3Bkb3duX19tZW51LWl0ZW1cIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCI+JHtlbH08L2E+YClcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChtYXRjaGVzRm91bmQpIHtcbiAgICAgICRkcm9wZG93bkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZmlsdGVyc19fZHJvcGRvd24tLWhpZGRlbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZHJvcGRvd25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ZpbHRlcnNfX2Ryb3Bkb3duLS1oaWRkZW4nKTtcbiAgICB9XG5cbiAgICBBcnJheS5mcm9tKCRkcm9wZG93bi5xdWVyeVNlbGVjdG9yQWxsKCcuZmlsdGVyc19fZHJvcGRvd24taXRlbScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAkdGhpcy52YWx1ZSA9IGVsLmlubmVyVGV4dDtcbiAgICAgICR0aGlzLnNldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScsIGVsLmlubmVyVGV4dCk7XG4gICAgfSkpO1xuXG4gICAgaWYgKGZpcnN0UmVuZGVyICYmICEkZHJvcGRvd25FbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZmFrZVNjcm9sbCcpKSB7XG4gICAgICAkZHJvcGRvd24uZmFrZVNjcm9sbCgpO1xuICAgIH1cbiAgfTtcblxuICBpZiAoJHRoaXMubmFtZSAhPT0gJ2Nvc3QnKSB7XG4gICAgJHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiBoYW5kbGVJbnB1dChmYWxzZSkpO1xuICAgICR0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4gaGFuZGxlSW5wdXQodHJ1ZSkpO1xuICAgICR0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiB7XG4gICAgICBpZiAoJHRoaXMudmFsdWUgPT09ICcnIHx8ICEkdGhpcy5kYXRhc2V0LnZhbHVlKSB7XG4gICAgICAgICR0aGlzLnZhbHVlID0gJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkdGhpcy52YWx1ZSA9ICR0aGlzLmRhdGFzZXQudmFsdWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pO1xuXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWx0ZXJzX19jb3N0LXJhbmdlJykpLm1hcCgkcmFuZ2UgPT4ge1xuICBjb25zdCBtaW4gPSArJHJhbmdlLmRhdGFzZXQubWluO1xuICBjb25zdCBtYXggPSArJHJhbmdlLmRhdGFzZXQubWF4O1xuXG4gIG5vVWlTbGlkZXIuY3JlYXRlKCRyYW5nZSwge1xuICAgIHN0YXJ0OiBbbWluLCBtYXhdLFxuICAgIGNvbm5lY3Q6IHRydWUsXG4gICAgcmFuZ2U6IHtcbiAgICAgIG1pbixcbiAgICAgIG1heFxuICAgIH0sXG4gICAgc3RlcDogMTAwXG4gIH0pO1xuXG4gICRyYW5nZS5ub1VpU2xpZGVyLm9uKCdzbGlkZScsIHZhbHVlcyA9PiB7XG4gICAgY29uc3QgbWluID0gcGFyc2VJbnQodmFsdWVzWzBdKTtcbiAgICBjb25zdCBtYXggPSBwYXJzZUludCh2YWx1ZXNbMV0pO1xuXG4gICAgJHJhbmdlLmNsb3Nlc3QoJy5maWx0ZXJzX19pbnB1dCcpLnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXJzX19pbnB1dC1maWVsZCcpLnZhbHVlID0gYCR7bWlufSDigr0g4oCTICR7bWF4fSDigr1gO1xuICAgICRyYW5nZS5jbG9zZXN0KCcuZmlsdGVyc19fY29zdCcpLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNvc3Q9XCJmcm9tXCJdJykuaW5uZXJUZXh0ID0gbWluO1xuICAgICRyYW5nZS5jbG9zZXN0KCcuZmlsdGVyc19fY29zdCcpLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNvc3Q9XCJ0b1wiXScpLmlubmVyVGV4dCA9IG1heDtcbiAgfSk7XG59KTtcbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtdHV0b3JjYXJkLW1vcmUnKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gIEFycmF5LmZyb20oZWwuY2xvc2VzdCgnLnR1dG9yY2FyZF9fc3ViamVjdHMnKS5xdWVyeVNlbGVjdG9yQWxsKCcudHV0b3JjYXJkX19zdWJqZWN0cy1pdGVtLS1oaWRkZW4nKSkubWFwKGVsID0+IHtcbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCd0dXRvcmNhcmRfX3N1YmplY3RzLWl0ZW0tLWhpZGRlbicpO1xuICB9KTtcbn0pKTtcblxuICBjb25zdCAkY29va2llcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb29raWVzJyk7XG5cbmlmICghSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGV0bWV0dXRvcjpjb29raWVzSXNIaWRkZW4nKSkpIHtcbiAgJGNvb2tpZXMuY2xhc3NMaXN0LmFkZCgnY29va2llcy0tc2hvd24nKTtcblxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29va2llc19fYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgJGNvb2tpZXMuY2xhc3NMaXN0LnJlbW92ZSgnY29va2llcy0tc2hvd24nKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICRjb29raWVzLnJlbW92ZSgpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xldG1ldHV0b3I6Y29va2llc0lzSGlkZGVuJywgdHJ1ZSk7XG4gICAgfSwgNTAwKVxuICB9KTtcbn0gZWxzZSB7XG4gICRjb29raWVzLnJlbW92ZSgpO1xufVxuICBsZXQgb2Zmc2V0ID0gMDtcbmNvbnN0ICRiYW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19iYW5uZXInKTtcbmNvbnN0IGhpZGVPdmVyZmxvdyA9ICgpID0+IHtcbiAgb2Zmc2V0ID0gLXBhcnNlSW50KGRvY3VtZW50LmJvZHkuc3R5bGUubWFyZ2luVG9wKTtcbiAgZG9jdW1lbnQuYm9keS5zdHlsZS5jc3NUZXh0ID0gYHBvc2l0aW9uOiBmaXhlZDsgbWFyZ2luLXRvcDogJHstd2luZG93LnNjcm9sbFl9cHhgO1xufTtcbmNvbnN0IHNob3dPdmVyZmxvdyA9IG9mZnNldCA9PiB7XG4gIGRvY3VtZW50LmJvZHkuc3R5bGUuY3NzVGV4dCA9ICdwb3NpdGlvbjogc3RhdGljOyBtYXJnaW4tdG9wOiAwJztcbiAgd2luZG93LnNjcm9sbFRvKDAsIG9mZnNldCk7XG59O1xuY29uc3QgaGlkZUhlYWRlck1lbnUgPSAoKSA9PiB7XG4gIHNob3dPdmVyZmxvdygpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLW1lbnUnKS5jbGFzc0xpc3QucmVtb3ZlKCdoZWFkZXItbWVudS0tc2hvd24nKTtcbn07XG5cbmlmICghSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGV0bWV0dXRvcjpiYW5uZXJJc0hpZGRlbicpKSkge1xuICAkYmFubmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2Jhbm5lci1jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICRiYW5uZXIuY2xhc3NMaXN0LmFkZCgnaGVhZGVyX19iYW5uZXItLWhpZGUnKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICRiYW5uZXIucmVtb3ZlKCk7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbGV0bWV0dXRvcjpiYW5uZXJJc0hpZGRlbicsIHRydWUpO1xuICAgIH0sIDUwMClcbiAgfSk7XG59IGVsc2Uge1xuICAkYmFubmVyLnJlbW92ZSgpO1xufVxuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19idXJnZXInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgaGlkZU92ZXJmbG93KCk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItbWVudScpLmNsYXNzTGlzdC5hZGQoJ2hlYWRlci1tZW51LS1zaG93bicpO1xufSk7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItbWVudV9fYmFja2Ryb3AnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhpZGVIZWFkZXJNZW51KTtcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItbWVudV9fY2xvc2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhpZGVIZWFkZXJNZW51KTtcblxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaGVhZGVyX19ub3RpZmljYXRpb25zLXdyYXBwZXInKSkubWFwKGVsID0+IHtcbiAgaWYgKCFlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2Zha2VTY3JvbGwnKSkge1xuICAgIGVsLmZha2VTY3JvbGwoKTtcbiAgfVxufSk7XG4gIGNvbnN0IHBvcHVsYXJTbGlkZXIgPSBuZXcgU3dpcGVyKCcucG9wdWxhcl9fZ3JpZC0tbW9iaWxlJywge1xuICBsb29wOiB0cnVlLFxuICBsb29wQWRkaXRpb25hbFNsaWRlczogMyxcbiAgc3BhY2VCZXR3ZWVuOiAyMCxcbiAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxuICBjZW50ZXJlZFNsaWRlczogdHJ1ZSxcbiAgYnJlYWtwb2ludHM6IHtcbiAgICA3NjA6IHtcbiAgICAgIHNsaWRlc1BlclZpZXc6IDIsXG4gICAgICBjZW50ZXJlZFNsaWRlczogZmFsc2VcbiAgICB9XG4gIH1cbn0pO1xuICBjb25zdCByZXZpZXdzU2xpZGVyID0gbmV3IFN3aXBlcignLnJldmlld3NfX3NsaWRlcicsIHtcbiAgbG9vcDogdHJ1ZSxcbiAgc3BhY2VCZXR3ZWVuOiAyMCxcbiAgc2xpZGVzUGVyVmlldzogMyxcbiAgc2xpZGVzUGVyR3JvdXA6IDMsXG4gIGxvb3BBZGRpdGlvbmFsU2xpZGVzOiAzLFxuICBwYWdpbmF0aW9uOiB7XG4gICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxuICAgIGNsaWNrYWJsZTogdHJ1ZVxuICB9XG59KTtcblxuY29uc3QgcmV2aWV3U2xpZGVyTW9iaWxlID0gbmV3IFN3aXBlcignLnJldmlld3NfX3NsaWRlci0tbW9iaWxlJywge1xuICBsb29wOiB0cnVlLFxuICBzcGFjZUJldHdlZW46IDIwLFxuICBsb29wQWRkaXRpb25hbFNsaWRlczogMyxcbiAgcGFnaW5hdGlvbjoge1xuICAgIGVsOiAnLnN3aXBlci1wYWdpbmF0aW9uJyxcbiAgICBjbGlja2FibGU6IHRydWVcbiAgfVxufSk7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtbG9naW4tZm9ybV0nKSkge1xuICAkYXBpLnZhbGlkYXRlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1sb2dpbi1mb3JtXScpLCAoKSA9PiB7Y29uc29sZS5sb2codHJ1ZSl9KTtcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1zaWdudXAtc3R1ZGVudC1mb3JtXScpKSB7XG4gICRhcGkudmFsaWRhdGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXNpZ251cC1zdHVkZW50LWZvcm1dJyksICgpID0+IHt9KTtcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1zaWdudXAtdHV0b3ItZm9ybV0nKSkge1xuICAkYXBpLnZhbGlkYXRlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1zaWdudXAtdHV0b3ItZm9ybV0nKSwgKCkgPT4ge30pO1xufVxuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXN1cHBvcnQtZm9ybV0nKSkge1xuICAkYXBpLnZhbGlkYXRlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1zdXBwb3J0LWZvcm1dJyksICgpID0+IHt9KTtcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1hdXRoLWNvdW50cnknKS5sZW5ndGgpIHtcbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtYXV0aC1jb3VudHJ5JykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2VDb3VudHJ5JywgZSA9PiB7XG4gICAgZWwuY2xvc2VzdCgnZm9ybScpLnF1ZXJ5U2VsZWN0b3IoJy5qcy1hdXRoLWNpdHknKS5kYXRhc2V0LmNvdW50cnkgPSBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLnZhbHVlO1xuICB9KSk7XG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtYXV0aC1jaXR5IGlucHV0JykubGVuZ3RoKSB7XG4gIGNvbnN0IGNpdGllc0RhdGEgPSBbe1xuICAgIFwia2V5XCI6IFwi0KDQvtGB0YHQuNGPXCIsXG4gICAgXCJjaXRpZXNcIjogW1xuICAgICAgXCLQnNC+0YHQutCy0LBcIixcbiAgICAgIFwi0KHQsNC90LrRgi3Qn9C10YLQtdGA0LHRg9GA0LNcIixcbiAgICAgIFwi0JrQsNC30LDQvdGMXCIsXG4gICAgICBcItCd0LjQttC90LjQuSDQndC+0LLQs9C+0YDQvtC0XCIsXG4gICAgICBcItCh0L7Rh9C4XCIsXG4gICAgICBcItCV0LrQsNGC0LXRgNC40L3QsdGD0YDQs1wiLFxuICAgICAgXCLQoNC+0YHRgtC+0LIt0L3QsC3QlNC+0L3Rg1wiLFxuICAgICAgXCLQndC+0LLQvtGB0LjQsdC40YDRgdC6XCIsXG4gICAgICBcItCi0Y7QvNC10L3RjFwiLFxuICAgICAgXCLQmtCw0LvQuNC90LjQvdCz0YDQsNC0XCIsXG4gICAgICBcItCj0YTQsFwiLFxuICAgICAgXCLQmtGA0LDRgdC90L7Rj9GA0YHQulwiLFxuICAgICAgXCLQmtGA0LDRgdC90L7QtNCw0YBcIixcbiAgICAgIFwi0KfQtdC70Y/QsdC40L3RgdC6XCIsXG4gICAgICBcItCS0L7RgNC+0L3QtdC2XCJcbiAgICBdXG4gIH0sXG4gIHtcImtleVwiOiBcItCj0LrRgNCw0LjQvdCwXCIsXG4gICAgXCJjaXRpZXNcIjogW1xuICAgICAgXCLQmtC40LXQslwiLFxuICAgICAgXCLQlNC90LXQv9GAXCIsXG4gICAgICBcItCU0L7QvdC10YbQulwiLFxuICAgICAgXCLQl9Cw0L/QvtGA0L7QttGM0LVcIixcbiAgICAgIFwi0JvRjNCy0L7QslwiLFxuICAgICAgXCLQmtGA0LjQstC+0Lkg0KDQvtCzXCIsXG4gICAgICBcItCh0LXQstCw0YHRgtC+0L/QvtC70YxcIixcbiAgICAgIFwi0J3QuNC60L7Qu9Cw0LXQslwiLFxuICAgICAgXCLQnNCw0YDQuNGD0L/QvtC70YxcIlxuICAgIF1cbiAgfV07XG5cbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtYXV0aC1jaXR5IGlucHV0JykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGVsID0+IHtcbiAgICBjb25zdCAkdGhpcyA9IGVsLmN1cnJlbnRUYXJnZXQ7XG4gICAgY29uc3QgJGxhYmVsRWxlbWVudCA9ICR0aGlzLmNsb3Nlc3QoJy5pbnB1dCcpO1xuICAgIGNvbnN0IGNvdW50cnkgPSAkbGFiZWxFbGVtZW50LmRhdGFzZXQuY291bnRyeTtcbiAgICBcbiAgICBpZiAoY291bnRyeSkge1xuICAgICAgY29uc3QgY2l0aWVzID0gY2l0aWVzRGF0YS5maWx0ZXIoZWwgPT4gZWwua2V5ID09PSBjb3VudHJ5KVswXS5jaXRpZXM7XG4gICAgICBjb25zdCBsb3dlckNhc2VWYWx1ZSA9ICR0aGlzLnZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCAkZHJvcGRvd25FbGVtZW50ID0gJHRoaXMuY2xvc2VzdCgnLmlucHV0JykucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duX19tZW51Jyk7XG4gICAgICBsZXQgbWF0Y2hlc0ZvdW5kID0gZmFsc2U7XG5cbiAgICAgICRkcm9wZG93bkVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgIGlmIChlbC5jdXJyZW50VGFyZ2V0LnZhbHVlICE9PSAnJykge1xuICAgICAgICBjaXRpZXMubWFwKGVsID0+IHtcbiAgICAgICAgICBpZiAoZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKGxvd2VyQ2FzZVZhbHVlKSA9PT0gMCkge1xuICAgICAgICAgICAgbWF0Y2hlc0ZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICRkcm9wZG93bkVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBgPGEgY2xhc3M9XCJpbnB1dF9fZHJvcGRvd24taXRlbVwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIj4ke2VsfTwvYT5gKVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKG1hdGNoZXNGb3VuZCkge1xuICAgICAgICAgIEFycmF5LmZyb20oJGxhYmVsRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW5wdXRfX2Ryb3Bkb3duLWl0ZW0nKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgJHRoaXMudmFsdWUgPSBlbC5pbm5lclRleHQ7XG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KSk7XG5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWF1dGgtY2l0eSBpbnB1dCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZWwgPT4ge1xuICAgIGNvbnN0ICR0aGlzID0gZWwuY3VycmVudFRhcmdldDtcbiAgICBjb25zdCAkZHJvcGRvd25FbGVtZW50ID0gJHRoaXMuY2xvc2VzdCgnLmlucHV0JykucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duX19tZW51Jyk7XG5cbiAgICAkZHJvcGRvd25FbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICB9KTtcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W25hbWU9XCJydWxlc0FncmVlbWVudFwiXScpLmxlbmd0aCkge1xuICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W25hbWU9XCJydWxlc0FncmVlbWVudFwiXScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgIGNvbnN0ICRzdWJtaXRCdXR0b24gPSBlbC5jbG9zZXN0KCdmb3JtJykucXVlcnlTZWxlY3RvcignYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcblxuICAgIGlmIChlbC5jaGVja2VkKSB7XG4gICAgICAkc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2J1dHRvbi0tZGlzYWJsZWQnKTtcbiAgICAgICRzdWJtaXRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbi0tZGlzYWJsZWQnKTtcbiAgICAgICRzdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgIH1cbiAgfSkpO1xufVxuXG59Il19
