"use strict";window.onload=function(){var e={popup:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.onHide,o=t.onShow,n=function(){document.body.style.cssText="position: fixed; margin-top: ".concat(-window.scrollY,"px")},c=function(e){document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,e)};return{isShown:function(){return e.classList.contains("popup--opened")},show:function(){var t=new Promise((function(t){e.style.display="block",t()}));n(),t.then((function(){e.classList.add("popup--opened"),"function"==typeof o&&o()}))},hide:function(){var t=-parseInt(document.body.style.marginTop);e.classList.remove("popup--opened"),setTimeout((function(){e.style.display="none",c(t),"function"==typeof r&&r()}),300)}}},validate:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,r=function(e){e.closest(".input")?e.closest(".input").classList.add("input--error"):e.closest(".textarea")&&e.closest(".textarea").classList.add("textarea--error"),e.focus()};e.querySelector('button[type="submit"]').addEventListener("click",(function(o){o.preventDefault();var n=Array.from(e.querySelectorAll("input[required], textarea[required]")),c=e.querySelectorAll(".checkboxselect");n.reverse().map((function(e){switch(e.dataset.passRepeat&&e.value!==e.closest("form").querySelector("input[data-pass]").value&&r(e),e.getAttribute("type")){case"text":case"password":""===e.value&&r(e);break;case"tel":(""===e.value||e.value.includes("_"))&&r(e);break;case"checkbox":!e.checked&&e.closest(".checkbox").classList.add("checkbox--error");break;case"email":!t.test(e.value)&&r(e);break;default:""===e.value&&r(e)}})),c.length&&Array.from(c).map((function(e){var t=!1;Array.from(e.querySelectorAll(".checkbox__input")).map((function(e){e.checked&&(t=!0)})),t||e.classList.add("checkboxselect--error")}))})),Array.from(e.querySelectorAll("input")).concat(Array.from(e.querySelectorAll("textarea"))).map((function(e){return e.addEventListener("input",(function(){e.closest(".input")?e.closest(".input").classList.remove("input--error"):e.closest(".checkbox")?e.closest(".checkbox").classList.remove("checkbox--error"):e.closest(".textarea")&&e.closest(".textarea").classList.remove("textarea--error")}))}))}};Array.from(document.querySelectorAll(".js-open-popup")).map((function(t){return t.addEventListener("click",(function(t){t.preventDefault();var r=t.currentTarget.dataset.popup,o=document.querySelector('.js-popup[data-popup="'.concat(r,'"]'));e.popup(o).show()}))})),Array.from(document.querySelectorAll(".js-close-popup")).map((function(t){return t.addEventListener("click",(function(t){if(t.preventDefault(),!t.target.closest(".popup__window")||!t.currentTarget.classList.contains("js-popup")){var r=t.currentTarget.closest(".popup");e.popup(r).hide()}}))})),document.querySelector("form[data-restore-form]")&&e.validate(document.querySelector("form[data-restore-form]")),document.addEventListener("click",(function(e){e.target.closest(".dropdown")||Array.from(document.querySelectorAll(".dropdown")).map((function(e){return e.classList.remove("dropdown--active")}))})),Array.from(document.querySelectorAll(".dropdown")).map((function(e){return e.addEventListener("click",(function(e){e.preventDefault();var t=e.currentTarget;Array.from(document.querySelectorAll(".dropdown")).map((function(e){return e!==t&&e.classList.remove("dropdown--active")})),t.classList.toggle("dropdown--active")}))})),document.addEventListener("click",(function(e){if(e.target.getAttribute("data-toggle")){var t=e.target,r=t.innerText,o=t.cloneNode(),n=t.closest(".dropdown").querySelector(".dropdown__value");o.innerText=n.innerText,n.innerText=r,t.parentNode.prepend(o),t.parentNode.removeChild(t)}})),Array.from(document.querySelectorAll(".tabs__item")).map((function(e){return e.addEventListener("click",(function(e){e.preventDefault();var t=e.currentTarget,r=t.dataset.tab;t.closest(".tabs").querySelector(".tabs__item--active").classList.remove("tabs__item--active"),t.classList.add("tabs__item--active"),t.closest("[data-tabs]").querySelector("[data-active]").removeAttribute("data-active"),t.closest("[data-tabs]").querySelector('[data-content="'.concat(r,'"]')).setAttribute("data-active",!0)}))}));var t=new Event("changeCountry");Array.from(document.querySelectorAll(".input.dropdown")).concat(Array.from(document.querySelectorAll(".input .dropdown"))).map((function(e){return e.addEventListener("click",(function(){e.closest(".input").querySelector(".input__dropdown").style.width=e.closest(".input").getBoundingClientRect().width+"px"}))})),Array.from(document.querySelectorAll(".input__dropdown-item[data-code-loc]")).map((function(e){return e.addEventListener("click",(function(){var t=e.dataset.codeLoc,r=e.dataset.mask,o=e.closest(".input").querySelector("input");e.closest(".input__code").dataset.codeLoc=t,e.closest(".input__code").dataset.mask=r,o.placeholder=r.replaceAll("9","_"),function(e,t){Inputmask({mask:t}).mask(e)}(o,r)}))})),Array.from(document.querySelectorAll(".input__dropdown-item[data-dropdown]")).map((function(e){return e.addEventListener("click",(function(){var r=e.innerText;e.closest(".input").querySelector("input").value=r,e.closest(".input").classList.remove("input--error"),e.closest(".input").classList.contains("js-auth-country")&&e.closest(".input").dispatchEvent(t)}))})),Array.from(document.querySelectorAll('input[type="tel"]')).map((function(e){Inputmask({mask:e.closest(".input").querySelector(".input__code").dataset.mask}).mask(e)})),Array.from(document.querySelectorAll(".checkboxselect__list")).map((function(e){e.addEventListener("click",(function(t){t.stopPropagation();var r=e.closest(".checkboxselect"),o=!1;r.classList.remove("checkboxselect--error"),Array.from(e.querySelectorAll(".checkbox__input")).map((function(t){var n=r.querySelector(".checkboxselect__input-placeholder");t.checked&&(o=!0),t.addEventListener("click",(function(){var t="";Array.from(e.querySelectorAll("input:checked")).map((function(e){t+=e.closest(".checkboxselect__item").querySelector(".checkbox__text").innerText+", "})),t?(n.innerText=t.substring(0,t.length-2),n.classList.add("checkboxselect__input-placeholder--active")):(n.innerText=n.dataset.placeholder,n.classList.remove("checkboxselect__input-placeholder--active"))}))})),o?r.classList.add("checkboxselect--checked"):r.classList.remove("checkboxselect--checked")})),e.fakeScroll()}));var r=document.querySelector(".cookies");JSON.parse(localStorage.getItem("letmetutor:cookiesIsHidden"))?r.remove():(r.classList.add("cookies--shown"),document.querySelector(".cookies__btn").addEventListener("click",(function(){r.classList.remove("cookies--shown"),setTimeout((function(){r.remove(),localStorage.setItem("letmetutor:cookiesIsHidden",!0)}),500)})));var o=document.querySelector(".header__banner"),n=function(){!function(e){document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,e)}(),document.querySelector(".header-menu").classList.remove("header-menu--shown")};JSON.parse(localStorage.getItem("letmetutor:bannerIsHidden"))?o.remove():(o.style.display="flex",document.querySelector(".header__banner-close").addEventListener("click",(function(){o.classList.add("header__banner--hide"),setTimeout((function(){o.remove(),localStorage.setItem("letmetutor:bannerIsHidden",!0)}),500)}))),document.querySelector(".header__burger").addEventListener("click",(function(){-parseInt(document.body.style.marginTop),document.body.style.cssText="position: fixed; margin-top: ".concat(-window.scrollY,"px"),document.querySelector(".header-menu").classList.add("header-menu--shown")})),document.querySelector(".header-menu__backdrop").addEventListener("click",n),document.querySelector(".header-menu__close").addEventListener("click",n),Array.from(document.querySelectorAll(".hero__dropdown-item")).map((function(e){return e.addEventListener("click",(function(e){var t=e.currentTarget,r=t.innerText;t.closest(".hero__input").querySelector(".hero__input-field").value=r}))})),Array.from(document.querySelectorAll(".hero__input-field")).map((function(e){var t=e,r=function(e){var r=t.nextElementSibling,o=r.querySelector(".fakeScroll__content")||r,n=JSON.parse(t.dataset.options),c=t.value.toLowerCase(),a=!1;o.innerHTML="",n.map((function(t){(e||0===t.toLowerCase().indexOf(c))&&(a=!0,o.insertAdjacentHTML("beforeend",'<a class="hero__dropdown-item dropdown__menu-item" href="javascript:void(0)">'.concat(t,"</a>")))})),a?r.classList.remove("hero__dropdown--hidden"):r.classList.add("hero__dropdown--hidden"),Array.from(o.querySelectorAll(".hero__dropdown-item")).map((function(e){return e.addEventListener("click",(function(){t.value=e.innerText,t.setAttribute("data-value",e.innerText)}))})),e&&!r.classList.contains("fakeScroll")&&o.fakeScroll()};t.addEventListener("input",(function(){return r(!1)})),t.addEventListener("focus",(function(){return r(!0)})),t.addEventListener("blur",(function(){""!==t.value&&t.dataset.value?t.value=t.dataset.value:t.value=""}))}));new Swiper(".popular__grid--mobile",{loop:!0,loopAdditionalSlides:3,spaceBetween:20,slidesPerView:"auto",centeredSlides:!0,breakpoints:{760:{slidesPerView:2,centeredSlides:!1}}}),new Swiper(".reviews__slider",{loop:!0,spaceBetween:20,slidesPerView:3,slidesPerGroup:3,loopAdditionalSlides:3,pagination:{el:".swiper-pagination",clickable:!0}}),new Swiper(".reviews__slider--mobile",{loop:!0,spaceBetween:20,loopAdditionalSlides:3,pagination:{el:".swiper-pagination",clickable:!0}});if(document.querySelector("form[data-login-form]")&&e.validate(document.querySelector("form[data-login-form]")),document.querySelector("form[data-signup-student-form]")&&e.validate(document.querySelector("form[data-signup-student-form]")),document.querySelector("form[data-signup-tutor-form]")&&e.validate(document.querySelector("form[data-signup-tutor-form]")),document.querySelector("form[data-support-form]")&&e.validate(document.querySelector("form[data-support-form]")),document.querySelectorAll(".js-auth-country").length&&Array.from(document.querySelectorAll(".js-auth-country")).map((function(e){return e.addEventListener("changeCountry",(function(t){e.closest("form").querySelector(".js-auth-city").dataset.country=t.target.querySelector("input").value}))})),document.querySelectorAll(".js-auth-city input").length){var c=[{key:"Россия",cities:["Москва","Санкт-Петербург","Казань","Нижний Новгород","Сочи","Екатеринбург","Ростов-на-Дону","Новосибирск","Тюмень","Калининград","Уфа","Красноярск","Краснодар","Челябинск","Воронеж"]},{key:"Украина",cities:["Киев","Днепр","Донецк","Запорожье","Львов","Кривой Рог","Севастополь","Николаев","Мариуполь"]}];Array.from(document.querySelectorAll(".js-auth-city input")).map((function(e){return e.addEventListener("input",(function(e){var t=e.currentTarget,r=t.closest(".input"),o=r.dataset.country;if(o){var n=c.filter((function(e){return e.key===o}))[0].cities,a=t.value.toLowerCase(),i=t.closest(".input").querySelector(".dropdown__menu"),s=!1;i.innerHTML="",""!==e.currentTarget.value&&(n.map((function(e){0===e.toLowerCase().indexOf(a)&&(s=!0,i.insertAdjacentHTML("beforeend",'<a class="input__dropdown-item" href="javascript:void(0)">'.concat(e,"</a>")))})),s&&Array.from(r.querySelectorAll(".input__dropdown-item")).map((function(e){return e.addEventListener("click",(function(){t.value=e.innerText}))})))}}))})),document.querySelector(".js-auth-city input").addEventListener("focus",(function(e){e.currentTarget.closest(".input").querySelector(".dropdown__menu").innerHTML=""}))}document.querySelectorAll('input[name="rulesAgreement"]').length&&Array.from(document.querySelectorAll('input[name="rulesAgreement"]')).map((function(e){return e.addEventListener("change",(function(){var t=e.closest("form").querySelector('button[type="submit"]');e.checked?(t.classList.remove("button--disabled"),t.removeAttribute("disabled")):(t.classList.add("button--disabled"),t.setAttribute("disabled","disabled"))}))}))};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJvbmxvYWQiLCIkYXBpIiwiJHBvcHVwIiwiX3JlZiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm9uSGlkZSIsIm9uU2hvdyIsImRvY3VtZW50Iiwic3R5bGUiLCJjb25jYXQiLCJzY3JvbGxZIiwiYm9keSIsImNzc1RleHQiLCJzY3JvbGxUbyIsIm9mZnNldCIsImlzU2hvd24iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNob3ciLCJQcm9taXNlIiwicmVzb2x2ZSIsImRpc3BsYXkiLCJoaWRlT3ZlcmZsb3ciLCJhZGQiLCJwcm9taXNlIiwiaGlkZSIsInBhcnNlSW50IiwibWFyZ2luVG9wIiwicmVtb3ZlIiwiZm9ybSIsImVtYWlsUmVnZXhwIiwic2V0SW52YWxpZElucHV0IiwiaW5wdXQiLCJjbG9zZXN0IiwidmFsaWRhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0Iiwic2V0SW52YWxpZENoZWNrYm94IiwiZnJvbSIsIiRmb3JtSW5wdXRzIiwicmV2ZXJzZSIsIm1hcCIsImVsIiwicXVlcnlTZWxlY3RvciIsInZhbHVlIiwiaW5jbHVkZXMiLCJjaGVja2VkIiwidGVzdCIsIiRjaGVja2JveFNlbGVjdCIsIkFycmF5IiwicXVlcnlTZWxlY3RvckFsbCIsImNoZWNrYm94IiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsImRhdGFzZXQiLCJwb3B1cCIsIiR0aGlzIiwidG9nZ2xlIiwiZ2V0QXR0cmlidXRlIiwibmV3VmFsdWUiLCJpbm5lclRleHQiLCIkY2xvbmVFbGVtZW50IiwiY2xvbmVOb2RlIiwiJGRyb3Bkb3duVmFsdWUiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJ1cGRhdGVNYXNrIiwiSW5wdXRtYXNrIiwibWFzayIsIiRpbnB1dCIsImNvZGVMb2MiLCJsb2MiLCJjaGFuZ2VDb3VudHJ5RXZlbnQiLCJsaXN0Iiwic3RvcFByb3BhZ2F0aW9uIiwiaXRlbSIsIiRwbGFjZWhvbGRlciIsInN1YnN0cmluZyIsImZha2VTY3JvbGwiLCIkY29va2llcyIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzZXRUaW1lb3V0Iiwic2V0SXRlbSIsInNob3dPdmVyZmxvdyIsIiRiYW5uZXIiLCJoaWRlSGVhZGVyTWVudSIsImhhbmRsZUlucHV0IiwiZmlyc3RSZW5kZXIiLCIkZHJvcGRvd25FbGVtZW50Iiwib3B0aW9ucyIsIm1hdGNoZXNGb3VuZCIsIiRkcm9wZG93biIsInRvTG93ZXJDYXNlIiwiaW5kZXhPZiIsImxvd2VyQ2FzZVZhbHVlIiwiU3dpcGVyIiwibG9vcCIsInNwYWNlQmV0d2VlbiIsImNlbnRlcmVkU2xpZGVzIiwiYnJlYWtwb2ludHMiLCI3NjAiLCJwb3B1bGFyU2xpZGVyIiwic2xpZGVzUGVyVmlldyIsImxvb3BBZGRpdGlvbmFsU2xpZGVzIiwicGFnaW5hdGlvbiIsImNsaWNrYWJsZSIsInJldmlld3NTbGlkZXIiLCJjb3VudHJ5IiwiY2l0aWVzRGF0YSIsImtleSIsImNpdGllcyIsImluc2VydEFkamFjZW50SFRNTCIsIiRsYWJlbEVsZW1lbnQiLCJmaWx0ZXIiLCJpbm5lckhUTUwiLCIkc3VibWl0QnV0dG9uIl0sIm1hcHBpbmdzIjoiYUFBQUEsT0FBT0MsT0FBUyxXQUVkLElBQUFDLEVBQUEsQ0FJRkEsTUFBQSxTQUFBQyxHQUFrRCxJQUFBQyxFQUFBQyxVQUFBQyxPQUFBLFFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFBLEdBQXJDRyxFQUFxQ0osRUFBckNJLE9BQUFDLEVBQXFDTCxFQUFyQ0ssT0FBV0QsRUFBQUEsV0FBMEJFLFNBQWxCRCxLQUFrQkUsTUFBbEJGLFFBQWtCLGdDQUFBRyxRQUFBWixPQUFBYSxRQUFBLE9BRzlDSCxFQUFjQyxTQUFBQSxHQUNmRCxTQUVESSxLQUFBSCxNQUFBSSxRQUFBLGtDQUlFZixPQUFPZ0Is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QSxTQUFBQyxHQUFBLE9BQUFBLEVBQUFSLGlCQUFBLFNBQUEsV0FiV3NCLEVBQU1aLE1BQVFGLEVBQUdrQix3QkFvQnZCNEQsU0FBQUEsY0FBY3pHLHVCQUFpQm1CLGlCQUEvQixTQUFBLFNBQUFRLEdBQ0E4RSxFQUFBQSxjQUNLeEYsUUFBQSxVQUFBVyxjQUFBLG1CQUVMNkUsVUFBY3JELE1BR25CN0QsU0FBQTRDLGlCQUFBLGdDQUFBaEQsUUExZ0JEK0MsTUFBQVgsS0FBQWhDLFNBQUE0QyxpQkFBQSxpQ0FBQVQsS0FBQSxTQUFBQyxHQUFBLE9BQUFBLEVBQUFSLGlCQUFBLFVBQUEsV0FnZ0JJLElBQU1zRixFQUFnQjlFLEVBQUdWLFFBQVEsUUFBUVcsY0FBYyx5QkFFbkRELEVBQUdJLFNBQ0wwRSxFQUFjekcsVUFBVVksT0FBTyxvQkFDL0I2RixFQUFjdEQsZ0JBQWdCLGNBRTlCc0QsRUFBY3pHLFVBQVVPLElBQUksb0JBQzVCa0csRUFBY3JELGFBQWEsV0FBWSIsImZpbGUiOiJjb21tb24ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93Lm9ubG9hZCA9ICgpID0+IHtcblxuICAvLyDQntCx0YrQtdC60YIg0LPQu9C+0LHQsNC70YzQvdC+0LPQviBBUElcbmNvbnN0ICRhcGkgPSB7fTtcblxuLy8gQVBJINC00LvRjyDRgNCw0LHQvtGC0Ysg0YEg0L/QvtC/0LDQv9Cw0LzQuFxuJGFwaS5wb3B1cCA9ICgkcG9wdXAsIHsgb25IaWRlLCBvblNob3cgfSA9IHt9KSA9PiB7XG4gIC8vINCe0YLQutC70Y7Rh9Cw0LXRgiDQstC+0LfQvNC+0LbQvdC+0YHRgtGMINGB0LrRgNC+0LvQu9C40YLRjCDRgdGC0YDQsNC90LjRhtGDXG4gIGNvbnN0IGhpZGVPdmVyZmxvdyA9ICgpID0+IHtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmNzc1RleHQgPSBgcG9zaXRpb246IGZpeGVkOyBtYXJnaW4tdG9wOiAkey13aW5kb3cuc2Nyb2xsWX1weGA7XG4gIH07XG4gIFxuICAvLyDQktC60LvRjtGH0LDQtdGCINCy0L7Qt9C80L7QttC90L7RgdGC0Ywg0YHQutGA0L7Qu9C70LjRgtGMINGB0YLRgNCw0L3QuNGG0YNcbiAgY29uc3Qgc2hvd092ZXJmbG93ID0gb2Zmc2V0ID0+IHtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmNzc1RleHQgPSAncG9zaXRpb246IHN0YXRpYzsgbWFyZ2luLXRvcDogMCc7XG4gICAgXG4gICAgd2luZG93LnNjcm9sbFRvKDAsIG9mZnNldCk7XG4gIH07XG4gIFxuICByZXR1cm4ge1xuICAgIC8vINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCIHRydWUsINC10YHQu9C4INC/0L7Qv9Cw0L8g0L/QvtC60LDQt9GL0LLQsNC10YLRgdGPLCDQsiDQuNC90L7QvCDRgdC70YPRh9Cw0LUgZmFsc2VcbiAgICBpc1Nob3duOiAoKSA9PiAkcG9wdXAuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cC0tb3BlbmVkJyksXG4gICAgLy8g0J/QvtC60LDQt9GL0LLQsNC10YIg0L/QvtC/0LDQv1xuICAgIHNob3coKSB7XG4gICAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICRwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGhpZGVPdmVyZmxvdygpO1xuXG4gICAgICBwcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAkcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXAtLW9wZW5lZCcpO1xuICAgICAgICBpZiAodHlwZW9mIG9uU2hvdyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIG9uU2hvdygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vINCh0LrRgNGL0LLQsNC10YIg0L/QvtC/0LDQv1xuICAgIGhpZGUoKSB7XG4gICAgICBjb25zdCBvZmZzZXQgPSAtcGFyc2VJbnQoZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW5Ub3ApO1xuICBcbiAgICAgICRwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cC0tb3BlbmVkJyk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgJHBvcHVwLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHNob3dPdmVyZmxvdyhvZmZzZXQpO1xuICAgICAgICBpZiAodHlwZW9mIG9uSGlkZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIG9uSGlkZSgpO1xuICAgICAgICB9XG4gICAgICB9LCAzMDApO1xuICAgIH1cbiAgfTtcbn07XG5cbi8vIEFQSSDQtNC70Y8g0LLQsNC70LjQtNCw0YbQuNC4INGE0L7RgNC8XG4kYXBpLnZhbGlkYXRlID0gZm9ybSA9PiB7XG4gIGNvbnN0IGVtYWlsUmVnZXhwID0gL14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC87XG4gIGNvbnN0IHNldEludmFsaWRJbnB1dCA9IGlucHV0ID0+IHtcbiAgICBpZiAoaW5wdXQuY2xvc2VzdCgnLmlucHV0JykpIHtcbiAgICAgIGlucHV0LmNsb3Nlc3QoJy5pbnB1dCcpLmNsYXNzTGlzdC5hZGQoJ2lucHV0LS1lcnJvcicpO1xuICAgIH0gZWxzZSBpZiAoaW5wdXQuY2xvc2VzdCgnLnRleHRhcmVhJykpIHtcbiAgICAgIGlucHV0LmNsb3Nlc3QoJy50ZXh0YXJlYScpLmNsYXNzTGlzdC5hZGQoJ3RleHRhcmVhLS1lcnJvcicpO1xuICAgIH1cbiAgICBpbnB1dC5mb2N1cygpO1xuICB9O1xuICBjb25zdCBzZXRJbnZhbGlkQ2hlY2tib3ggPSBpbnB1dCA9PiB7XG4gICAgaW5wdXQuY2xvc2VzdCgnLmNoZWNrYm94JykuY2xhc3NMaXN0LmFkZCgnY2hlY2tib3gtLWVycm9yJyk7XG4gIH07XG5cbiAgZm9ybS5xdWVyeVNlbGVjdG9yKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc3QgJGZvcm1JbnB1dHMgPSBBcnJheS5mcm9tKGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbcmVxdWlyZWRdLCB0ZXh0YXJlYVtyZXF1aXJlZF0nKSk7XG4gICAgY29uc3QgJGNoZWNrYm94U2VsZWN0ID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuY2hlY2tib3hzZWxlY3QnKTtcblxuICAgICRmb3JtSW5wdXRzLnJldmVyc2UoKS5tYXAoZWwgPT4ge1xuICAgICAgaWYgKGVsLmRhdGFzZXQucGFzc1JlcGVhdCAmJiBlbC52YWx1ZSAhPT0gZWwuY2xvc2VzdCgnZm9ybScpLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W2RhdGEtcGFzc10nKS52YWx1ZSkge1xuICAgICAgICBzZXRJbnZhbGlkSW5wdXQoZWwpO1xuICAgICAgfVxuXG4gICAgICBzd2l0Y2goZWwuZ2V0QXR0cmlidXRlKCd0eXBlJykpIHtcbiAgICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgIGNhc2UgJ3Bhc3N3b3JkJzpcbiAgICAgICAgICBlbC52YWx1ZSA9PT0gJycgJiYgc2V0SW52YWxpZElucHV0KGVsKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndGVsJzpcbiAgICAgICAgICAoZWwudmFsdWUgPT09ICcnIHx8IGVsLnZhbHVlLmluY2x1ZGVzKCdfJykpICYmIHNldEludmFsaWRJbnB1dChlbCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2NoZWNrYm94JzpcbiAgICAgICAgICAhZWwuY2hlY2tlZCAmJiBzZXRJbnZhbGlkQ2hlY2tib3goZWwpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgIWVtYWlsUmVnZXhwLnRlc3QoZWwudmFsdWUpICYmIHNldEludmFsaWRJbnB1dChlbCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgZWwudmFsdWUgPT09ICcnICYmIHNldEludmFsaWRJbnB1dChlbCk7XG4gICAgICB9XG4gICAgfSk7XG4gIFxuICAgIGlmICgkY2hlY2tib3hTZWxlY3QubGVuZ3RoKSB7XG4gICAgICBBcnJheS5mcm9tKCRjaGVja2JveFNlbGVjdCkubWFwKGVsID0+IHtcbiAgICAgICAgbGV0IGNoZWNrZWQgPSBmYWxzZTtcbiAgXG4gICAgICAgIEFycmF5LmZyb20oZWwucXVlcnlTZWxlY3RvckFsbCgnLmNoZWNrYm94X19pbnB1dCcpKS5tYXAoY2hlY2tib3ggPT4ge1xuICAgICAgICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7XG4gICAgICAgICAgICBjaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICBcbiAgICAgICAgaWYgKCFjaGVja2VkKSB7XG4gICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnY2hlY2tib3hzZWxlY3QtLWVycm9yJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG4gIEFycmF5LmZyb20oZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpKS5jb25jYXQoQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJykpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgaWYgKGVsLmNsb3Nlc3QoJy5pbnB1dCcpKSB7XG4gICAgICBlbC5jbG9zZXN0KCcuaW5wdXQnKS5jbGFzc0xpc3QucmVtb3ZlKCdpbnB1dC0tZXJyb3InKTtcbiAgICB9IGVsc2UgaWYgKGVsLmNsb3Nlc3QoJy5jaGVja2JveCcpKSB7XG4gICAgICBlbC5jbG9zZXN0KCcuY2hlY2tib3gnKS5jbGFzc0xpc3QucmVtb3ZlKCdjaGVja2JveC0tZXJyb3InKTtcbiAgICB9IGVsc2UgaWYgKGVsLmNsb3Nlc3QoJy50ZXh0YXJlYScpKSB7XG4gICAgICBlbC5jbG9zZXN0KCcudGV4dGFyZWEnKS5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0YXJlYS0tZXJyb3InKTtcbiAgICB9XG4gIH0pKTtcbn07XG5cbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtb3Blbi1wb3B1cCcpKS5tYXAoZWwgPT5cbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wb3B1cDtcbiAgICBjb25zdCAkcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuanMtcG9wdXBbZGF0YS1wb3B1cD1cIiR7dGFyZ2V0fVwiXWApO1xuICAgIFxuICAgICRhcGkucG9wdXAoJHBvcHVwKS5zaG93KCk7XG4gIH0pXG4pO1xuICBcbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWNsb3NlLXBvcHVwJykpLm1hcChlbCA9PlxuICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGlmKCFlLnRhcmdldC5jbG9zZXN0KCcucG9wdXBfX3dpbmRvdycpIHx8ICFlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1wb3B1cCcpKSB7XG4gICAgICBjb25zdCAkcG9wdXAgPSBlLmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnBvcHVwJyk7XG5cbiAgICAgICRhcGkucG9wdXAoJHBvcHVwKS5oaWRlKCk7XG4gICAgfVxuICB9KVxuKTtcblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1yZXN0b3JlLWZvcm1dJykpIHtcbiAgJGFwaS52YWxpZGF0ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtcmVzdG9yZS1mb3JtXScpKTtcbn1cbiAgLy8gY2xvc2UgZHJvcGRvd24gb24gb3V0ZXIgY2xpY2tcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gIGNvbnN0ICR0aGlzID0gZS50YXJnZXQ7XG5cbiAgaWYoISR0aGlzLmNsb3Nlc3QoJy5kcm9wZG93bicpKSB7XG4gICAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZHJvcGRvd24nKSkubWFwKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3Bkb3duLS1hY3RpdmUnKSk7XG4gIH1cbn0pO1xuXG4vLyBvcGVuIGRyb3Bkb3duXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcm9wZG93bicpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCAkdGhpcyA9IGUuY3VycmVudFRhcmdldDtcbiAgXG4gIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRyb3Bkb3duJykpLm1hcChlbCA9PiBlbCAhPT0gJHRoaXMgJiYgZWwuY2xhc3NMaXN0LnJlbW92ZSgnZHJvcGRvd24tLWFjdGl2ZScpKTtcbiAgJHRoaXMuY2xhc3NMaXN0LnRvZ2dsZSgnZHJvcGRvd24tLWFjdGl2ZScpO1xufSkpO1xuXG4vLyBjaGFuZ2UgZHJvcGRvd24gdmFsdWVcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gIGlmIChlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9nZ2xlJykpIHtcbiAgICBjb25zdCAkdGhpcyA9IGUudGFyZ2V0O1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gJHRoaXMuaW5uZXJUZXh0O1xuICAgIGNvbnN0ICRjbG9uZUVsZW1lbnQgPSAkdGhpcy5jbG9uZU5vZGUoKTtcbiAgICBjb25zdCAkZHJvcGRvd25WYWx1ZSA9ICR0aGlzLmNsb3Nlc3QoJy5kcm9wZG93bicpLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bl9fdmFsdWUnKTtcbiAgICBcbiAgICAkY2xvbmVFbGVtZW50LmlubmVyVGV4dCA9ICRkcm9wZG93blZhbHVlLmlubmVyVGV4dDtcbiAgICAkZHJvcGRvd25WYWx1ZS5pbm5lclRleHQgPSBuZXdWYWx1ZTtcbiAgICBcbiAgICAkdGhpcy5wYXJlbnROb2RlLnByZXBlbmQoJGNsb25lRWxlbWVudCk7XG4gICAgJHRoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCgkdGhpcyk7XG4gIH1cbn0pO1xuICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWJzX19pdGVtJykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3QgJHRoaXMgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gIGNvbnN0IHRhcmdldCA9ICR0aGlzLmRhdGFzZXQudGFiO1xuXG4gICR0aGlzLmNsb3Nlc3QoJy50YWJzJykucXVlcnlTZWxlY3RvcignLnRhYnNfX2l0ZW0tLWFjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ3RhYnNfX2l0ZW0tLWFjdGl2ZScpO1xuICAkdGhpcy5jbGFzc0xpc3QuYWRkKCd0YWJzX19pdGVtLS1hY3RpdmUnKTtcblxuICAkdGhpcy5jbG9zZXN0KCdbZGF0YS10YWJzXScpLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFjdGl2ZV0nKS5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtYWN0aXZlJyk7XG4gICR0aGlzLmNsb3Nlc3QoJ1tkYXRhLXRhYnNdJykucXVlcnlTZWxlY3RvcihgW2RhdGEtY29udGVudD1cIiR7dGFyZ2V0fVwiXWApLnNldEF0dHJpYnV0ZSgnZGF0YS1hY3RpdmUnLCB0cnVlKTtcbn0pKTtcbiAgY29uc3QgY2hhbmdlQ291bnRyeUV2ZW50ID0gbmV3IEV2ZW50KCdjaGFuZ2VDb3VudHJ5Jyk7XG5cbmNvbnN0IHVwZGF0ZU1hc2sgPSAoaW5wdXQsIG1hc2spID0+IHtcbiAgSW5wdXRtYXNrKHttYXNrfSkubWFzayhpbnB1dCk7XG59O1xuXG4vLyBPcGVuIGlucHV0IGRyb3Bkb3duXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dC5kcm9wZG93bicpKVxuLmNvbmNhdChBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dCAuZHJvcGRvd24nKSkpXG4ubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBlbC5jbG9zZXN0KCcuaW5wdXQnKS5xdWVyeVNlbGVjdG9yKCcuaW5wdXRfX2Ryb3Bkb3duJykuc3R5bGUud2lkdGggPSBlbC5jbG9zZXN0KCcuaW5wdXQnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCArICdweCc7XG59KSk7XG5cbi8vIENoYW5nZSBwaG9uZSBjb2RlIG9uIGlucHV0IGRyb3Bkb3duXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dF9fZHJvcGRvd24taXRlbVtkYXRhLWNvZGUtbG9jXScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0IGxvYyA9IGVsLmRhdGFzZXQuY29kZUxvYztcbiAgY29uc3QgbWFzayA9IGVsLmRhdGFzZXQubWFzaztcbiAgY29uc3QgJGlucHV0ID0gZWwuY2xvc2VzdCgnLmlucHV0JykucXVlcnlTZWxlY3RvcignaW5wdXQnKTtcblxuICBlbC5jbG9zZXN0KCcuaW5wdXRfX2NvZGUnKS5kYXRhc2V0LmNvZGVMb2MgPSBsb2M7XG4gIGVsLmNsb3Nlc3QoJy5pbnB1dF9fY29kZScpLmRhdGFzZXQubWFzayA9IG1hc2s7XG4gICRpbnB1dC5wbGFjZWhvbGRlciA9IG1hc2sucmVwbGFjZUFsbCgnOScsICdfJyk7XG4gIHVwZGF0ZU1hc2soJGlucHV0LCBtYXNrKTtcbn0pKTtcblxuLy8gQ2hhbmdlIGlucHV0IGRyb3Bkb3duIHZhbHVlXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dF9fZHJvcGRvd24taXRlbVtkYXRhLWRyb3Bkb3duXScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gZWwuaW5uZXJUZXh0O1xuICBcbiAgZWwuY2xvc2VzdCgnLmlucHV0JykucXVlcnlTZWxlY3RvcignaW5wdXQnKS52YWx1ZSA9IHZhbHVlO1xuICBlbC5jbG9zZXN0KCcuaW5wdXQnKS5jbGFzc0xpc3QucmVtb3ZlKCdpbnB1dC0tZXJyb3InKTtcblxuICBpZiAoZWwuY2xvc2VzdCgnLmlucHV0JykuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1hdXRoLWNvdW50cnknKSkge1xuICAgIGVsLmNsb3Nlc3QoJy5pbnB1dCcpLmRpc3BhdGNoRXZlbnQoY2hhbmdlQ291bnRyeUV2ZW50KTtcbiAgfVxufSkpO1xuXG4vLyBNYXNraW5nIHBob25lIGlucHV0XG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJ0ZWxcIl0nKSkubWFwKGVsID0+IHtcbiAgSW5wdXRtYXNrKHttYXNrOiBlbC5jbG9zZXN0KCcuaW5wdXQnKS5xdWVyeVNlbGVjdG9yKCcuaW5wdXRfX2NvZGUnKS5kYXRhc2V0Lm1hc2t9KS5tYXNrKGVsKTtcbn0pO1xuICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGVja2JveHNlbGVjdF9fbGlzdCcpKS5tYXAobGlzdCA9PiB7XG4gIGxpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICBcbiAgICBjb25zdCAkY2hlY2tib3hTZWxlY3QgPSBsaXN0LmNsb3Nlc3QoJy5jaGVja2JveHNlbGVjdCcpO1xuICAgIGxldCBjaGVja2VkID0gZmFsc2U7XG5cbiAgICAkY2hlY2tib3hTZWxlY3QuY2xhc3NMaXN0LnJlbW92ZSgnY2hlY2tib3hzZWxlY3QtLWVycm9yJyk7XG5cbiAgICBBcnJheS5mcm9tKGxpc3QucXVlcnlTZWxlY3RvckFsbCgnLmNoZWNrYm94X19pbnB1dCcpKS5tYXAoY2hlY2tib3ggPT4ge1xuICAgICAgY29uc3QgJHBsYWNlaG9sZGVyID0gJGNoZWNrYm94U2VsZWN0LnF1ZXJ5U2VsZWN0b3IoJy5jaGVja2JveHNlbGVjdF9faW5wdXQtcGxhY2Vob2xkZXInKTtcblxuICAgICAgaWYgKGNoZWNrYm94LmNoZWNrZWQpIGNoZWNrZWQgPSB0cnVlO1xuXG4gICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgbGV0IHZhbHVlID0gJyc7XG5cbiAgICAgICAgQXJyYXkuZnJvbShsaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0OmNoZWNrZWQnKSkubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgIHZhbHVlICs9IGl0ZW0uY2xvc2VzdCgnLmNoZWNrYm94c2VsZWN0X19pdGVtJykucXVlcnlTZWxlY3RvcignLmNoZWNrYm94X190ZXh0JykuaW5uZXJUZXh0ICsgJywgJztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgJHBsYWNlaG9sZGVyLmlubmVyVGV4dCA9IHZhbHVlLnN1YnN0cmluZygwLCB2YWx1ZS5sZW5ndGggLSAyKTtcbiAgICAgICAgICAkcGxhY2Vob2xkZXIuY2xhc3NMaXN0LmFkZCgnY2hlY2tib3hzZWxlY3RfX2lucHV0LXBsYWNlaG9sZGVyLS1hY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkcGxhY2Vob2xkZXIuaW5uZXJUZXh0ID0gJHBsYWNlaG9sZGVyLmRhdGFzZXQucGxhY2Vob2xkZXI7XG4gICAgICAgICAgJHBsYWNlaG9sZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2NoZWNrYm94c2VsZWN0X19pbnB1dC1wbGFjZWhvbGRlci0tYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICBcbiAgICBpZiAoY2hlY2tlZCkge1xuICAgICAgJGNoZWNrYm94U2VsZWN0LmNsYXNzTGlzdC5hZGQoJ2NoZWNrYm94c2VsZWN0LS1jaGVja2VkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRjaGVja2JveFNlbGVjdC5jbGFzc0xpc3QucmVtb3ZlKCdjaGVja2JveHNlbGVjdC0tY2hlY2tlZCcpO1xuICAgIH1cbiAgfSk7XG5cbiAgbGlzdC5mYWtlU2Nyb2xsKCk7XG59KTtcblxuICBjb25zdCAkY29va2llcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb29raWVzJyk7XG5cbmlmICghSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGV0bWV0dXRvcjpjb29raWVzSXNIaWRkZW4nKSkpIHtcbiAgJGNvb2tpZXMuY2xhc3NMaXN0LmFkZCgnY29va2llcy0tc2hvd24nKTtcblxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29va2llc19fYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgJGNvb2tpZXMuY2xhc3NMaXN0LnJlbW92ZSgnY29va2llcy0tc2hvd24nKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICRjb29raWVzLnJlbW92ZSgpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xldG1ldHV0b3I6Y29va2llc0lzSGlkZGVuJywgdHJ1ZSk7XG4gICAgfSwgNTAwKVxuICB9KTtcbn0gZWxzZSB7XG4gICRjb29raWVzLnJlbW92ZSgpO1xufVxuICBsZXQgb2Zmc2V0ID0gMDtcbmNvbnN0ICRiYW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19iYW5uZXInKTtcbmNvbnN0IGhpZGVPdmVyZmxvdyA9ICgpID0+IHtcbiAgb2Zmc2V0ID0gLXBhcnNlSW50KGRvY3VtZW50LmJvZHkuc3R5bGUubWFyZ2luVG9wKTtcbiAgZG9jdW1lbnQuYm9keS5zdHlsZS5jc3NUZXh0ID0gYHBvc2l0aW9uOiBmaXhlZDsgbWFyZ2luLXRvcDogJHstd2luZG93LnNjcm9sbFl9cHhgO1xufTtcbmNvbnN0IHNob3dPdmVyZmxvdyA9IG9mZnNldCA9PiB7XG4gIGRvY3VtZW50LmJvZHkuc3R5bGUuY3NzVGV4dCA9ICdwb3NpdGlvbjogc3RhdGljOyBtYXJnaW4tdG9wOiAwJztcbiAgd2luZG93LnNjcm9sbFRvKDAsIG9mZnNldCk7XG59O1xuY29uc3QgaGlkZUhlYWRlck1lbnUgPSAoKSA9PiB7XG4gIHNob3dPdmVyZmxvdygpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLW1lbnUnKS5jbGFzc0xpc3QucmVtb3ZlKCdoZWFkZXItbWVudS0tc2hvd24nKTtcbn07XG5cbmlmICghSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGV0bWV0dXRvcjpiYW5uZXJJc0hpZGRlbicpKSkge1xuICAkYmFubmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2Jhbm5lci1jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICRiYW5uZXIuY2xhc3NMaXN0LmFkZCgnaGVhZGVyX19iYW5uZXItLWhpZGUnKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICRiYW5uZXIucmVtb3ZlKCk7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbGV0bWV0dXRvcjpiYW5uZXJJc0hpZGRlbicsIHRydWUpO1xuICAgIH0sIDUwMClcbiAgfSk7XG59IGVsc2Uge1xuICAkYmFubmVyLnJlbW92ZSgpO1xufVxuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19idXJnZXInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgaGlkZU92ZXJmbG93KCk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItbWVudScpLmNsYXNzTGlzdC5hZGQoJ2hlYWRlci1tZW51LS1zaG93bicpO1xufSk7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItbWVudV9fYmFja2Ryb3AnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhpZGVIZWFkZXJNZW51KTtcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItbWVudV9fY2xvc2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhpZGVIZWFkZXJNZW51KTtcbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaGVyb19fZHJvcGRvd24taXRlbScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgY29uc3QgJHRoaXMgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gIGNvbnN0IHZhbHVlID0gJHRoaXMuaW5uZXJUZXh0O1xuXG4gICR0aGlzLmNsb3Nlc3QoJy5oZXJvX19pbnB1dCcpLnF1ZXJ5U2VsZWN0b3IoJy5oZXJvX19pbnB1dC1maWVsZCcpLnZhbHVlID0gdmFsdWU7XG59KSk7XG5cbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhlcm9fX2lucHV0LWZpZWxkJykpLm1hcChlbCA9PiB7XG4gIGNvbnN0ICR0aGlzID0gZWw7XG4gIGNvbnN0IGhhbmRsZUlucHV0ID0gZmlyc3RSZW5kZXIgPT4ge1xuICAgIGNvbnN0ICRkcm9wZG93bkVsZW1lbnQgPSAkdGhpcy5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgY29uc3QgJGRyb3Bkb3duID0gJGRyb3Bkb3duRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZmFrZVNjcm9sbF9fY29udGVudCcpIHx8ICRkcm9wZG93bkVsZW1lbnQ7XG4gICAgY29uc3Qgb3B0aW9ucyA9IEpTT04ucGFyc2UoJHRoaXMuZGF0YXNldC5vcHRpb25zKTtcbiAgICBjb25zdCBsb3dlckNhc2VWYWx1ZSA9ICR0aGlzLnZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgbGV0IG1hdGNoZXNGb3VuZCA9IGZhbHNlO1xuXG4gICAgJGRyb3Bkb3duLmlubmVySFRNTCA9ICcnO1xuICBcbiAgICBvcHRpb25zLm1hcChlbCA9PiB7XG4gICAgICBpZiAoZmlyc3RSZW5kZXIgfHwgZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKGxvd2VyQ2FzZVZhbHVlKSA9PT0gMCkge1xuICAgICAgICBtYXRjaGVzRm91bmQgPSB0cnVlO1xuICAgICAgICAkZHJvcGRvd24uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBgPGEgY2xhc3M9XCJoZXJvX19kcm9wZG93bi1pdGVtIGRyb3Bkb3duX19tZW51LWl0ZW1cIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCI+JHtlbH08L2E+YClcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChtYXRjaGVzRm91bmQpIHtcbiAgICAgICRkcm9wZG93bkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGVyb19fZHJvcGRvd24tLWhpZGRlbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZHJvcGRvd25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hlcm9fX2Ryb3Bkb3duLS1oaWRkZW4nKTtcbiAgICB9XG5cbiAgICBBcnJheS5mcm9tKCRkcm9wZG93bi5xdWVyeVNlbGVjdG9yQWxsKCcuaGVyb19fZHJvcGRvd24taXRlbScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAkdGhpcy52YWx1ZSA9IGVsLmlubmVyVGV4dDtcbiAgICAgICR0aGlzLnNldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScsIGVsLmlubmVyVGV4dCk7XG4gICAgfSkpO1xuXG4gICAgaWYgKGZpcnN0UmVuZGVyICYmICEkZHJvcGRvd25FbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZmFrZVNjcm9sbCcpKSB7XG4gICAgICAkZHJvcGRvd24uZmFrZVNjcm9sbCgpO1xuICAgIH1cbiAgfTtcblxuICAkdGhpcy5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IGhhbmRsZUlucHV0KGZhbHNlKSk7XG4gICR0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4gaGFuZGxlSW5wdXQodHJ1ZSkpO1xuICAkdGhpcy5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4ge1xuICAgIGlmICgkdGhpcy52YWx1ZSA9PT0gJycgfHwgISR0aGlzLmRhdGFzZXQudmFsdWUpIHtcbiAgICAgICR0aGlzLnZhbHVlID0gJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0aGlzLnZhbHVlID0gJHRoaXMuZGF0YXNldC52YWx1ZTtcbiAgICB9XG4gIH0pO1xufSk7XG4gIGNvbnN0IHBvcHVsYXJTbGlkZXIgPSBuZXcgU3dpcGVyKCcucG9wdWxhcl9fZ3JpZC0tbW9iaWxlJywge1xuICBsb29wOiB0cnVlLFxuICBsb29wQWRkaXRpb25hbFNsaWRlczogMyxcbiAgc3BhY2VCZXR3ZWVuOiAyMCxcbiAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxuICBjZW50ZXJlZFNsaWRlczogdHJ1ZSxcbiAgYnJlYWtwb2ludHM6IHtcbiAgICA3NjA6IHtcbiAgICAgIHNsaWRlc1BlclZpZXc6IDIsXG4gICAgICBjZW50ZXJlZFNsaWRlczogZmFsc2VcbiAgICB9XG4gIH1cbn0pO1xuICBjb25zdCByZXZpZXdzU2xpZGVyID0gbmV3IFN3aXBlcignLnJldmlld3NfX3NsaWRlcicsIHtcbiAgbG9vcDogdHJ1ZSxcbiAgc3BhY2VCZXR3ZWVuOiAyMCxcbiAgc2xpZGVzUGVyVmlldzogMyxcbiAgc2xpZGVzUGVyR3JvdXA6IDMsXG4gIGxvb3BBZGRpdGlvbmFsU2xpZGVzOiAzLFxuICBwYWdpbmF0aW9uOiB7XG4gICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxuICAgIGNsaWNrYWJsZTogdHJ1ZVxuICB9XG59KTtcblxuY29uc3QgcmV2aWV3U2xpZGVyTW9iaWxlID0gbmV3IFN3aXBlcignLnJldmlld3NfX3NsaWRlci0tbW9iaWxlJywge1xuICBsb29wOiB0cnVlLFxuICBzcGFjZUJldHdlZW46IDIwLFxuICBsb29wQWRkaXRpb25hbFNsaWRlczogMyxcbiAgcGFnaW5hdGlvbjoge1xuICAgIGVsOiAnLnN3aXBlci1wYWdpbmF0aW9uJyxcbiAgICBjbGlja2FibGU6IHRydWVcbiAgfVxufSk7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtbG9naW4tZm9ybV0nKSkge1xuICAkYXBpLnZhbGlkYXRlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1sb2dpbi1mb3JtXScpKTtcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1zaWdudXAtc3R1ZGVudC1mb3JtXScpKSB7XG4gICRhcGkudmFsaWRhdGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXNpZ251cC1zdHVkZW50LWZvcm1dJykpO1xufVxuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXNpZ251cC10dXRvci1mb3JtXScpKSB7XG4gICRhcGkudmFsaWRhdGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXNpZ251cC10dXRvci1mb3JtXScpKTtcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1zdXBwb3J0LWZvcm1dJykpIHtcbiAgJGFwaS52YWxpZGF0ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtc3VwcG9ydC1mb3JtXScpKTtcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1hdXRoLWNvdW50cnknKS5sZW5ndGgpIHtcbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtYXV0aC1jb3VudHJ5JykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2VDb3VudHJ5JywgZSA9PiB7XG4gICAgZWwuY2xvc2VzdCgnZm9ybScpLnF1ZXJ5U2VsZWN0b3IoJy5qcy1hdXRoLWNpdHknKS5kYXRhc2V0LmNvdW50cnkgPSBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLnZhbHVlO1xuICB9KSk7XG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtYXV0aC1jaXR5IGlucHV0JykubGVuZ3RoKSB7XG4gIGNvbnN0IGNpdGllc0RhdGEgPSBbe1xuICAgIFwia2V5XCI6IFwi0KDQvtGB0YHQuNGPXCIsXG4gICAgXCJjaXRpZXNcIjogW1xuICAgICAgXCLQnNC+0YHQutCy0LBcIixcbiAgICAgIFwi0KHQsNC90LrRgi3Qn9C10YLQtdGA0LHRg9GA0LNcIixcbiAgICAgIFwi0JrQsNC30LDQvdGMXCIsXG4gICAgICBcItCd0LjQttC90LjQuSDQndC+0LLQs9C+0YDQvtC0XCIsXG4gICAgICBcItCh0L7Rh9C4XCIsXG4gICAgICBcItCV0LrQsNGC0LXRgNC40L3QsdGD0YDQs1wiLFxuICAgICAgXCLQoNC+0YHRgtC+0LIt0L3QsC3QlNC+0L3Rg1wiLFxuICAgICAgXCLQndC+0LLQvtGB0LjQsdC40YDRgdC6XCIsXG4gICAgICBcItCi0Y7QvNC10L3RjFwiLFxuICAgICAgXCLQmtCw0LvQuNC90LjQvdCz0YDQsNC0XCIsXG4gICAgICBcItCj0YTQsFwiLFxuICAgICAgXCLQmtGA0LDRgdC90L7Rj9GA0YHQulwiLFxuICAgICAgXCLQmtGA0LDRgdC90L7QtNCw0YBcIixcbiAgICAgIFwi0KfQtdC70Y/QsdC40L3RgdC6XCIsXG4gICAgICBcItCS0L7RgNC+0L3QtdC2XCJcbiAgICBdXG4gIH0sXG4gIHtcImtleVwiOiBcItCj0LrRgNCw0LjQvdCwXCIsXG4gICAgXCJjaXRpZXNcIjogW1xuICAgICAgXCLQmtC40LXQslwiLFxuICAgICAgXCLQlNC90LXQv9GAXCIsXG4gICAgICBcItCU0L7QvdC10YbQulwiLFxuICAgICAgXCLQl9Cw0L/QvtGA0L7QttGM0LVcIixcbiAgICAgIFwi0JvRjNCy0L7QslwiLFxuICAgICAgXCLQmtGA0LjQstC+0Lkg0KDQvtCzXCIsXG4gICAgICBcItCh0LXQstCw0YHRgtC+0L/QvtC70YxcIixcbiAgICAgIFwi0J3QuNC60L7Qu9Cw0LXQslwiLFxuICAgICAgXCLQnNCw0YDQuNGD0L/QvtC70YxcIlxuICAgIF1cbiAgfV07XG5cbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtYXV0aC1jaXR5IGlucHV0JykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGVsID0+IHtcbiAgICBjb25zdCAkdGhpcyA9IGVsLmN1cnJlbnRUYXJnZXQ7XG4gICAgY29uc3QgJGxhYmVsRWxlbWVudCA9ICR0aGlzLmNsb3Nlc3QoJy5pbnB1dCcpO1xuICAgIGNvbnN0IGNvdW50cnkgPSAkbGFiZWxFbGVtZW50LmRhdGFzZXQuY291bnRyeTtcbiAgICBcbiAgICBpZiAoY291bnRyeSkge1xuICAgICAgY29uc3QgY2l0aWVzID0gY2l0aWVzRGF0YS5maWx0ZXIoZWwgPT4gZWwua2V5ID09PSBjb3VudHJ5KVswXS5jaXRpZXM7XG4gICAgICBjb25zdCBsb3dlckNhc2VWYWx1ZSA9ICR0aGlzLnZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCAkZHJvcGRvd25FbGVtZW50ID0gJHRoaXMuY2xvc2VzdCgnLmlucHV0JykucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duX19tZW51Jyk7XG4gICAgICBsZXQgbWF0Y2hlc0ZvdW5kID0gZmFsc2U7XG5cbiAgICAgICRkcm9wZG93bkVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgIGlmIChlbC5jdXJyZW50VGFyZ2V0LnZhbHVlICE9PSAnJykge1xuICAgICAgICBjaXRpZXMubWFwKGVsID0+IHtcbiAgICAgICAgICBpZiAoZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKGxvd2VyQ2FzZVZhbHVlKSA9PT0gMCkge1xuICAgICAgICAgICAgbWF0Y2hlc0ZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICRkcm9wZG93bkVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBgPGEgY2xhc3M9XCJpbnB1dF9fZHJvcGRvd24taXRlbVwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIj4ke2VsfTwvYT5gKVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKG1hdGNoZXNGb3VuZCkge1xuICAgICAgICAgIEFycmF5LmZyb20oJGxhYmVsRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW5wdXRfX2Ryb3Bkb3duLWl0ZW0nKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgJHRoaXMudmFsdWUgPSBlbC5pbm5lclRleHQ7XG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KSk7XG5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWF1dGgtY2l0eSBpbnB1dCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZWwgPT4ge1xuICAgIGNvbnN0ICR0aGlzID0gZWwuY3VycmVudFRhcmdldDtcbiAgICBjb25zdCAkZHJvcGRvd25FbGVtZW50ID0gJHRoaXMuY2xvc2VzdCgnLmlucHV0JykucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duX19tZW51Jyk7XG5cbiAgICAkZHJvcGRvd25FbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICB9KTtcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W25hbWU9XCJydWxlc0FncmVlbWVudFwiXScpLmxlbmd0aCkge1xuICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W25hbWU9XCJydWxlc0FncmVlbWVudFwiXScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgIGNvbnN0ICRzdWJtaXRCdXR0b24gPSBlbC5jbG9zZXN0KCdmb3JtJykucXVlcnlTZWxlY3RvcignYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcblxuICAgIGlmIChlbC5jaGVja2VkKSB7XG4gICAgICAkc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2J1dHRvbi0tZGlzYWJsZWQnKTtcbiAgICAgICRzdWJtaXRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbi0tZGlzYWJsZWQnKTtcbiAgICAgICRzdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgIH1cbiAgfSkpO1xufVxuXG59Il19
