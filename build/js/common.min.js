"use strict";window.onload=function(){var e={popup:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.onHide,o=t.onShow,n=function(){document.body.style.cssText="position: fixed; margin-top: ".concat(-window.scrollY,"px")},c=function(e){document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,e)};return{isShown:function(){return e.classList.contains("popup--opened")},show:function(){var t=new Promise((function(t){e.style.display="block",t()}));n(),t.then((function(){e.classList.add("popup--opened"),"function"==typeof o&&o()}))},hide:function(){var t=-parseInt(document.body.style.marginTop);e.classList.remove("popup--opened"),setTimeout((function(){e.style.display="none",c(t),"function"==typeof r&&r()}),300)}}},validate:function(e,t){var r=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,o=function(e){e.closest(".input")?e.closest(".input").classList.add("input--error"):e.closest(".textarea")&&e.closest(".textarea").classList.add("textarea--error"),e.focus()};e.querySelector('button[type="submit"]').addEventListener("click",(function(n){n.preventDefault();var c=!0,a=Array.from(e.querySelectorAll("input[required], textarea[required]")),s=e.querySelectorAll(".checkboxselect");a.reverse().map((function(e){switch(e.dataset.passRepeat&&e.value!==e.closest("form").querySelector("input[data-pass]").value&&o(e),e.getAttribute("type")){case"text":case"password":""===e.value&&(o(e),c=!1);break;case"tel":(""===e.value||e.value.includes("_"))&&(o(e),c=!1);break;case"checkbox":e.checked||(e.closest(".checkbox").classList.add("checkbox--error"),c=!1);break;case"email":r.test(e.value)||(o(e),c=!1);break;default:""===e.value&&(o(e),c=!1)}})),s.length&&Array.from(s).map((function(e){var t=!1;Array.from(e.querySelectorAll(".checkbox__input")).map((function(e){e.checked&&(t=!0)})),t||(e.classList.add("checkboxselect--error"),c=!1)})),c&&t()})),Array.from(e.querySelectorAll("input")).concat(Array.from(e.querySelectorAll("textarea"))).map((function(e){return e.addEventListener("input",(function(){e.closest(".input")?e.closest(".input").classList.remove("input--error"):e.closest(".checkbox")?e.closest(".checkbox").classList.remove("checkbox--error"):e.closest(".textarea")&&e.closest(".textarea").classList.remove("textarea--error")}))}))}};Array.from(document.querySelectorAll(".js-open-popup")).map((function(t){return t.addEventListener("click",(function(t){t.preventDefault();var r=t.currentTarget.dataset.popup,o=document.querySelector('.js-popup[data-popup="'.concat(r,'"]'));e.popup(o).show()}))})),Array.from(document.querySelectorAll(".js-close-popup")).map((function(t){return t.addEventListener("click",(function(t){if(!t.target.closest(".popup__window")||!t.currentTarget.classList.contains("js-popup")){var r=t.currentTarget.closest(".popup");e.popup(r).hide()}}))})),document.querySelector("form[data-restore-form]")&&e.validate(document.querySelector("form[data-restore-form]"),(function(){})),document.querySelector("form[data-request-auth-form]")&&e.validate(document.querySelector("form[data-request-auth-form]"),(function(){})),document.querySelector("form[data-request-form]")&&e.validate(document.querySelector("form[data-request-form]"),(function(){var t=document.querySelector('.js-popup[data-popup="request"]'),r=document.querySelector('.js-popup[data-popup="request-success"]');e.popup(t,{onHide:function(){Array.from(t.querySelectorAll("input")).map((function(e){return e.value=""})),e.popup(r).show()}}).hide()})),document.querySelector("form[data-request-specific-form]")&&e.validate(document.querySelector("form[data-request-specific-form]"),(function(){var t=document.querySelector('.js-popup[data-popup="request-specific"]'),r=document.querySelector('.js-popup[data-popup="request-success"]');e.popup(t,{onHide:function(){Array.from(t.querySelectorAll("input")).map((function(e){return e.value=""})),e.popup(r).show()}}).hide()}));var t=Array.from(document.querySelectorAll(".dropdown"));document.addEventListener("click",(function(e){var r=e.target;t.map((function(e){e.closest(".dropdown")!==r.closest(".dropdown")&&e.classList.remove("dropdown--active")}))})),t.map((function(e){return e.addEventListener("click",(function(r){e.classList.contains("input__code")&&r.preventDefault(),e.classList.contains("dropdown--active")||(t.map((function(e){return e!=e&&e.classList.remove("dropdown--active")})),e.classList.toggle("dropdown--active"))}))})),document.addEventListener("click",(function(e){var t=e.target.closest(".dropdown__menu-item");if(t&&(document.querySelector(".dropdown--active").classList.remove("dropdown--active"),t.getAttribute("data-toggle"))){var r=e.target,o=r.innerText,n=r.closest(".dropdown__menu").querySelector(".dropdown__menu-item--hidden"),c=r.closest(".dropdown").querySelector(".dropdown__value");n&&n.classList.remove("dropdown__menu-item--hidden"),t.classList.add("dropdown__menu-item--hidden"),c.innerText=o}})),Array.from(document.querySelectorAll(".tabs__item")).map((function(e){return e.addEventListener("click",(function(t){t.preventDefault();var r=e.dataset.tab,o=e.closest("[data-tabs]").querySelector("[data-active]");e.closest(".tabs").querySelector(".tabs__item--active").classList.remove("tabs__item--active"),e.classList.add("tabs__item--active"),o&&(e.closest("[data-tabs]").querySelector("[data-active]").removeAttribute("data-active"),e.closest("[data-tabs]").querySelector('[data-content="'.concat(r,'"]')).setAttribute("data-active",!0))}))}));var r=new Event("changeCountry");Array.from(document.querySelectorAll(".input.dropdown")).concat(Array.from(document.querySelectorAll(".input .dropdown"))).map((function(e){return e.addEventListener("click",(function(){var t=e.querySelector(".dropdown__menu");e.closest(".input").querySelector(".input__dropdown").style.width=e.closest(".input").getBoundingClientRect().width+"px",t.classList.contains("fakeScroll")||t.fakeScroll()}))})),Array.from(document.querySelectorAll(".input__dropdown-item[data-code-loc]")).map((function(e){return e.addEventListener("click",(function(){var t=e.dataset.codeLoc,r=e.dataset.mask,o=e.closest(".input").querySelector("input");e.closest(".input__code").dataset.codeLoc=t,e.closest(".input__code").dataset.mask=r,o.placeholder=r.replaceAll("9","_"),function(e,t){Inputmask({mask:t}).mask(e)}(o,r)}))})),Array.from(document.querySelectorAll(".input__dropdown-item[data-dropdown]")).map((function(e){return e.addEventListener("click",(function(){var t=e.innerText;e.closest(".input").querySelector("input").value=t,e.closest(".input").classList.remove("input--error"),e.closest(".input").classList.contains("js-auth-country")&&e.closest(".input").dispatchEvent(r)}))})),Array.from(document.querySelectorAll('input[type="tel"]')).map((function(e){Inputmask({mask:e.closest(".input").querySelector(".input__code").dataset.mask}).mask(e)})),Array.from(document.querySelectorAll(".checkboxselect__list")).map((function(e){e.addEventListener("click",(function(t){t.stopPropagation();var r=e.closest(".checkboxselect"),o=!1;r.classList.remove("checkboxselect--error"),Array.from(e.querySelectorAll(".checkbox__input")).map((function(t){var n=r.querySelector(".checkboxselect__input-placeholder");t.checked&&(o=!0),t.addEventListener("click",(function(){var t="";Array.from(e.querySelectorAll("input:checked")).map((function(e){t+=e.closest(".checkboxselect__item").querySelector(".checkbox__text").innerText+", "})),t?(n.innerText=t.substring(0,t.length-2),n.classList.add("checkboxselect__input-placeholder--active")):(n.innerText=n.dataset.placeholder,n.classList.remove("checkboxselect__input-placeholder--active"))}))})),o?r.classList.add("checkboxselect--checked"):r.classList.remove("checkboxselect--checked")})),e.fakeScroll()}));var o=["Москва","Санкт-Петербург","Казань","Нижний Новгород","Сочи","Екатеринбург","Ростов-на-Дону","Новосибирск","Тюмень","Калининград","Уфа","Красноярск","Краснодар","Челябинск","Воронеж","Киев","Днепр","Донецк","Запорожье","Львов","Кривой Рог","Севастополь","Николаев","Мариуполь"];Array.from(document.querySelectorAll(".filters__dropdown-item")).map((function(e){return e.addEventListener("click",(function(e){var t=e.currentTarget,r=t.innerText;t.closest(".filters__input").querySelector(".filters__input-field").value=r}))})),Array.from(document.querySelectorAll(".filters__input-field")).map((function(e){var t=e,r=function(e){var r=t.nextElementSibling.querySelector(".filters__dropdown-inner"),n=r.querySelector(".fakeScroll__content")||r,c="location"===t.getAttribute("name"),a=c?o:JSON.parse(t.dataset.options),s=t.value.toLowerCase(),i=n.closest(".filters__dropdown").querySelector('input[type="checkbox"]'),l=!1;n.innerHTML="",a.map((function(t){if(e||0===t.toLowerCase().indexOf(s)){var r=c?'<a class="filters__dropdown-item dropdown__menu-item'.concat(s&&!e?" filters__dropdown-item--smart":"",'" href="javascript:void(0)"><span>').concat(t.substr(0,s.length),"</span>").concat(t.substr(s.length),"</a>"):'<a class="filters__dropdown-item dropdown__menu-item" href="javascript:void(0)">'.concat(t,"</a>");l=!0,n.insertAdjacentHTML("beforeend",r)}})),l?(r.parentNode.classList.remove("filters__dropdown--hidden"),r.parentNode.classList.remove("filters__dropdown--empty")):i?r.parentNode.classList.add("filters__dropdown--empty"):r.parentNode.classList.add("filters__dropdown--hidden"),Array.from(n.querySelectorAll(".filters__dropdown-item")).map((function(e){return e.addEventListener("click",(function(){t.value=e.innerText,t.setAttribute("data-value",e.innerText),i&&(i.checked=!1,t.removeAttribute("readonly"))}))})),e&&!r.classList.contains("fakeScroll")&&n.fakeScroll()};"cost"!==t.name&&(t.addEventListener("input",(function(){return r(!1)})),t.addEventListener("focus",(function(){return r(!0)})),t.addEventListener("blur",(function(){""!==t.value&&t.dataset.value?t.value=t.dataset.value:t.value=""})))})),Array.from(document.querySelectorAll(".filters__cost-range")).map((function(e){var t=+e.dataset.min,r=+e.dataset.max;noUiSlider.create(e,{start:[t,r],connect:!0,range:{min:t,max:r},step:100}),e.noUiSlider.on("slide",(function(t){var r=parseInt(t[0]),o=parseInt(t[1]);e.closest(".filters__input").querySelector(".filters__input-field").value="".concat(r," ₽ – ").concat(o," ₽"),e.closest(".filters__cost").querySelector('[data-cost="from"]').innerText=r,e.closest(".filters__cost").querySelector('[data-cost="to"]').innerText=o}))})),Array.from(document.querySelectorAll(".filters__dropdown-checkbox")).map((function(e){return e.addEventListener("click",(function(){var t=e.closest(".filters__input").querySelector(".filters__input-field");if(e.querySelector("input").checked){var r=e.querySelector(".checkbox__text").innerText;t.value=r,t.setAttribute("data-value",r),t.setAttribute("readonly","readonly")}else t.value="",t.setAttribute("data-value",""),t.removeAttribute("readonly")}))})),Array.from(document.querySelectorAll(".js-tutorcard-more")).map((function(e){return e.addEventListener("click",(function(){e.style.display="none",Array.from(e.closest(".tutorcard__subjects").querySelectorAll(".tutorcard__subjects-item--hidden")).map((function(e){e.classList.remove("tutorcard__subjects-item--hidden")}))}))}));var n=document.querySelector(".profile-about__video-cover");if(n&&n.addEventListener("click",(function(){n.classList.add("profile-about__video-cover--hidden"),n.parentNode.querySelector("video").play()})),document.querySelector(".profile-schedule")){var c=document.querySelector(".profile-schedule__timezone-menu");c.classList.contains("fakeScroll")||c.fakeScroll()}var a=function(){var e=document.querySelector(".profile-schedule__unit--current"),t=document.querySelector('.js-popup[data-popup="request-specific"]');e&&setTimeout((function(){var r=e.dataset.date,o=e.querySelector(".profile-schedule__time-value").innerText;document.querySelector(".profile-schedule__pick").classList.add("profile-schedule__pick--active"),document.querySelector(".profile-schedule__pick-date").innerText=r,document.querySelector(".profile-schedule__pick-time").innerText=o,t&&(t.querySelector(".popup__heading-date").innerText=r,t.querySelector(".popup__heading-time").innerText=o,t.querySelector('input[name="time"]').value=o)}),0)},s=document.querySelector(".profile-schedule__controls-button--prev"),i=document.querySelector(".profile-schedule__controls-button--next");s&&s.addEventListener("click",(function(){var e=document.querySelector(".profile-schedule__slide--active"),t=+e.dataset.slide,r=document.querySelector('.profile-schedule__slide[data-slide="'.concat(t-1,'"]'));r&&(e.classList.remove("profile-schedule__slide--active"),r.classList.add("profile-schedule__slide--active"),document.querySelector(".profile-schedule__controls-button--next").classList.remove("profile-schedule__controls-button--disabled"),document.querySelector(".profile-schedule__controls-dates").innerText=r.dataset.dates,r.dataset.first&&s.classList.add("profile-schedule__controls-button--disabled"))})),i&&i.addEventListener("click",(function(){var e=document.querySelector(".profile-schedule__slide--active"),t=+e.dataset.slide,r=document.querySelector('.profile-schedule__slide[data-slide="'.concat(t+1,'"]'));r&&(e.classList.remove("profile-schedule__slide--active"),r.classList.add("profile-schedule__slide--active"),document.querySelector(".profile-schedule__controls-button--prev").classList.remove("profile-schedule__controls-button--disabled"),document.querySelector(".profile-schedule__controls-dates").innerText=r.dataset.dates,r.dataset.last&&i.classList.add("profile-schedule__controls-button--disabled"))})),Array.from(document.querySelectorAll(".profile-schedule__unit")).map((function(e){return e.addEventListener("click",(function(t){if(!t.target.closest(".profile-schedule__time")){var r=document.querySelector(".profile-schedule__unit--current");r&&r.classList.remove("profile-schedule__unit--current"),e.classList.add("profile-schedule__unit--current"),a()}}))})),Array.from(document.querySelectorAll(".profile-schedule__time-menu .dropdown__menu-item")).map((function(e){return e.addEventListener("click",a)}));var l=document.querySelector(".banner");JSON.parse(localStorage.getItem("letmetutor:bannerIsHidden"))?l.remove():(l.style.display="flex",document.querySelector(".banner__close").addEventListener("click",(function(){l.classList.add("banner--hide"),setTimeout((function(){l.remove(),localStorage.setItem("letmetutor:bannerIsHidden",!0)}),500)})));var u=document.querySelector(".cookies");JSON.parse(localStorage.getItem("letmetutor:cookiesIsHidden"))?u.remove():(u.classList.add("cookies--shown"),document.querySelector(".cookies__btn").addEventListener("click",(function(){u.classList.remove("cookies--shown"),setTimeout((function(){u.remove(),localStorage.setItem("letmetutor:cookiesIsHidden",!0)}),500)})));var d=function(){!function(e){document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,e)}(),document.querySelector(".header-menu").classList.remove("header-menu--shown")};document.querySelector(".header__burger").addEventListener("click",(function(){-parseInt(document.body.style.marginTop),document.body.style.cssText="position: fixed; margin-top: ".concat(-window.scrollY,"px"),document.querySelector(".header-menu").classList.add("header-menu--shown")})),document.querySelector(".header-menu__backdrop").addEventListener("click",d),document.querySelector(".header-menu__close").addEventListener("click",d),Array.from(document.querySelectorAll(".header__notifications-wrapper")).map((function(e){e.classList.contains("fakeScroll")||e.fakeScroll()}));new Swiper(".popular__grid--mobile",{loop:!0,loopAdditionalSlides:3,spaceBetween:20,slidesPerView:"auto",centeredSlides:!0,breakpoints:{760:{slidesPerView:2,centeredSlides:!1}}}),new Swiper(".reviews__slider",{loop:!0,spaceBetween:20,slidesPerView:3,slidesPerGroup:3,loopAdditionalSlides:3,pagination:{el:".swiper-pagination",clickable:!0}}),new Swiper(".reviews__slider--mobile",{loop:!0,spaceBetween:20,loopAdditionalSlides:3,pagination:{el:".swiper-pagination",clickable:!0}});if(document.querySelector("form[data-login-form]")&&e.validate(document.querySelector("form[data-login-form]"),(function(){console.log(!0)})),document.querySelector("form[data-signup-student-form]")&&e.validate(document.querySelector("form[data-signup-student-form]"),(function(){})),document.querySelector("form[data-signup-tutor-form]")&&e.validate(document.querySelector("form[data-signup-tutor-form]"),(function(){})),document.querySelector("form[data-support-form]")&&e.validate(document.querySelector("form[data-support-form]"),(function(){})),Array.from(document.querySelectorAll(".js-auth-country")).map((function(e){return e.addEventListener("changeCountry",(function(t){e.closest("form").querySelector(".js-auth-city").dataset.country=t.target.querySelector("input").value}))})),document.querySelectorAll(".js-auth-city input").length){var p=[{key:"Россия",cities:["Москва","Санкт-Петербург","Казань","Нижний Новгород","Сочи","Екатеринбург","Ростов-на-Дону","Новосибирск","Тюмень","Калининград","Уфа","Красноярск","Краснодар","Челябинск","Воронеж"]},{key:"Украина",cities:["Киев","Днепр","Донецк","Запорожье","Львов","Кривой Рог","Севастополь","Николаев","Мариуполь"]}];Array.from(document.querySelectorAll(".js-auth-city input")).map((function(e){e.addEventListener("input",(function(e){var t=e.currentTarget,r=t.closest(".input"),o=r.dataset.country;if(o){var n=p.filter((function(e){return e.key===o}))[0].cities,c=t.value.toLowerCase(),a=t.closest(".input").querySelector(".dropdown__menu"),s=!1;a.innerHTML="",""!==e.currentTarget.value&&(n.map((function(e){0===e.toLowerCase().indexOf(c)&&(s=!0,a.insertAdjacentHTML("beforeend",'<a class="input__dropdown-item dropdown__menu-item'.concat(c?" input__dropdown-item--smart":"",'" href="javascript:void(0)"><span>').concat(e.substr(0,c.length),"</span>").concat(e.substr(c.length),"</a>")))})),s&&Array.from(r.querySelectorAll(".input__dropdown-item")).map((function(e){return e.addEventListener("click",(function(){t.value=e.innerText}))})))}})),e.addEventListener("focus",(function(){e.closest(".input").querySelector(".dropdown__menu").innerHTML=""}))}))}Array.from(document.querySelectorAll('input[name="rulesAgreement"]')).map((function(e){return e.addEventListener("change",(function(){var t=e.closest("form").querySelector('button[type="submit"]');e.checked?(t.classList.remove("button--disabled"),t.removeAttribute("disabled")):(t.classList.add("button--disabled"),t.setAttribute("disabled","disabled"))}))})),Array.from(document.querySelectorAll(".auth__toggle .tabs__item")).map((function(e){return e.addEventListener("click",(function(){document.querySelector(".auth__type").value=e.dataset.tab-1}))})),Array.from(document.querySelectorAll(".tutor__nav-link")).map((function(e){return e.addEventListener("click",(function(){var t=e.dataset.target;scrollTo({top:document.querySelector('[data-block="'.concat(t,'"]')).getBoundingClientRect().top+window.pageYOffset-document.querySelector(".header").offsetHeight,behavior:"smooth"})}))}))};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJvbmxvYWQiLCIkYXBpIiwiJHBvcHVwIiwiX3JlZiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm9uSGlkZSIsIm9uU2hvdyIsImRvY3VtZW50Iiwic3R5bGUiLCJjb25jYXQiLCJzY3JvbGxZIiwiYm9keSIsImNzc1RleHQiLCJzY3JvbGxUbyIsIm9mZnNldCIsImlzU2hvd24iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNob3ciLCJQcm9taXNlIiwicmVzb2x2ZSIsImRpc3BsYXkiLCJoaWRlT3ZlcmZsb3ciLCJhZGQiLCJwcm9taXNlIiwiaGlkZSIsInBhcnNlSW50IiwibWFyZ2luVG9wIiwicmVtb3ZlIiwiZm9ybSIsInJlcXVlc3QiLCJlbWFpbFJlZ2V4cCIsInNldEludmFsaWRJbnB1dCIsImlucHV0IiwiY2xvc2VzdCIsInZhbGlkYXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInNldEludmFsaWRDaGVja2JveCIsIkFycmF5IiwiZnJvbSIsIiRjaGVja2JveFNlbGVjdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJxdWVyeVNlbGVjdG9yIiwibWFwIiwiZWwiLCIkZm9ybUlucHV0cyIsInZhbHVlIiwiZm9ybUlzVmFsaWQiLCJnZXRBdHRyaWJ1dGUiLCJpbmNsdWRlcyIsImNoZWNrZWQiLCJ0ZXN0IiwiY2hlY2tib3giLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiZGF0YXNldCIsInBvcHVwIiwiJHN1Y2Nlc3NQb3B1cCIsIiRkcm9wZG93bnMiLCIkdGhpcyIsInRvZ2dsZSIsIiRkcm9wZG93bk1lbnVJdGVtIiwiaW5uZXJUZXh0IiwiJGhpZGRlbkl0ZW0iLCIkZHJvcGRvd25WYWx1ZSIsIm5ld1ZhbHVlIiwidGFiIiwiJGFjdGl2ZVRhYkNvbnRlbnQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJ3aWR0aCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIiRkcm9wZG93biIsImNoYW5nZUNvdW50cnlFdmVudCIsImxvYyIsImNvZGVMb2MiLCJtYXNrIiwiJGlucHV0IiwiSW5wdXRtYXNrIiwidXBkYXRlTWFzayIsImxpc3QiLCIkcGxhY2Vob2xkZXIiLCJpdGVtIiwic3Vic3RyaW5nIiwicGxhY2Vob2xkZXIiLCJmYWtlU2Nyb2xsIiwiY2l0aWVzQXJyYXkiLCJsb3dlckNhc2VWYWx1ZSIsIiRjaGVja2JveCIsIm1hdGNoZXNGb3VuZCIsImhhbmRsZUlucHV0IiwiZmlyc3RSZW5kZXIiLCIkZHJvcGRvd25FbGVtZW50IiwibmV4dEVsZW1lbnRTaWJsaW5nIiwicGFyZW50Tm9kZSIsIkpTT04iLCJwYXJzZSIsIm9wdGlvbnMiLCJ0b0xvd2VyQ2FzZSIsImlubmVySFRNTCIsImluZGV4T2YiLCJzdWJzdHIiLCIkZWxlbWVudCIsIm5vVWlTbGlkZXIiLCJzdGFydCIsImNvbm5lY3QiLCJyYW5nZSIsIm1pbiIsInN0ZXAiLCJtYXgiLCIkcmFuZ2UiLCIkaW5wdXRGaWVsZCIsInZhbHVlcyIsIiRwcm9maWxlVmlkZW9Db3ZlciIsImNoZWNrYm94VmFsdWUiLCIkdGltZXpvbmVEcm9wZG93biIsInNldFRpbWVvdXQiLCIkY3VycmVudFVuaXQiLCJwbGF5Iiwic2V0RGF0ZVRpbWUiLCIkcHJldkJ1dHRvbiIsImRhdGUiLCIkYWN0aXZlU2xpZGUiLCIkcHJldlNsaWRlIiwidGltZSIsIiRuZXh0QnV0dG9uIiwiY3VycmVudEluZGV4IiwiJG5leHRTbGlkZSIsInNsaWRlIiwiZGF0ZXMiLCJmaXJzdCIsImxhc3QiLCIkYmFubmVyIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIiRjb29raWVzIiwic2V0SXRlbSIsInNob3dPdmVyZmxvdyIsImhpZGVIZWFkZXJNZW51IiwibG9vcCIsImxvb3BBZGRpdGlvbmFsU2xpZGVzIiwic3BhY2VCZXR3ZWVuIiwiYnJlYWtwb2ludHMiLCJzbGlkZXNQZXJWaWV3IiwiU3dpcGVyIiwiY2xpY2thYmxlIiwiY2VudGVyZWRTbGlkZXMiLCJyZXZpZXdTbGlkZXJNb2JpbGUiLCJwYWdpbmF0aW9uIiwiY29uc29sZSIsImNvdW50cnkiLCJjaXRpZXNEYXRhIiwia2V5IiwiY2l0aWVzIiwiJHN1Ym1pdEJ1dHRvbiIsIiRsYWJlbEVsZW1lbnQiLCJmaWx0ZXIiLCJ0b3AiLCJwYWdlWU9mZnNldCIsIm9mZnNldEhlaWdodCIsImJlaGF2aW9yIl0sIm1hcHBpbmdzIjoiYUFBQUEsT0FBT0MsT0FBUyxXQUVkLElBQUFDLEVBQUEsQ0FJRkEsTUFBQSxTQUFBQyxHQUFrRCxJQUFBQyxFQUFBQyxVQUFBQyxPQUFBLFFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFBLEdBQXJDRyxFQUFxQ0osRUFBckNJLE9BQUFDLEVBQXFDTCxFQUFyQ0ssT0FBV0QsRUFBQUEsV0FBMEJFLFNBQWxCRCxLQUFrQkUsTUFBbEJGLFFBQWtCLGdDQUFBRyxRQUFBWixPQUFBYSxRQUFBLE9BRzlDSCxFQUFjQyxTQUFBQSxHQUNmRCxTQUVESSxLQUFBSCxNQUFBSSxRQUFBLGtDQUlFZixPQUFPZ0IsU0FBUyxFQUFHQyxJQUFuQmpCLE1BQUFBLENBS0FrQixRQUFTLFdBQUEsT0FBTWYsRUFBT2dCLFVBQVVDLFNBQVMsa0JBRHpDQyxLQUpBckIsV0FLQWtCLElBQUFBLEVBQVMsSUFBQUksU0FBQSxTQUFBQyxHQUFBcEIsRUFBTUEsTUFBTXFCLFFBQU4sUUFGVkQsT0FLSEUsSUFFRUYsRUFBQUEsTUFBTyxXQUNScEIsRUFIRGdCLFVBQUFPLElBQUEsaUJBS1ksbUJBQVpELEdBRUFFLFFBSUdDLEtBbkJMNUIsV0FvQkcsSUFMRGlCLEdBQUFZLFNBQUFuQixTQUFBSSxLQUFBSCxNQUFBbUIsV0FPRjNCLEVBQUFnQixVQUFBWSxPQUFBLGlCQUNBSCxZQXBCSyxXQXFCSHpCLEVBQU1jLE1BQVNPLFFBQVVkLE9BRXpCUCxFQUFPZ0IsR0FDSSxtQkFBQVgsR0FDVEwsTUFLQyxRQTlCQUQsU0FBUCxTQUFBOEIsRUFBQUMsR0FpQ0QsSUFFREMsRUFB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aUJBQWlCLFNBQVMsV0FDeEc3QixTQUFTcUMsY0FBYyxlQUFlSSxNQUFRRixFQUFHVyxRQUFRVyxJQUFNLFFBR2pFNUIsTUFBTUMsS0FBS2xDLFNBQVNvQyxpQkFBaUIscUJBQXFCRSxLQUFJLFNBQUFDLEdBQUUsT0FBSUEsRUFBR1YsaUJBQWlCLFNBQVMsV0FDL0YsSUFBTW1CLEVBQVNULEVBQUdXLFFBQVFGLE9BRTFCMUMsU0FBUyxDQUNQa0osSUFBS3hKLFNBQVNxQyxjQUFULGdCQUFBbkMsT0FBdUM4QyxFQUF2QyxPQUFtRGtCLHdCQUF3QnNGLElBQU1sSyxPQUFPbUssWUFBY3pKLFNBQVNxQyxjQUFjLFdBQVdxSCxhQUM3SUMsU0FBVSIsImZpbGUiOiJjb21tb24ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93Lm9ubG9hZCA9ICgpID0+IHtcblxuICAvLyDQntCx0YrQtdC60YIg0LPQu9C+0LHQsNC70YzQvdC+0LPQviBBUElcbmNvbnN0ICRhcGkgPSB7fTtcblxuLy8gQVBJINC00LvRjyDRgNCw0LHQvtGC0Ysg0YEg0L/QvtC/0LDQv9Cw0LzQuFxuJGFwaS5wb3B1cCA9ICgkcG9wdXAsIHsgb25IaWRlLCBvblNob3cgfSA9IHt9KSA9PiB7XG4gIC8vINCe0YLQutC70Y7Rh9Cw0LXRgiDQstC+0LfQvNC+0LbQvdC+0YHRgtGMINGB0LrRgNC+0LvQu9C40YLRjCDRgdGC0YDQsNC90LjRhtGDXG4gIGNvbnN0IGhpZGVPdmVyZmxvdyA9ICgpID0+IHtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmNzc1RleHQgPSBgcG9zaXRpb246IGZpeGVkOyBtYXJnaW4tdG9wOiAkey13aW5kb3cuc2Nyb2xsWX1weGA7XG4gIH07XG4gIFxuICAvLyDQktC60LvRjtGH0LDQtdGCINCy0L7Qt9C80L7QttC90L7RgdGC0Ywg0YHQutGA0L7Qu9C70LjRgtGMINGB0YLRgNCw0L3QuNGG0YNcbiAgY29uc3Qgc2hvd092ZXJmbG93ID0gb2Zmc2V0ID0+IHtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmNzc1RleHQgPSAncG9zaXRpb246IHN0YXRpYzsgbWFyZ2luLXRvcDogMCc7XG4gICAgXG4gICAgd2luZG93LnNjcm9sbFRvKDAsIG9mZnNldCk7XG4gIH07XG4gIFxuICByZXR1cm4ge1xuICAgIC8vINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCIHRydWUsINC10YHQu9C4INC/0L7Qv9Cw0L8g0L/QvtC60LDQt9GL0LLQsNC10YLRgdGPLCDQsiDQuNC90L7QvCDRgdC70YPRh9Cw0LUgZmFsc2VcbiAgICBpc1Nob3duOiAoKSA9PiAkcG9wdXAuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cC0tb3BlbmVkJyksXG4gICAgLy8g0J/QvtC60LDQt9GL0LLQsNC10YIg0L/QvtC/0LDQv1xuICAgIHNob3coKSB7XG4gICAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICRwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGhpZGVPdmVyZmxvdygpO1xuXG4gICAgICBwcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAkcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXAtLW9wZW5lZCcpO1xuICAgICAgICBpZiAodHlwZW9mIG9uU2hvdyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIG9uU2hvdygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vINCh0LrRgNGL0LLQsNC10YIg0L/QvtC/0LDQv1xuICAgIGhpZGUoKSB7XG4gICAgICBjb25zdCBvZmZzZXQgPSAtcGFyc2VJbnQoZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW5Ub3ApO1xuICBcbiAgICAgICRwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cC0tb3BlbmVkJyk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgJHBvcHVwLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHNob3dPdmVyZmxvdyhvZmZzZXQpO1xuICAgICAgICBpZiAodHlwZW9mIG9uSGlkZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIG9uSGlkZSgpO1xuICAgICAgICB9XG4gICAgICB9LCAzMDApO1xuICAgIH1cbiAgfTtcbn07XG5cbi8vIEFQSSDQtNC70Y8g0LLQsNC70LjQtNCw0YbQuNC4INGE0L7RgNC8XG4kYXBpLnZhbGlkYXRlID0gKGZvcm0sIHJlcXVlc3QpID0+IHtcbiAgY29uc3QgZW1haWxSZWdleHAgPSAvXigoW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31dKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLztcbiAgY29uc3Qgc2V0SW52YWxpZElucHV0ID0gaW5wdXQgPT4ge1xuICAgIGlmIChpbnB1dC5jbG9zZXN0KCcuaW5wdXQnKSkge1xuICAgICAgaW5wdXQuY2xvc2VzdCgnLmlucHV0JykuY2xhc3NMaXN0LmFkZCgnaW5wdXQtLWVycm9yJyk7XG4gICAgfSBlbHNlIGlmIChpbnB1dC5jbG9zZXN0KCcudGV4dGFyZWEnKSkge1xuICAgICAgaW5wdXQuY2xvc2VzdCgnLnRleHRhcmVhJykuY2xhc3NMaXN0LmFkZCgndGV4dGFyZWEtLWVycm9yJyk7XG4gICAgfVxuICAgIGlucHV0LmZvY3VzKCk7XG4gIH07XG4gIGNvbnN0IHNldEludmFsaWRDaGVja2JveCA9IGlucHV0ID0+IHtcbiAgICBpbnB1dC5jbG9zZXN0KCcuY2hlY2tib3gnKS5jbGFzc0xpc3QuYWRkKCdjaGVja2JveC0tZXJyb3InKTtcbiAgfTtcblxuICBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBsZXQgZm9ybUlzVmFsaWQgPSB0cnVlO1xuICAgIGNvbnN0ICRmb3JtSW5wdXRzID0gQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3JlcXVpcmVkXSwgdGV4dGFyZWFbcmVxdWlyZWRdJykpO1xuICAgIGNvbnN0ICRjaGVja2JveFNlbGVjdCA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmNoZWNrYm94c2VsZWN0Jyk7XG5cbiAgICAkZm9ybUlucHV0cy5yZXZlcnNlKCkubWFwKGVsID0+IHtcbiAgICAgIGlmIChlbC5kYXRhc2V0LnBhc3NSZXBlYXQgJiYgZWwudmFsdWUgIT09IGVsLmNsb3Nlc3QoJ2Zvcm0nKS5xdWVyeVNlbGVjdG9yKCdpbnB1dFtkYXRhLXBhc3NdJykudmFsdWUpIHtcbiAgICAgICAgc2V0SW52YWxpZElucHV0KGVsKTtcbiAgICAgIH1cblxuICAgICAgc3dpdGNoKGVsLmdldEF0dHJpYnV0ZSgndHlwZScpKSB7XG4gICAgICAgIGNhc2UgJ3RleHQnOlxuICAgICAgICBjYXNlICdwYXNzd29yZCc6XG4gICAgICAgICAgaWYgKGVsLnZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgc2V0SW52YWxpZElucHV0KGVsKTtcbiAgICAgICAgICAgIGZvcm1Jc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0ZWwnOlxuICAgICAgICAgIGlmIChlbC52YWx1ZSA9PT0gJycgfHwgZWwudmFsdWUuaW5jbHVkZXMoJ18nKSkge1xuICAgICAgICAgICAgc2V0SW52YWxpZElucHV0KGVsKTtcbiAgICAgICAgICAgIGZvcm1Jc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdjaGVja2JveCc6XG4gICAgICAgICAgaWYgKCFlbC5jaGVja2VkKSB7XG4gICAgICAgICAgICBzZXRJbnZhbGlkQ2hlY2tib3goZWwpO1xuICAgICAgICAgICAgZm9ybUlzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2VtYWlsJzpcbiAgICAgICAgICBpZiAoIWVtYWlsUmVnZXhwLnRlc3QoZWwudmFsdWUpKSB7XG4gICAgICAgICAgICBzZXRJbnZhbGlkSW5wdXQoZWwpO1xuICAgICAgICAgICAgZm9ybUlzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaWYgKGVsLnZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgc2V0SW52YWxpZElucHV0KGVsKTtcbiAgICAgICAgICAgIGZvcm1Jc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICBcbiAgICBpZiAoJGNoZWNrYm94U2VsZWN0Lmxlbmd0aCkge1xuICAgICAgQXJyYXkuZnJvbSgkY2hlY2tib3hTZWxlY3QpLm1hcChlbCA9PiB7XG4gICAgICAgIGxldCBjaGVja2VkID0gZmFsc2U7XG4gIFxuICAgICAgICBBcnJheS5mcm9tKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGVja2JveF9faW5wdXQnKSkubWFwKGNoZWNrYm94ID0+IHtcbiAgICAgICAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgICAgICAgY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgXG4gICAgICAgIGlmICghY2hlY2tlZCkge1xuICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2NoZWNrYm94c2VsZWN0LS1lcnJvcicpO1xuICAgICAgICAgIGZvcm1Jc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChmb3JtSXNWYWxpZCkge1xuICAgICAgcmVxdWVzdCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0JykpLmNvbmNhdChBcnJheS5mcm9tKGZvcm0ucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKSkpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICBpZiAoZWwuY2xvc2VzdCgnLmlucHV0JykpIHtcbiAgICAgIGVsLmNsb3Nlc3QoJy5pbnB1dCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2lucHV0LS1lcnJvcicpO1xuICAgIH0gZWxzZSBpZiAoZWwuY2xvc2VzdCgnLmNoZWNrYm94JykpIHtcbiAgICAgIGVsLmNsb3Nlc3QoJy5jaGVja2JveCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2NoZWNrYm94LS1lcnJvcicpO1xuICAgIH0gZWxzZSBpZiAoZWwuY2xvc2VzdCgnLnRleHRhcmVhJykpIHtcbiAgICAgIGVsLmNsb3Nlc3QoJy50ZXh0YXJlYScpLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHRhcmVhLS1lcnJvcicpO1xuICAgIH1cbiAgfSkpO1xufTtcblxuICAvLyBoYW5kbGUgb3BlbiBwb3B1cFxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtb3Blbi1wb3B1cCcpKS5tYXAoZWwgPT5cbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wb3B1cDtcbiAgICBjb25zdCAkcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuanMtcG9wdXBbZGF0YS1wb3B1cD1cIiR7dGFyZ2V0fVwiXWApO1xuICAgIFxuICAgICRhcGkucG9wdXAoJHBvcHVwKS5zaG93KCk7XG4gIH0pXG4pO1xuXG4vLyBoYW5kbGUgY2xvc2UgcG9wdXBcbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWNsb3NlLXBvcHVwJykpLm1hcChlbCA9PlxuICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGlmKCFlLnRhcmdldC5jbG9zZXN0KCcucG9wdXBfX3dpbmRvdycpIHx8ICFlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1wb3B1cCcpKSB7XG4gICAgICBjb25zdCAkcG9wdXAgPSBlLmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnBvcHVwJyk7XG5cbiAgICAgICRhcGkucG9wdXAoJHBvcHVwKS5oaWRlKCk7XG4gICAgfVxuICB9KVxuKTtcblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1yZXN0b3JlLWZvcm1dJykpIHtcbiAgJGFwaS52YWxpZGF0ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtcmVzdG9yZS1mb3JtXScpLCAoKSA9PiB7fSk7XG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtcmVxdWVzdC1hdXRoLWZvcm1dJykpIHtcbiAgJGFwaS52YWxpZGF0ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtcmVxdWVzdC1hdXRoLWZvcm1dJyksICgpID0+IHt9KTtcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1yZXF1ZXN0LWZvcm1dJykpIHtcbiAgJGFwaS52YWxpZGF0ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtcmVxdWVzdC1mb3JtXScpLCAoKSA9PiB7XG4gICAgY29uc3QgJHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXBvcHVwW2RhdGEtcG9wdXA9XCJyZXF1ZXN0XCJdJyk7XG4gICAgY29uc3QgJHN1Y2Nlc3NQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wb3B1cFtkYXRhLXBvcHVwPVwicmVxdWVzdC1zdWNjZXNzXCJdJyk7XG5cbiAgICAkYXBpLnBvcHVwKCRwb3B1cCwge1xuICAgICAgb25IaWRlKCkge1xuICAgICAgICBBcnJheS5mcm9tKCRwb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpKS5tYXAoZWwgPT4gZWwudmFsdWUgPSAnJyk7XG4gICAgICAgICRhcGkucG9wdXAoJHN1Y2Nlc3NQb3B1cCkuc2hvdygpO1xuICAgICAgfVxuICAgIH0pLmhpZGUoKTtcbiAgfSk7XG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtcmVxdWVzdC1zcGVjaWZpYy1mb3JtXScpKSB7XG4gICRhcGkudmFsaWRhdGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXJlcXVlc3Qtc3BlY2lmaWMtZm9ybV0nKSwgKCkgPT4ge1xuICAgIGNvbnN0ICRwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wb3B1cFtkYXRhLXBvcHVwPVwicmVxdWVzdC1zcGVjaWZpY1wiXScpO1xuICAgIGNvbnN0ICRzdWNjZXNzUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtcG9wdXBbZGF0YS1wb3B1cD1cInJlcXVlc3Qtc3VjY2Vzc1wiXScpO1xuXG4gICAgJGFwaS5wb3B1cCgkcG9wdXAsIHtcbiAgICAgIG9uSGlkZSgpIHtcbiAgICAgICAgQXJyYXkuZnJvbSgkcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKSkubWFwKGVsID0+IGVsLnZhbHVlID0gJycpO1xuICAgICAgICAkYXBpLnBvcHVwKCRzdWNjZXNzUG9wdXApLnNob3coKTtcbiAgICAgIH1cbiAgICB9KS5oaWRlKCk7XG4gIH0pO1xufVxuICBjb25zdCAkZHJvcGRvd25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZHJvcGRvd24nKSk7XG5cbi8vIGNsb3NlIGRyb3Bkb3duIG9uIG91dGVyIGNsaWNrXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9IGUudGFyZ2V0O1xuXG4gICRkcm9wZG93bnMubWFwKGVsID0+IHtcbiAgICBpZihlbC5jbG9zZXN0KCcuZHJvcGRvd24nKSAhPT0gJHRoaXMuY2xvc2VzdCgnLmRyb3Bkb3duJykpIHtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3Bkb3duLS1hY3RpdmUnKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbi8vIG9wZW4gZHJvcGRvd25cbiRkcm9wZG93bnMubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2lucHV0X19jb2RlJykpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICBpZiAoIWVsLmNsYXNzTGlzdC5jb250YWlucygnZHJvcGRvd24tLWFjdGl2ZScpKSB7XG4gICAgJGRyb3Bkb3ducy5tYXAoZWwgPT4gZWwgIT09IGVsICYmIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3Bkb3duLS1hY3RpdmUnKSk7XG4gICAgZWwuY2xhc3NMaXN0LnRvZ2dsZSgnZHJvcGRvd24tLWFjdGl2ZScpO1xuICB9XG59KSk7XG5cbi8vIGNoYW5nZSBkcm9wZG93biB2YWx1ZVxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgY29uc3QgJGRyb3Bkb3duTWVudUl0ZW0gPSBlLnRhcmdldC5jbG9zZXN0KCcuZHJvcGRvd25fX21lbnUtaXRlbScpO1xuXG4gIGlmICgkZHJvcGRvd25NZW51SXRlbSkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi0tYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgnZHJvcGRvd24tLWFjdGl2ZScpO1xuXG4gICAgaWYgKCRkcm9wZG93bk1lbnVJdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS10b2dnbGUnKSkge1xuICAgICAgY29uc3QgJHRoaXMgPSBlLnRhcmdldDtcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gJHRoaXMuaW5uZXJUZXh0O1xuICAgICAgY29uc3QgJGhpZGRlbkl0ZW0gPSAkdGhpcy5jbG9zZXN0KCcuZHJvcGRvd25fX21lbnUnKS5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd25fX21lbnUtaXRlbS0taGlkZGVuJyk7XG4gICAgICBjb25zdCAkZHJvcGRvd25WYWx1ZSA9ICR0aGlzLmNsb3Nlc3QoJy5kcm9wZG93bicpLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bl9fdmFsdWUnKTtcblxuICAgICAgaWYgKCRoaWRkZW5JdGVtKSB7XG4gICAgICAgICRoaWRkZW5JdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3Bkb3duX19tZW51LWl0ZW0tLWhpZGRlbicpO1xuICAgICAgfVxuXG4gICAgICAkZHJvcGRvd25NZW51SXRlbS5jbGFzc0xpc3QuYWRkKCdkcm9wZG93bl9fbWVudS1pdGVtLS1oaWRkZW4nKTsgXG4gICAgICAkZHJvcGRvd25WYWx1ZS5pbm5lclRleHQgPSBuZXdWYWx1ZTtcbiAgICB9XG4gIH1cbn0pO1xuICAvLyBoYW5kbGUgdGFicyBsb2dpY1xuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFic19faXRlbScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCB0YXJnZXQgPSBlbC5kYXRhc2V0LnRhYjtcbiAgY29uc3QgJGFjdGl2ZVRhYkNvbnRlbnQgPSBlbC5jbG9zZXN0KCdbZGF0YS10YWJzXScpLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFjdGl2ZV0nKTtcblxuICBlbC5jbG9zZXN0KCcudGFicycpLnF1ZXJ5U2VsZWN0b3IoJy50YWJzX19pdGVtLS1hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCd0YWJzX19pdGVtLS1hY3RpdmUnKTtcbiAgZWwuY2xhc3NMaXN0LmFkZCgndGFic19faXRlbS0tYWN0aXZlJyk7XG5cbiAgaWYgKCRhY3RpdmVUYWJDb250ZW50KSB7XG4gICAgZWwuY2xvc2VzdCgnW2RhdGEtdGFic10nKS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3RpdmVdJykucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWFjdGl2ZScpO1xuICAgIGVsLmNsb3Nlc3QoJ1tkYXRhLXRhYnNdJykucXVlcnlTZWxlY3RvcihgW2RhdGEtY29udGVudD1cIiR7dGFyZ2V0fVwiXWApLnNldEF0dHJpYnV0ZSgnZGF0YS1hY3RpdmUnLCB0cnVlKTtcbiAgfVxufSkpO1xuICBjb25zdCBjaGFuZ2VDb3VudHJ5RXZlbnQgPSBuZXcgRXZlbnQoJ2NoYW5nZUNvdW50cnknKTtcblxuY29uc3QgdXBkYXRlTWFzayA9IChpbnB1dCwgbWFzaykgPT4ge1xuICBJbnB1dG1hc2soe21hc2t9KS5tYXNrKGlucHV0KTtcbn07XG5cbi8vIE9wZW4gaW5wdXQgZHJvcGRvd25cbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0LmRyb3Bkb3duJykpXG4uY29uY2F0KEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0IC5kcm9wZG93bicpKSlcbi5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0ICRkcm9wZG93biA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bl9fbWVudScpO1xuICBlbC5jbG9zZXN0KCcuaW5wdXQnKS5xdWVyeVNlbGVjdG9yKCcuaW5wdXRfX2Ryb3Bkb3duJykuc3R5bGUud2lkdGggPSBlbC5jbG9zZXN0KCcuaW5wdXQnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCArICdweCc7XG5cbiAgaWYgKCEkZHJvcGRvd24uY2xhc3NMaXN0LmNvbnRhaW5zKCdmYWtlU2Nyb2xsJykpIHtcbiAgICAkZHJvcGRvd24uZmFrZVNjcm9sbCgpO1xuICB9XG59KSk7XG5cbi8vIENoYW5nZSBwaG9uZSBjb2RlIG9uIGlucHV0IGRyb3Bkb3duXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dF9fZHJvcGRvd24taXRlbVtkYXRhLWNvZGUtbG9jXScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0IGxvYyA9IGVsLmRhdGFzZXQuY29kZUxvYztcbiAgY29uc3QgbWFzayA9IGVsLmRhdGFzZXQubWFzaztcbiAgY29uc3QgJGlucHV0ID0gZWwuY2xvc2VzdCgnLmlucHV0JykucXVlcnlTZWxlY3RvcignaW5wdXQnKTtcblxuICBlbC5jbG9zZXN0KCcuaW5wdXRfX2NvZGUnKS5kYXRhc2V0LmNvZGVMb2MgPSBsb2M7XG4gIGVsLmNsb3Nlc3QoJy5pbnB1dF9fY29kZScpLmRhdGFzZXQubWFzayA9IG1hc2s7XG4gICRpbnB1dC5wbGFjZWhvbGRlciA9IG1hc2sucmVwbGFjZUFsbCgnOScsICdfJyk7XG4gIHVwZGF0ZU1hc2soJGlucHV0LCBtYXNrKTtcbn0pKTtcblxuLy8gQ2hhbmdlIGlucHV0IGRyb3Bkb3duIHZhbHVlXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dF9fZHJvcGRvd24taXRlbVtkYXRhLWRyb3Bkb3duXScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gZWwuaW5uZXJUZXh0O1xuICBcbiAgZWwuY2xvc2VzdCgnLmlucHV0JykucXVlcnlTZWxlY3RvcignaW5wdXQnKS52YWx1ZSA9IHZhbHVlO1xuICBlbC5jbG9zZXN0KCcuaW5wdXQnKS5jbGFzc0xpc3QucmVtb3ZlKCdpbnB1dC0tZXJyb3InKTtcblxuICBpZiAoZWwuY2xvc2VzdCgnLmlucHV0JykuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1hdXRoLWNvdW50cnknKSkge1xuICAgIGVsLmNsb3Nlc3QoJy5pbnB1dCcpLmRpc3BhdGNoRXZlbnQoY2hhbmdlQ291bnRyeUV2ZW50KTtcbiAgfVxufSkpO1xuXG4vLyBNYXNraW5nIHBob25lIGlucHV0XG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJ0ZWxcIl0nKSkubWFwKGVsID0+IHtcbiAgSW5wdXRtYXNrKHttYXNrOiBlbC5jbG9zZXN0KCcuaW5wdXQnKS5xdWVyeVNlbGVjdG9yKCcuaW5wdXRfX2NvZGUnKS5kYXRhc2V0Lm1hc2t9KS5tYXNrKGVsKTtcbn0pO1xuICAvLyBoYW5kbGUgY2hlY2tib3hzZWxlY3QgbG9naWNcbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoZWNrYm94c2VsZWN0X19saXN0JykpLm1hcChsaXN0ID0+IHtcbiAgbGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIFxuICAgIGNvbnN0ICRjaGVja2JveFNlbGVjdCA9IGxpc3QuY2xvc2VzdCgnLmNoZWNrYm94c2VsZWN0Jyk7XG4gICAgbGV0IGNoZWNrZWQgPSBmYWxzZTtcblxuICAgICRjaGVja2JveFNlbGVjdC5jbGFzc0xpc3QucmVtb3ZlKCdjaGVja2JveHNlbGVjdC0tZXJyb3InKTtcblxuICAgIEFycmF5LmZyb20obGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hlY2tib3hfX2lucHV0JykpLm1hcChjaGVja2JveCA9PiB7XG4gICAgICBjb25zdCAkcGxhY2Vob2xkZXIgPSAkY2hlY2tib3hTZWxlY3QucXVlcnlTZWxlY3RvcignLmNoZWNrYm94c2VsZWN0X19pbnB1dC1wbGFjZWhvbGRlcicpO1xuXG4gICAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkgY2hlY2tlZCA9IHRydWU7XG5cbiAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBsZXQgdmFsdWUgPSAnJztcblxuICAgICAgICBBcnJheS5mcm9tKGxpc3QucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQ6Y2hlY2tlZCcpKS5tYXAoaXRlbSA9PiB7XG4gICAgICAgICAgdmFsdWUgKz0gaXRlbS5jbG9zZXN0KCcuY2hlY2tib3hzZWxlY3RfX2l0ZW0nKS5xdWVyeVNlbGVjdG9yKCcuY2hlY2tib3hfX3RleHQnKS5pbm5lclRleHQgKyAnLCAnO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAkcGxhY2Vob2xkZXIuaW5uZXJUZXh0ID0gdmFsdWUuc3Vic3RyaW5nKDAsIHZhbHVlLmxlbmd0aCAtIDIpO1xuICAgICAgICAgICRwbGFjZWhvbGRlci5jbGFzc0xpc3QuYWRkKCdjaGVja2JveHNlbGVjdF9faW5wdXQtcGxhY2Vob2xkZXItLWFjdGl2ZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRwbGFjZWhvbGRlci5pbm5lclRleHQgPSAkcGxhY2Vob2xkZXIuZGF0YXNldC5wbGFjZWhvbGRlcjtcbiAgICAgICAgICAkcGxhY2Vob2xkZXIuY2xhc3NMaXN0LnJlbW92ZSgnY2hlY2tib3hzZWxlY3RfX2lucHV0LXBsYWNlaG9sZGVyLS1hY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIFxuICAgIGlmIChjaGVja2VkKSB7XG4gICAgICAkY2hlY2tib3hTZWxlY3QuY2xhc3NMaXN0LmFkZCgnY2hlY2tib3hzZWxlY3QtLWNoZWNrZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGNoZWNrYm94U2VsZWN0LmNsYXNzTGlzdC5yZW1vdmUoJ2NoZWNrYm94c2VsZWN0LS1jaGVja2VkJyk7XG4gICAgfVxuICB9KTtcblxuICBsaXN0LmZha2VTY3JvbGwoKTtcbn0pO1xuICBjb25zdCBjaXRpZXNBcnJheSA9IFtcbiAgXCLQnNC+0YHQutCy0LBcIixcbiAgXCLQodCw0L3QutGCLdCf0LXRgtC10YDQsdGD0YDQs1wiLFxuICBcItCa0LDQt9Cw0L3RjFwiLFxuICBcItCd0LjQttC90LjQuSDQndC+0LLQs9C+0YDQvtC0XCIsXG4gIFwi0KHQvtGH0LhcIixcbiAgXCLQldC60LDRgtC10YDQuNC90LHRg9GA0LNcIixcbiAgXCLQoNC+0YHRgtC+0LIt0L3QsC3QlNC+0L3Rg1wiLFxuICBcItCd0L7QstC+0YHQuNCx0LjRgNGB0LpcIixcbiAgXCLQotGO0LzQtdC90YxcIixcbiAgXCLQmtCw0LvQuNC90LjQvdCz0YDQsNC0XCIsXG4gIFwi0KPRhNCwXCIsXG4gIFwi0JrRgNCw0YHQvdC+0Y/RgNGB0LpcIixcbiAgXCLQmtGA0LDRgdC90L7QtNCw0YBcIixcbiAgXCLQp9C10LvRj9Cx0LjQvdGB0LpcIixcbiAgXCLQktC+0YDQvtC90LXQtlwiLFxuICBcItCa0LjQtdCyXCIsXG4gIFwi0JTQvdC10L/RgFwiLFxuICBcItCU0L7QvdC10YbQulwiLFxuICBcItCX0LDQv9C+0YDQvtC20YzQtVwiLFxuICBcItCb0YzQstC+0LJcIixcbiAgXCLQmtGA0LjQstC+0Lkg0KDQvtCzXCIsXG4gIFwi0KHQtdCy0LDRgdGC0L7Qv9C+0LvRjFwiLFxuICBcItCd0LjQutC+0LvQsNC10LJcIixcbiAgXCLQnNCw0YDQuNGD0L/QvtC70YxcIlxuXTtcblxuLy8gc2V0IGZpbHRlciBpbnB1dCB2YWx1ZVxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmlsdGVyc19fZHJvcGRvd24taXRlbScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgY29uc3QgJHRoaXMgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gIGNvbnN0IHZhbHVlID0gJHRoaXMuaW5uZXJUZXh0O1xuXG4gICR0aGlzLmNsb3Nlc3QoJy5maWx0ZXJzX19pbnB1dCcpLnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXJzX19pbnB1dC1maWVsZCcpLnZhbHVlID0gdmFsdWU7XG59KSk7XG5cbi8vIGZpbHRlciBtYWluIGxvZ2ljXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWx0ZXJzX19pbnB1dC1maWVsZCcpKS5tYXAoZWwgPT4ge1xuICBjb25zdCAkdGhpcyA9IGVsO1xuICAvLyBoYW5kbGUgZmlsdGVyIGlucHV0XG4gIGNvbnN0IGhhbmRsZUlucHV0ID0gZmlyc3RSZW5kZXIgPT4ge1xuICAgIGNvbnN0ICRkcm9wZG93bkVsZW1lbnQgPSAkdGhpcy5uZXh0RWxlbWVudFNpYmxpbmcucXVlcnlTZWxlY3RvcignLmZpbHRlcnNfX2Ryb3Bkb3duLWlubmVyJyk7XG4gICAgY29uc3QgJGRyb3Bkb3duID0gJGRyb3Bkb3duRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZmFrZVNjcm9sbF9fY29udGVudCcpIHx8ICRkcm9wZG93bkVsZW1lbnQ7XG4gICAgY29uc3QgaW5wdXRTbWFydFNlYXJjaCA9ICR0aGlzLmdldEF0dHJpYnV0ZSgnbmFtZScpID09PSAnbG9jYXRpb24nO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBpbnB1dFNtYXJ0U2VhcmNoID8gY2l0aWVzQXJyYXkgOiBKU09OLnBhcnNlKCR0aGlzLmRhdGFzZXQub3B0aW9ucyk7XG4gICAgY29uc3QgbG93ZXJDYXNlVmFsdWUgPSAkdGhpcy52YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0ICRjaGVja2JveCA9ICRkcm9wZG93bi5jbG9zZXN0KCcuZmlsdGVyc19fZHJvcGRvd24nKS5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKTtcbiAgICBsZXQgbWF0Y2hlc0ZvdW5kID0gZmFsc2U7XG5cbiAgICAkZHJvcGRvd24uaW5uZXJIVE1MID0gJyc7XG4gIFxuICAgIC8vIHJlbmRlciBmaWx0ZXIgZHJvcGRvd24gaXRlbXNcbiAgICBvcHRpb25zLm1hcChlbCA9PiB7XG4gICAgICBpZiAoZmlyc3RSZW5kZXIgfHwgZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKGxvd2VyQ2FzZVZhbHVlKSA9PT0gMCkge1xuICAgICAgICBjb25zdCAkZWxlbWVudCA9IGlucHV0U21hcnRTZWFyY2ggP1xuICAgICAgICAgIGA8YSBjbGFzcz1cImZpbHRlcnNfX2Ryb3Bkb3duLWl0ZW0gZHJvcGRvd25fX21lbnUtaXRlbSR7KGxvd2VyQ2FzZVZhbHVlICYmICFmaXJzdFJlbmRlcikgPyAnIGZpbHRlcnNfX2Ryb3Bkb3duLWl0ZW0tLXNtYXJ0JyA6ICcnfVwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIj48c3Bhbj4ke2VsLnN1YnN0cigwLCBsb3dlckNhc2VWYWx1ZS5sZW5ndGgpfTwvc3Bhbj4ke2VsLnN1YnN0cihsb3dlckNhc2VWYWx1ZS5sZW5ndGgpfTwvYT5gIDpcbiAgICAgICAgICBgPGEgY2xhc3M9XCJmaWx0ZXJzX19kcm9wZG93bi1pdGVtIGRyb3Bkb3duX19tZW51LWl0ZW1cIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCI+JHtlbH08L2E+YDtcbiAgICAgICAgbWF0Y2hlc0ZvdW5kID0gdHJ1ZTtcbiAgICAgICAgJGRyb3Bkb3duLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgJGVsZW1lbnQpXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyB0b2dnbGUgZmlsdGVyIGRyb3Bkb3duIHZpc2liaWxpdHlcbiAgICBpZiAobWF0Y2hlc0ZvdW5kKSB7XG4gICAgICAkZHJvcGRvd25FbGVtZW50LnBhcmVudE5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnZmlsdGVyc19fZHJvcGRvd24tLWhpZGRlbicpO1xuICAgICAgJGRyb3Bkb3duRWxlbWVudC5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2ZpbHRlcnNfX2Ryb3Bkb3duLS1lbXB0eScpO1xuICAgIH0gZWxzZSBpZiAoISRjaGVja2JveCkge1xuICAgICAgJGRyb3Bkb3duRWxlbWVudC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2ZpbHRlcnNfX2Ryb3Bkb3duLS1oaWRkZW4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGRyb3Bkb3duRWxlbWVudC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2ZpbHRlcnNfX2Ryb3Bkb3duLS1lbXB0eScpO1xuICAgIH1cblxuICAgIC8vIGhhbmRsZSBpbnB1dCB2YWx1ZVxuICAgIEFycmF5LmZyb20oJGRyb3Bkb3duLnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWx0ZXJzX19kcm9wZG93bi1pdGVtJykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICR0aGlzLnZhbHVlID0gZWwuaW5uZXJUZXh0O1xuICAgICAgJHRoaXMuc2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJywgZWwuaW5uZXJUZXh0KTtcblxuICAgICAgaWYgKCRjaGVja2JveCkge1xuICAgICAgICAkY2hlY2tib3guY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAkdGhpcy5yZW1vdmVBdHRyaWJ1dGUoJ3JlYWRvbmx5Jyk7XG4gICAgICB9XG4gICAgfSkpO1xuXG4gICAgLy8gZmFrZVNjcm9sbCBpbml0XG4gICAgaWYgKGZpcnN0UmVuZGVyICYmICEkZHJvcGRvd25FbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZmFrZVNjcm9sbCcpKSB7XG4gICAgICAkZHJvcGRvd24uZmFrZVNjcm9sbCgpO1xuICAgIH1cbiAgfTtcblxuICAvLyBhZGQgbGlzdGVuZXJzIG9uIGZpbHRlciBpbnB1dFxuICBpZiAoJHRoaXMubmFtZSAhPT0gJ2Nvc3QnKSB7XG4gICAgJHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiBoYW5kbGVJbnB1dChmYWxzZSkpO1xuICAgICR0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4gaGFuZGxlSW5wdXQodHJ1ZSkpO1xuICAgICR0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiB7XG4gICAgICBpZiAoJHRoaXMudmFsdWUgPT09ICcnIHx8ICEkdGhpcy5kYXRhc2V0LnZhbHVlKSB7XG4gICAgICAgICR0aGlzLnZhbHVlID0gJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkdGhpcy52YWx1ZSA9ICR0aGlzLmRhdGFzZXQudmFsdWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vLyBoYW5kbGUgZmlsdGVyIHJhbmdlIHNsaWRlclxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmlsdGVyc19fY29zdC1yYW5nZScpKS5tYXAoJHJhbmdlID0+IHtcbiAgY29uc3QgbWluID0gKyRyYW5nZS5kYXRhc2V0Lm1pbjtcbiAgY29uc3QgbWF4ID0gKyRyYW5nZS5kYXRhc2V0Lm1heDtcblxuICBub1VpU2xpZGVyLmNyZWF0ZSgkcmFuZ2UsIHtcbiAgICBzdGFydDogW21pbiwgbWF4XSxcbiAgICBjb25uZWN0OiB0cnVlLFxuICAgIHJhbmdlOiB7XG4gICAgICBtaW4sXG4gICAgICBtYXhcbiAgICB9LFxuICAgIHN0ZXA6IDEwMFxuICB9KTtcblxuICAkcmFuZ2Uubm9VaVNsaWRlci5vbignc2xpZGUnLCB2YWx1ZXMgPT4ge1xuICAgIGNvbnN0IG1pbiA9IHBhcnNlSW50KHZhbHVlc1swXSk7XG4gICAgY29uc3QgbWF4ID0gcGFyc2VJbnQodmFsdWVzWzFdKTtcblxuICAgICRyYW5nZS5jbG9zZXN0KCcuZmlsdGVyc19faW5wdXQnKS5xdWVyeVNlbGVjdG9yKCcuZmlsdGVyc19faW5wdXQtZmllbGQnKS52YWx1ZSA9IGAke21pbn0g4oK9IOKAkyAke21heH0g4oK9YDtcbiAgICAkcmFuZ2UuY2xvc2VzdCgnLmZpbHRlcnNfX2Nvc3QnKS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jb3N0PVwiZnJvbVwiXScpLmlubmVyVGV4dCA9IG1pbjtcbiAgICAkcmFuZ2UuY2xvc2VzdCgnLmZpbHRlcnNfX2Nvc3QnKS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jb3N0PVwidG9cIl0nKS5pbm5lclRleHQgPSBtYXg7XG4gIH0pO1xufSk7XG5cblxuLy8gaGFuZGxlIGZpbHRlciBjaGVja2JveFxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmlsdGVyc19fZHJvcGRvd24tY2hlY2tib3gnKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCAkaW5wdXRGaWVsZCA9IGVsLmNsb3Nlc3QoJy5maWx0ZXJzX19pbnB1dCcpLnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXJzX19pbnB1dC1maWVsZCcpO1xuXG4gIGlmIChlbC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLmNoZWNrZWQpIHtcbiAgICBjb25zdCBjaGVja2JveFZhbHVlID0gZWwucXVlcnlTZWxlY3RvcignLmNoZWNrYm94X190ZXh0JykuaW5uZXJUZXh0O1xuICBcbiAgICAkaW5wdXRGaWVsZC52YWx1ZSA9IGNoZWNrYm94VmFsdWU7XG4gICAgJGlucHV0RmllbGQuc2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJywgY2hlY2tib3hWYWx1ZSk7XG4gICAgJGlucHV0RmllbGQuc2V0QXR0cmlidXRlKCdyZWFkb25seScsICdyZWFkb25seScpO1xuICB9IGVsc2Uge1xuICAgICRpbnB1dEZpZWxkLnZhbHVlID0gJyc7XG4gICAgJGlucHV0RmllbGQuc2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJywgJycpO1xuICAgICRpbnB1dEZpZWxkLnJlbW92ZUF0dHJpYnV0ZSgncmVhZG9ubHknKTtcbiAgfVxufSkpO1xuICAvLyBzaG93IGhpZGRuZSBzdWJqZWN0IGluIHR1dG9yY2FyZFxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtdHV0b3JjYXJkLW1vcmUnKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gIEFycmF5LmZyb20oZWwuY2xvc2VzdCgnLnR1dG9yY2FyZF9fc3ViamVjdHMnKS5xdWVyeVNlbGVjdG9yQWxsKCcudHV0b3JjYXJkX19zdWJqZWN0cy1pdGVtLS1oaWRkZW4nKSkubWFwKGVsID0+IHtcbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCd0dXRvcmNhcmRfX3N1YmplY3RzLWl0ZW0tLWhpZGRlbicpO1xuICB9KTtcbn0pKTtcbiAgY29uc3QgJHByb2ZpbGVWaWRlb0NvdmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtYWJvdXRfX3ZpZGVvLWNvdmVyJyk7XG5cbi8vIHBsYXkgdmlkZSBvbiBhYm91dCBzZWN0aW9uXG5pZiAoJHByb2ZpbGVWaWRlb0NvdmVyKSB7XG4gICRwcm9maWxlVmlkZW9Db3Zlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAkcHJvZmlsZVZpZGVvQ292ZXIuY2xhc3NMaXN0LmFkZCgncHJvZmlsZS1hYm91dF9fdmlkZW8tY292ZXItLWhpZGRlbicpO1xuICAgICRwcm9maWxlVmlkZW9Db3Zlci5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ3ZpZGVvJykucGxheSgpO1xuICB9KTtcbn1cbiAgLy8gaW5pdCBmYWtlU2Nyb2xsIG9uIHRpbWV6b25lIGRyb3Bkb3duXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGUnKSkge1xuICBjb25zdCAkdGltZXpvbmVEcm9wZG93biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlLXNjaGVkdWxlX190aW1lem9uZS1tZW51Jyk7XG5cbiAgaWYgKCEkdGltZXpvbmVEcm9wZG93bi5jbGFzc0xpc3QuY29udGFpbnMoJ2Zha2VTY3JvbGwnKSkge1xuICAgICR0aW1lem9uZURyb3Bkb3duLmZha2VTY3JvbGwoKTtcbiAgfVxufVxuXG5jb25zdCBzZXREYXRlVGltZSA9ICgpID0+IHtcbiAgY29uc3QgJGN1cnJlbnRVbml0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX3VuaXQtLWN1cnJlbnQnKTtcbiAgY29uc3QgJHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXBvcHVwW2RhdGEtcG9wdXA9XCJyZXF1ZXN0LXNwZWNpZmljXCJdJyk7XG5cbiAgaWYgKCRjdXJyZW50VW5pdCkge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgZGF0ZSA9ICRjdXJyZW50VW5pdC5kYXRhc2V0LmRhdGU7XG4gICAgICBjb25zdCB0aW1lID0gJGN1cnJlbnRVbml0LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlLXNjaGVkdWxlX190aW1lLXZhbHVlJykuaW5uZXJUZXh0O1xuICBcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlLXNjaGVkdWxlX19waWNrJykuY2xhc3NMaXN0LmFkZCgncHJvZmlsZS1zY2hlZHVsZV9fcGljay0tYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1zY2hlZHVsZV9fcGljay1kYXRlJykuaW5uZXJUZXh0ID0gZGF0ZTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlLXNjaGVkdWxlX19waWNrLXRpbWUnKS5pbm5lclRleHQgPSB0aW1lO1xuXG4gICAgICBpZiAoJHBvcHVwKSB7XG4gICAgICAgICRwb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2hlYWRpbmctZGF0ZScpLmlubmVyVGV4dCA9IGRhdGU7XG4gICAgICAgICRwb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2hlYWRpbmctdGltZScpLmlubmVyVGV4dCA9IHRpbWU7XG4gICAgICAgICRwb3B1cC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwidGltZVwiXScpLnZhbHVlID0gdGltZTtcbiAgICAgIH1cbiAgICB9LCAwKTtcbiAgfVxufVxuXG4vLyBoYW5kbGUgc2NoZWR1bGUgc2xpZGVyXG5jb25zdCAkcHJldkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlLXNjaGVkdWxlX19jb250cm9scy1idXR0b24tLXByZXYnKTtcbmNvbnN0ICRuZXh0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX2NvbnRyb2xzLWJ1dHRvbi0tbmV4dCcpO1xuXG5pZiAoJHByZXZCdXR0b24pIHtcbiAgJHByZXZCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgY29uc3QgJGFjdGl2ZVNsaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX3NsaWRlLS1hY3RpdmUnKTtcbiAgICBjb25zdCBjdXJyZW50SW5kZXggPSArJGFjdGl2ZVNsaWRlLmRhdGFzZXQuc2xpZGU7XG4gICAgY29uc3QgJHByZXZTbGlkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5wcm9maWxlLXNjaGVkdWxlX19zbGlkZVtkYXRhLXNsaWRlPVwiJHtjdXJyZW50SW5kZXggLSAxfVwiXWApO1xuICBcbiAgICBpZiAoJHByZXZTbGlkZSkge1xuICAgICAgJGFjdGl2ZVNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ3Byb2ZpbGUtc2NoZWR1bGVfX3NsaWRlLS1hY3RpdmUnKTtcbiAgICAgICRwcmV2U2xpZGUuY2xhc3NMaXN0LmFkZCgncHJvZmlsZS1zY2hlZHVsZV9fc2xpZGUtLWFjdGl2ZScpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX2NvbnRyb2xzLWJ1dHRvbi0tbmV4dCcpLmNsYXNzTGlzdC5yZW1vdmUoJ3Byb2ZpbGUtc2NoZWR1bGVfX2NvbnRyb2xzLWJ1dHRvbi0tZGlzYWJsZWQnKTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlLXNjaGVkdWxlX19jb250cm9scy1kYXRlcycpLmlubmVyVGV4dCA9ICRwcmV2U2xpZGUuZGF0YXNldC5kYXRlcztcbiAgXG4gICAgICBpZiAoJHByZXZTbGlkZS5kYXRhc2V0LmZpcnN0KSB7XG4gICAgICAgICRwcmV2QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3Byb2ZpbGUtc2NoZWR1bGVfX2NvbnRyb2xzLWJ1dHRvbi0tZGlzYWJsZWQnKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG5pZiAoJG5leHRCdXR0b24pIHtcbiAgJG5leHRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgY29uc3QgJGFjdGl2ZVNsaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX3NsaWRlLS1hY3RpdmUnKTtcbiAgICBjb25zdCBjdXJyZW50SW5kZXggPSArJGFjdGl2ZVNsaWRlLmRhdGFzZXQuc2xpZGU7XG4gICAgY29uc3QgJG5leHRTbGlkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5wcm9maWxlLXNjaGVkdWxlX19zbGlkZVtkYXRhLXNsaWRlPVwiJHtjdXJyZW50SW5kZXggKyAxfVwiXWApO1xuICBcbiAgICBpZiAoJG5leHRTbGlkZSkge1xuICAgICAgJGFjdGl2ZVNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ3Byb2ZpbGUtc2NoZWR1bGVfX3NsaWRlLS1hY3RpdmUnKTtcbiAgICAgICRuZXh0U2xpZGUuY2xhc3NMaXN0LmFkZCgncHJvZmlsZS1zY2hlZHVsZV9fc2xpZGUtLWFjdGl2ZScpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX2NvbnRyb2xzLWJ1dHRvbi0tcHJldicpLmNsYXNzTGlzdC5yZW1vdmUoJ3Byb2ZpbGUtc2NoZWR1bGVfX2NvbnRyb2xzLWJ1dHRvbi0tZGlzYWJsZWQnKTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlLXNjaGVkdWxlX19jb250cm9scy1kYXRlcycpLmlubmVyVGV4dCA9ICRuZXh0U2xpZGUuZGF0YXNldC5kYXRlcztcbiAgXG4gICAgICBpZiAoJG5leHRTbGlkZS5kYXRhc2V0Lmxhc3QpIHtcbiAgICAgICAgJG5leHRCdXR0b24uY2xhc3NMaXN0LmFkZCgncHJvZmlsZS1zY2hlZHVsZV9fY29udHJvbHMtYnV0dG9uLS1kaXNhYmxlZCcpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5cbi8vIGhhbmRsZSBzZWxlY3QgZGF0ZXRpbWUgdW5pdFxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvZmlsZS1zY2hlZHVsZV9fdW5pdCcpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KCcucHJvZmlsZS1zY2hlZHVsZV9fdGltZScpKSB7XG4gICAgY29uc3QgJGN1cnJlbnRVbml0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX3VuaXQtLWN1cnJlbnQnKTtcbiAgXG4gICAgaWYgKCRjdXJyZW50VW5pdCkge1xuICAgICAgJGN1cnJlbnRVbml0LmNsYXNzTGlzdC5yZW1vdmUoJ3Byb2ZpbGUtc2NoZWR1bGVfX3VuaXQtLWN1cnJlbnQnKTtcbiAgICB9XG4gIFxuICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3Byb2ZpbGUtc2NoZWR1bGVfX3VuaXQtLWN1cnJlbnQnKTtcbiAgICBzZXREYXRlVGltZSgpO1xuICB9XG59KSk7XG5cbi8vIGV4ZWN1dGUgc2V0IGRhdGV0aW1lIG9uIHRpbWUgY2hhbmdlXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9maWxlLXNjaGVkdWxlX190aW1lLW1lbnUgLmRyb3Bkb3duX19tZW51LWl0ZW0nKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2V0RGF0ZVRpbWUpKTtcblxuICBjb25zdCAkYmFubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhbm5lcicpO1xuXG4vLyBiYW5uZXIgaGFuZGxpbmdcbmlmICghSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGV0bWV0dXRvcjpiYW5uZXJJc0hpZGRlbicpKSkge1xuICAkYmFubmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYW5uZXJfX2Nsb3NlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgJGJhbm5lci5jbGFzc0xpc3QuYWRkKCdiYW5uZXItLWhpZGUnKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICRiYW5uZXIucmVtb3ZlKCk7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbGV0bWV0dXRvcjpiYW5uZXJJc0hpZGRlbicsIHRydWUpO1xuICAgIH0sIDUwMClcbiAgfSk7XG59IGVsc2Uge1xuICAkYmFubmVyLnJlbW92ZSgpO1xufVxuICBjb25zdCAkY29va2llcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb29raWVzJyk7XG5cbi8vIGNvb2tpZXMgaGFuZGxpbmdcbmlmICghSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGV0bWV0dXRvcjpjb29raWVzSXNIaWRkZW4nKSkpIHtcbiAgJGNvb2tpZXMuY2xhc3NMaXN0LmFkZCgnY29va2llcy0tc2hvd24nKTtcblxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29va2llc19fYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgJGNvb2tpZXMuY2xhc3NMaXN0LnJlbW92ZSgnY29va2llcy0tc2hvd24nKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICRjb29raWVzLnJlbW92ZSgpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xldG1ldHV0b3I6Y29va2llc0lzSGlkZGVuJywgdHJ1ZSk7XG4gICAgfSwgNTAwKVxuICB9KTtcbn0gZWxzZSB7XG4gICRjb29raWVzLnJlbW92ZSgpO1xufVxuICBsZXQgb2Zmc2V0ID0gMDtcbmNvbnN0IGhpZGVPdmVyZmxvdyA9ICgpID0+IHtcbiAgb2Zmc2V0ID0gLXBhcnNlSW50KGRvY3VtZW50LmJvZHkuc3R5bGUubWFyZ2luVG9wKTtcbiAgZG9jdW1lbnQuYm9keS5zdHlsZS5jc3NUZXh0ID0gYHBvc2l0aW9uOiBmaXhlZDsgbWFyZ2luLXRvcDogJHstd2luZG93LnNjcm9sbFl9cHhgO1xufTtcbmNvbnN0IHNob3dPdmVyZmxvdyA9IG9mZnNldCA9PiB7XG4gIGRvY3VtZW50LmJvZHkuc3R5bGUuY3NzVGV4dCA9ICdwb3NpdGlvbjogc3RhdGljOyBtYXJnaW4tdG9wOiAwJztcbiAgd2luZG93LnNjcm9sbFRvKDAsIG9mZnNldCk7XG59O1xuY29uc3QgaGlkZUhlYWRlck1lbnUgPSAoKSA9PiB7XG4gIHNob3dPdmVyZmxvdygpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLW1lbnUnKS5jbGFzc0xpc3QucmVtb3ZlKCdoZWFkZXItbWVudS0tc2hvd24nKTtcbn07XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2J1cmdlcicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBoaWRlT3ZlcmZsb3coKTtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlci1tZW51JykuY2xhc3NMaXN0LmFkZCgnaGVhZGVyLW1lbnUtLXNob3duJyk7XG59KTtcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlci1tZW51X19iYWNrZHJvcCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGlkZUhlYWRlck1lbnUpO1xuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlci1tZW51X19jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGlkZUhlYWRlck1lbnUpO1xuXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oZWFkZXJfX25vdGlmaWNhdGlvbnMtd3JhcHBlcicpKS5tYXAoZWwgPT4ge1xuICBpZiAoIWVsLmNsYXNzTGlzdC5jb250YWlucygnZmFrZVNjcm9sbCcpKSB7XG4gICAgZWwuZmFrZVNjcm9sbCgpO1xuICB9XG59KTtcbiAgY29uc3QgcG9wdWxhclNsaWRlciA9IG5ldyBTd2lwZXIoJy5wb3B1bGFyX19ncmlkLS1tb2JpbGUnLCB7XG4gIGxvb3A6IHRydWUsXG4gIGxvb3BBZGRpdGlvbmFsU2xpZGVzOiAzLFxuICBzcGFjZUJldHdlZW46IDIwLFxuICBzbGlkZXNQZXJWaWV3OiAnYXV0bycsXG4gIGNlbnRlcmVkU2xpZGVzOiB0cnVlLFxuICBicmVha3BvaW50czoge1xuICAgIDc2MDoge1xuICAgICAgc2xpZGVzUGVyVmlldzogMixcbiAgICAgIGNlbnRlcmVkU2xpZGVzOiBmYWxzZVxuICAgIH1cbiAgfVxufSk7XG4gIGNvbnN0IHJldmlld3NTbGlkZXIgPSBuZXcgU3dpcGVyKCcucmV2aWV3c19fc2xpZGVyJywge1xuICBsb29wOiB0cnVlLFxuICBzcGFjZUJldHdlZW46IDIwLFxuICBzbGlkZXNQZXJWaWV3OiAzLFxuICBzbGlkZXNQZXJHcm91cDogMyxcbiAgbG9vcEFkZGl0aW9uYWxTbGlkZXM6IDMsXG4gIHBhZ2luYXRpb246IHtcbiAgICBlbDogJy5zd2lwZXItcGFnaW5hdGlvbicsXG4gICAgY2xpY2thYmxlOiB0cnVlXG4gIH1cbn0pO1xuXG5jb25zdCByZXZpZXdTbGlkZXJNb2JpbGUgPSBuZXcgU3dpcGVyKCcucmV2aWV3c19fc2xpZGVyLS1tb2JpbGUnLCB7XG4gIGxvb3A6IHRydWUsXG4gIHNwYWNlQmV0d2VlbjogMjAsXG4gIGxvb3BBZGRpdGlvbmFsU2xpZGVzOiAzLFxuICBwYWdpbmF0aW9uOiB7XG4gICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxuICAgIGNsaWNrYWJsZTogdHJ1ZVxuICB9XG59KTtcbiAgLy8gYXV0aCBmb3JtIHZhbGlkYXRpb25cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtbG9naW4tZm9ybV0nKSkge1xuICAkYXBpLnZhbGlkYXRlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1sb2dpbi1mb3JtXScpLCAoKSA9PiB7Y29uc29sZS5sb2codHJ1ZSl9KTtcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1zaWdudXAtc3R1ZGVudC1mb3JtXScpKSB7XG4gICRhcGkudmFsaWRhdGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXNpZ251cC1zdHVkZW50LWZvcm1dJyksICgpID0+IHt9KTtcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1zaWdudXAtdHV0b3ItZm9ybV0nKSkge1xuICAkYXBpLnZhbGlkYXRlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1zaWdudXAtdHV0b3ItZm9ybV0nKSwgKCkgPT4ge30pO1xufVxuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXN1cHBvcnQtZm9ybV0nKSkge1xuICAkYXBpLnZhbGlkYXRlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1zdXBwb3J0LWZvcm1dJyksICgpID0+IHt9KTtcbn1cblxuLy8gc2V0IGNvdW50cnkgdmFsdWUgdG8gY2l0aWVzIGlucHV0XG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1hdXRoLWNvdW50cnknKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZUNvdW50cnknLCBlID0+IHtcbiAgZWwuY2xvc2VzdCgnZm9ybScpLnF1ZXJ5U2VsZWN0b3IoJy5qcy1hdXRoLWNpdHknKS5kYXRhc2V0LmNvdW50cnkgPSBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLnZhbHVlO1xufSkpO1xuXG4vLyBoYW5kbGluZyBjaXRpZXMgaW5wdXRcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtYXV0aC1jaXR5IGlucHV0JykubGVuZ3RoKSB7XG4gIGNvbnN0IGNpdGllc0RhdGEgPSBbe1xuICAgIFwia2V5XCI6IFwi0KDQvtGB0YHQuNGPXCIsXG4gICAgXCJjaXRpZXNcIjogW1xuICAgICAgXCLQnNC+0YHQutCy0LBcIixcbiAgICAgIFwi0KHQsNC90LrRgi3Qn9C10YLQtdGA0LHRg9GA0LNcIixcbiAgICAgIFwi0JrQsNC30LDQvdGMXCIsXG4gICAgICBcItCd0LjQttC90LjQuSDQndC+0LLQs9C+0YDQvtC0XCIsXG4gICAgICBcItCh0L7Rh9C4XCIsXG4gICAgICBcItCV0LrQsNGC0LXRgNC40L3QsdGD0YDQs1wiLFxuICAgICAgXCLQoNC+0YHRgtC+0LIt0L3QsC3QlNC+0L3Rg1wiLFxuICAgICAgXCLQndC+0LLQvtGB0LjQsdC40YDRgdC6XCIsXG4gICAgICBcItCi0Y7QvNC10L3RjFwiLFxuICAgICAgXCLQmtCw0LvQuNC90LjQvdCz0YDQsNC0XCIsXG4gICAgICBcItCj0YTQsFwiLFxuICAgICAgXCLQmtGA0LDRgdC90L7Rj9GA0YHQulwiLFxuICAgICAgXCLQmtGA0LDRgdC90L7QtNCw0YBcIixcbiAgICAgIFwi0KfQtdC70Y/QsdC40L3RgdC6XCIsXG4gICAgICBcItCS0L7RgNC+0L3QtdC2XCJcbiAgICBdXG4gIH0sXG4gIHtcImtleVwiOiBcItCj0LrRgNCw0LjQvdCwXCIsXG4gICAgXCJjaXRpZXNcIjogW1xuICAgICAgXCLQmtC40LXQslwiLFxuICAgICAgXCLQlNC90LXQv9GAXCIsXG4gICAgICBcItCU0L7QvdC10YbQulwiLFxuICAgICAgXCLQl9Cw0L/QvtGA0L7QttGM0LVcIixcbiAgICAgIFwi0JvRjNCy0L7QslwiLFxuICAgICAgXCLQmtGA0LjQstC+0Lkg0KDQvtCzXCIsXG4gICAgICBcItCh0LXQstCw0YHRgtC+0L/QvtC70YxcIixcbiAgICAgIFwi0J3QuNC60L7Qu9Cw0LXQslwiLFxuICAgICAgXCLQnNCw0YDQuNGD0L/QvtC70YxcIlxuICAgIF1cbiAgfV07XG5cbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtYXV0aC1jaXR5IGlucHV0JykpLm1hcChlbCA9PiB7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBlbCA9PiB7XG4gICAgICBjb25zdCAkdGhpcyA9IGVsLmN1cnJlbnRUYXJnZXQ7XG4gICAgICBjb25zdCAkbGFiZWxFbGVtZW50ID0gJHRoaXMuY2xvc2VzdCgnLmlucHV0Jyk7XG4gICAgICBjb25zdCBjb3VudHJ5ID0gJGxhYmVsRWxlbWVudC5kYXRhc2V0LmNvdW50cnk7XG4gICAgICBcbiAgICAgIGlmIChjb3VudHJ5KSB7XG4gICAgICAgIGNvbnN0IGNpdGllcyA9IGNpdGllc0RhdGEuZmlsdGVyKGVsID0+IGVsLmtleSA9PT0gY291bnRyeSlbMF0uY2l0aWVzO1xuICAgICAgICBjb25zdCBsb3dlckNhc2VWYWx1ZSA9ICR0aGlzLnZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0ICRkcm9wZG93bkVsZW1lbnQgPSAkdGhpcy5jbG9zZXN0KCcuaW5wdXQnKS5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd25fX21lbnUnKTtcbiAgICAgICAgbGV0IG1hdGNoZXNGb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgICRkcm9wZG93bkVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgICAgaWYgKGVsLmN1cnJlbnRUYXJnZXQudmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgY2l0aWVzLm1hcChlbCA9PiB7XG4gICAgICAgICAgICBpZiAoZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKGxvd2VyQ2FzZVZhbHVlKSA9PT0gMCkge1xuICAgICAgICAgICAgICBtYXRjaGVzRm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAkZHJvcGRvd25FbGVtZW50Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgYDxhIGNsYXNzPVwiaW5wdXRfX2Ryb3Bkb3duLWl0ZW0gZHJvcGRvd25fX21lbnUtaXRlbSR7bG93ZXJDYXNlVmFsdWUgPyAnIGlucHV0X19kcm9wZG93bi1pdGVtLS1zbWFydCcgOiAnJ31cIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCI+PHNwYW4+JHtlbC5zdWJzdHIoMCwgbG93ZXJDYXNlVmFsdWUubGVuZ3RoKX08L3NwYW4+JHtlbC5zdWJzdHIobG93ZXJDYXNlVmFsdWUubGVuZ3RoKX08L2E+YClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChtYXRjaGVzRm91bmQpIHtcbiAgICAgICAgICAgIEFycmF5LmZyb20oJGxhYmVsRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW5wdXRfX2Ryb3Bkb3duLWl0ZW0nKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAkdGhpcy52YWx1ZSA9IGVsLmlubmVyVGV4dDtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4ge1xuICAgICAgY29uc3QgJGRyb3Bkb3duRWxlbWVudCA9IGVsLmNsb3Nlc3QoJy5pbnB1dCcpLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bl9fbWVudScpO1xuICBcbiAgICAgICRkcm9wZG93bkVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgfSk7XG4gIH0pO1xufVxuXG4vLyBoYW5kbGluZyByZXF1aXJlZCBhZ3JlZW1lbnQgY2hlY2tib3hcbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbbmFtZT1cInJ1bGVzQWdyZWVtZW50XCJdJykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gIGNvbnN0ICRzdWJtaXRCdXR0b24gPSBlbC5jbG9zZXN0KCdmb3JtJykucXVlcnlTZWxlY3RvcignYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcblxuICBpZiAoZWwuY2hlY2tlZCkge1xuICAgICRzdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYnV0dG9uLS1kaXNhYmxlZCcpO1xuICAgICRzdWJtaXRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICB9IGVsc2Uge1xuICAgICRzdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCgnYnV0dG9uLS1kaXNhYmxlZCcpO1xuICAgICRzdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICB9XG59KSk7XG5cbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmF1dGhfX3RvZ2dsZSAudGFic19faXRlbScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hdXRoX190eXBlJykudmFsdWUgPSBlbC5kYXRhc2V0LnRhYiAtIDE7XG59KSk7XG4gIC8vIHNjcm9sbCB0byB0dXRvciBzZWN0aW9uXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50dXRvcl9fbmF2LWxpbmsnKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCB0YXJnZXQgPSBlbC5kYXRhc2V0LnRhcmdldDtcblxuICBzY3JvbGxUbyh7XG4gICAgdG9wOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1ibG9jaz1cIiR7dGFyZ2V0fVwiXWApLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHdpbmRvdy5wYWdlWU9mZnNldCAtIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKS5vZmZzZXRIZWlnaHQsXG4gICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gIH0pO1xufSkpO1xuXG59Il19
