"use strict";window.onload=function(){var e={popup:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.onHide,o=t.onShow,n=function(){document.body.style.cssText="position: fixed; margin-top: ".concat(-window.scrollY,"px")},c=function(e){document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,e)};return{isShown:function(){return e.classList.contains("popup--opened")},show:function(){var t=new Promise((function(t){e.style.display="block",t()}));n(),t.then((function(){e.classList.add("popup--opened"),"function"==typeof o&&o()}))},hide:function(){var t=-parseInt(document.body.style.marginTop);e.classList.remove("popup--opened"),setTimeout((function(){e.style.display="none",c(t),"function"==typeof r&&r()}),300)}}},validate:function(e,t){var r=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,o=function(e){e.closest(".input")?e.closest(".input").classList.add("input--error"):e.closest(".textarea")&&e.closest(".textarea").classList.add("textarea--error"),e.focus()};e.querySelector('button[type="submit"]').addEventListener("click",(function(n){n.preventDefault();var c=!0,a=Array.from(e.querySelectorAll("input[required], textarea[required]")),s=e.querySelectorAll(".checkboxselect");a.reverse().map((function(e){switch(e.dataset.passRepeat&&e.value!==e.closest("form").querySelector("input[data-pass]").value&&o(e),e.getAttribute("type")){case"text":case"password":""===e.value&&(o(e),c=!1);break;case"tel":(""===e.value||e.value.includes("_"))&&(o(e),c=!1);break;case"checkbox":e.checked||(e.closest(".checkbox").classList.add("checkbox--error"),c=!1);break;case"email":r.test(e.value)||(o(e),c=!1);break;default:""===e.value&&(o(e),c=!1)}})),s.length&&Array.from(s).map((function(e){var t=!1;Array.from(e.querySelectorAll(".checkbox__input")).map((function(e){e.checked&&(t=!0)})),t||(e.classList.add("checkboxselect--error"),c=!1)})),c&&t()})),Array.from(e.querySelectorAll("input")).concat(Array.from(e.querySelectorAll("textarea"))).map((function(e){return e.addEventListener("input",(function(){e.closest(".input")?e.closest(".input").classList.remove("input--error"):e.closest(".checkbox")?e.closest(".checkbox").classList.remove("checkbox--error"):e.closest(".textarea")&&e.closest(".textarea").classList.remove("textarea--error")}))}))}};Array.from(document.querySelectorAll(".js-open-popup")).map((function(t){return t.addEventListener("click",(function(t){t.preventDefault();var r=t.currentTarget.dataset.popup,o=document.querySelector('.js-popup[data-popup="'.concat(r,'"]'));e.popup(o).show()}))})),Array.from(document.querySelectorAll(".js-close-popup")).map((function(t){return t.addEventListener("click",(function(t){if(!t.target.closest(".popup__window")||!t.currentTarget.classList.contains("js-popup")){var r=t.currentTarget.closest(".popup");e.popup(r).hide()}}))})),document.querySelector("form[data-restore-form]")&&e.validate(document.querySelector("form[data-restore-form]"),(function(){})),document.querySelector("form[data-request-auth-form]")&&e.validate(document.querySelector("form[data-request-auth-form]"),(function(){})),document.querySelector("form[data-request-form]")&&e.validate(document.querySelector("form[data-request-form]"),(function(){var t=document.querySelector('.js-popup[data-popup="request"]'),r=document.querySelector('.js-popup[data-popup="request-success"]');e.popup(t,{onHide:function(){Array.from(t.querySelectorAll("input")).map((function(e){return e.value=""})),e.popup(r).show()}}).hide()})),document.querySelector("form[data-request-specific-form]")&&e.validate(document.querySelector("form[data-request-specific-form]"),(function(){var t=document.querySelector('.js-popup[data-popup="request-specific"]'),r=document.querySelector('.js-popup[data-popup="request-success"]');e.popup(t,{onHide:function(){Array.from(t.querySelectorAll("input")).map((function(e){return e.value=""})),e.popup(r).show()}}).hide()}));var t=Array.from(document.querySelectorAll(".dropdown"));document.addEventListener("click",(function(e){var r=e.target;t.map((function(e){e.closest(".dropdown")!==r.closest(".dropdown")&&e.classList.remove("dropdown--active")}))})),t.map((function(e){return e.addEventListener("click",(function(r){e.classList.contains("input__code")&&r.preventDefault(),e.classList.contains("dropdown--active")||(t.map((function(e){return e!=e&&e.classList.remove("dropdown--active")})),e.classList.toggle("dropdown--active"))}))})),document.addEventListener("click",(function(e){var t=e.target.closest(".dropdown__menu-item");if(t&&(document.querySelector(".dropdown--active").classList.remove("dropdown--active"),t.getAttribute("data-toggle"))){var r=e.target,o=r.innerText,n=r.closest(".dropdown__menu").querySelector(".dropdown__menu-item--hidden"),c=r.closest(".dropdown").querySelector(".dropdown__value");n&&n.classList.remove("dropdown__menu-item--hidden"),t.classList.add("dropdown__menu-item--hidden"),c.innerText=o}})),Array.from(document.querySelectorAll(".tabs__item")).map((function(e){return e.addEventListener("click",(function(t){t.preventDefault();var r=e.dataset.tab,o=e.closest("[data-tabs]").querySelector("[data-active]");e.closest(".tabs").querySelector(".tabs__item--active").classList.remove("tabs__item--active"),e.classList.add("tabs__item--active"),o&&(e.closest("[data-tabs]").querySelector("[data-active]").removeAttribute("data-active"),e.closest("[data-tabs]").querySelector('[data-content="'.concat(r,'"]')).setAttribute("data-active",!0))}))}));var r=new Event("changeCountry");Array.from(document.querySelectorAll(".input.dropdown")).concat(Array.from(document.querySelectorAll(".input .dropdown"))).map((function(e){return e.addEventListener("click",(function(){var t=e.querySelector(".dropdown__menu");e.closest(".input").querySelector(".input__dropdown").style.width=e.closest(".input").getBoundingClientRect().width+"px",t.classList.contains("fakeScroll")||t.fakeScroll()}))})),Array.from(document.querySelectorAll(".input__dropdown-item[data-code-loc]")).map((function(e){return e.addEventListener("click",(function(){var t=e.dataset.codeLoc,r=e.dataset.mask,o=e.closest(".input").querySelector("input");e.closest(".input__code").dataset.codeLoc=t,e.closest(".input__code").dataset.mask=r,o.placeholder=r.replaceAll("9","_"),function(e,t){Inputmask({mask:t}).mask(e)}(o,r)}))})),Array.from(document.querySelectorAll(".input__dropdown-item[data-dropdown]")).map((function(e){return e.addEventListener("click",(function(){var t=e.innerText;e.closest(".input").querySelector("input").value=t,e.closest(".input").classList.remove("input--error"),e.closest(".input").classList.contains("js-auth-country")&&e.closest(".input").dispatchEvent(r)}))})),Array.from(document.querySelectorAll('input[type="tel"]')).map((function(e){Inputmask({mask:e.closest(".input").querySelector(".input__code").dataset.mask}).mask(e)})),Array.from(document.querySelectorAll(".checkboxselect__list")).map((function(e){e.addEventListener("click",(function(t){t.stopPropagation();var r=e.closest(".checkboxselect"),o=!1;r.classList.remove("checkboxselect--error"),Array.from(e.querySelectorAll(".checkbox__input")).map((function(t){var n=r.querySelector(".checkboxselect__input-placeholder");t.checked&&(o=!0),t.addEventListener("click",(function(){var t="";Array.from(e.querySelectorAll("input:checked")).map((function(e){t+=e.closest(".checkboxselect__item").querySelector(".checkbox__text").innerText+", "})),t?(n.innerText=t.substring(0,t.length-2),n.classList.add("checkboxselect__input-placeholder--active")):(n.innerText=n.dataset.placeholder,n.classList.remove("checkboxselect__input-placeholder--active"))}))})),o?r.classList.add("checkboxselect--checked"):r.classList.remove("checkboxselect--checked")})),e.fakeScroll()})),Array.from(document.querySelectorAll(".filters__dropdown-item")).map((function(e){return e.addEventListener("click",(function(e){var t=e.currentTarget,r=t.innerText;t.closest(".filters__input").querySelector(".filters__input-field").value=r}))})),document.querySelectorAll(".filters__input-field").length&&Array.from(document.querySelectorAll(".filters__input-field")).map((function(e){fetch("data/location.json").then((function(e){return e.json()})).then((function(t){var r=e,o=function(e){var o=r.nextElementSibling.querySelector(".filters__dropdown-inner"),n=o.querySelector(".fakeScroll__content")||o,c="location"===r.getAttribute("name"),a=c?t.map((function(e){return e.key})).concat(t.flatMap((function(e){return e.cities}))):JSON.parse(r.dataset.options),s=r.value.toLowerCase(),i=n.closest(".filters__dropdown").querySelector('input[type="checkbox"]'),l=!1;n.innerHTML="",a.map((function(t){if(e||0===t.toLowerCase().indexOf(s)){var r=c?'<a class="filters__dropdown-item dropdown__menu-item'.concat(s&&!e?" filters__dropdown-item--smart":"",'" href="javascript:void(0)"><span>').concat(t.substr(0,s.length),"</span>").concat(t.substr(s.length),"</a>"):'<a class="filters__dropdown-item dropdown__menu-item" href="javascript:void(0)">'.concat(t,"</a>");l=!0,n.insertAdjacentHTML("beforeend",r)}})),l?(o.parentNode.classList.remove("filters__dropdown--hidden"),o.parentNode.classList.remove("filters__dropdown--empty")):i?o.parentNode.classList.add("filters__dropdown--empty"):o.parentNode.classList.add("filters__dropdown--hidden"),Array.from(n.querySelectorAll(".filters__dropdown-item")).map((function(e){return e.addEventListener("click",(function(){r.value=e.innerText,r.setAttribute("data-value",e.innerText),i&&(i.checked=!1,r.removeAttribute("readonly"))}))})),e&&!o.classList.contains("fakeScroll")&&n.fakeScroll()};"cost"!==r.name&&(r.addEventListener("input",(function(){return o(!1)})),r.addEventListener("focus",(function(){return o(!0)})),r.addEventListener("blur",(function(){""!==r.value&&r.dataset.value?r.value=r.dataset.value:r.value=""})))}))})),Array.from(document.querySelectorAll(".filters__cost-range")).map((function(e){var t=+e.dataset.min,r=+e.dataset.max;noUiSlider.create(e,{start:[t,r],connect:!0,range:{min:t,max:r},step:100}),e.noUiSlider.on("slide",(function(t){var r=parseInt(t[0]),o=parseInt(t[1]);e.closest(".filters__input").querySelector(".filters__input-field").value="".concat(r," ₽ – ").concat(o," ₽"),e.closest(".filters__cost").querySelector('[data-cost="from"]').innerText=r,e.closest(".filters__cost").querySelector('[data-cost="to"]').innerText=o}))})),Array.from(document.querySelectorAll(".filters__dropdown-checkbox")).map((function(e){return e.addEventListener("click",(function(){var t=e.closest(".filters__input").querySelector(".filters__input-field");if(e.querySelector("input").checked){var r=e.querySelector(".checkbox__text").innerText;t.value=r,t.setAttribute("data-value",r),t.setAttribute("readonly","readonly")}else t.value="",t.setAttribute("data-value",""),t.removeAttribute("readonly")}))})),Array.from(document.querySelectorAll(".js-tutorcard-more")).map((function(e){return e.addEventListener("click",(function(){e.style.display="none",Array.from(e.closest(".tutorcard__subjects").querySelectorAll(".tutorcard__subjects-item--hidden")).map((function(e){e.classList.remove("tutorcard__subjects-item--hidden")}))}))}));var o=document.querySelector(".profile-about__video-cover");if(o&&o.addEventListener("click",(function(){var e=o.parentNode.querySelector("iframe");o.parentNode.querySelector("iframe").setAttribute("src",e.getAttribute("src")+"?autoplay=1"),o.classList.add("profile-about__video-cover--hidden")})),document.querySelector(".profile-schedule")){var n=document.querySelector(".profile-schedule__timezone-menu");n.classList.contains("fakeScroll")||n.fakeScroll()}var c=function(){var e=document.querySelector(".profile-schedule__unit--current"),t=document.querySelector('.js-popup[data-popup="request-specific"]');e&&setTimeout((function(){var r=e.dataset.date,o=e.querySelector(".profile-schedule__time-value").innerText;document.querySelector(".profile-schedule__pick").classList.add("profile-schedule__pick--active"),document.querySelector(".profile-schedule__pick-date").innerText=r,document.querySelector(".profile-schedule__pick-time").innerText=o,t&&(t.querySelector(".popup__heading-date").innerText=r,t.querySelector(".popup__heading-time").innerText=o,t.querySelector('input[name="time"]').value=o)}),0)},a=document.querySelector(".profile-schedule__controls-button--prev"),s=document.querySelector(".profile-schedule__controls-button--next");a&&a.addEventListener("click",(function(){var e=document.querySelector(".profile-schedule__slide--active"),t=+e.dataset.slide,r=document.querySelector('.profile-schedule__slide[data-slide="'.concat(t-1,'"]'));r&&(e.classList.remove("profile-schedule__slide--active"),r.classList.add("profile-schedule__slide--active"),document.querySelector(".profile-schedule__controls-button--next").classList.remove("profile-schedule__controls-button--disabled"),document.querySelector(".profile-schedule__controls-dates").innerText=r.dataset.dates,r.dataset.first&&a.classList.add("profile-schedule__controls-button--disabled"))})),s&&s.addEventListener("click",(function(){var e=document.querySelector(".profile-schedule__slide--active"),t=+e.dataset.slide,r=document.querySelector('.profile-schedule__slide[data-slide="'.concat(t+1,'"]'));r&&(e.classList.remove("profile-schedule__slide--active"),r.classList.add("profile-schedule__slide--active"),document.querySelector(".profile-schedule__controls-button--prev").classList.remove("profile-schedule__controls-button--disabled"),document.querySelector(".profile-schedule__controls-dates").innerText=r.dataset.dates,r.dataset.last&&s.classList.add("profile-schedule__controls-button--disabled"))})),Array.from(document.querySelectorAll(".profile-schedule__unit")).map((function(e){return e.addEventListener("click",(function(t){if(!t.target.closest(".profile-schedule__time")){var r=document.querySelector(".profile-schedule__unit--current");r&&r.classList.remove("profile-schedule__unit--current"),e.classList.add("profile-schedule__unit--current"),c()}}))})),Array.from(document.querySelectorAll(".profile-schedule__time-menu .dropdown__menu-item")).map((function(e){return e.addEventListener("click",c)}));var i=document.querySelector(".banner");JSON.parse(localStorage.getItem("letmetutor:bannerIsHidden"))?i.remove():(i.style.display="flex",document.querySelector(".banner__close").addEventListener("click",(function(){i.classList.add("banner--hide"),setTimeout((function(){i.remove(),localStorage.setItem("letmetutor:bannerIsHidden",!0)}),500)})));var l=document.querySelector(".cookies");JSON.parse(localStorage.getItem("letmetutor:cookiesIsHidden"))?l.remove():(l.classList.add("cookies--shown"),document.querySelector(".cookies__btn").addEventListener("click",(function(){l.classList.remove("cookies--shown"),setTimeout((function(){l.remove(),localStorage.setItem("letmetutor:cookiesIsHidden",!0)}),500)})));var u=function(){!function(e){document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,e)}(),document.querySelector(".header-menu").classList.remove("header-menu--shown")};document.querySelector(".header__burger").addEventListener("click",(function(){-parseInt(document.body.style.marginTop),document.body.style.cssText="position: fixed; margin-top: ".concat(-window.scrollY,"px"),document.querySelector(".header-menu").classList.add("header-menu--shown")})),document.querySelector(".header-menu__backdrop").addEventListener("click",u),document.querySelector(".header-menu__close").addEventListener("click",u),Array.from(document.querySelectorAll(".header__notifications-wrapper")).map((function(e){e.classList.contains("fakeScroll")||e.fakeScroll()}));new Swiper(".popular__grid--mobile",{loop:!0,loopAdditionalSlides:3,spaceBetween:20,slidesPerView:"auto",centeredSlides:!0,breakpoints:{760:{slidesPerView:2,centeredSlides:!1}}}),new Swiper(".reviews__slider",{loop:!0,spaceBetween:20,slidesPerView:3,slidesPerGroup:3,loopAdditionalSlides:3,pagination:{el:".swiper-pagination",clickable:!0}}),new Swiper(".reviews__slider--mobile",{loop:!0,spaceBetween:20,loopAdditionalSlides:3,pagination:{el:".swiper-pagination",clickable:!0}});document.querySelector("form[data-login-form]")&&e.validate(document.querySelector("form[data-login-form]"),(function(){document.querySelector("form[data-login-form]").submit()})),document.querySelector("form[data-signup-student-form]")&&e.validate(document.querySelector("form[data-signup-student-form]"),(function(){document.querySelector("form[data-signup-student-form]").submit()})),document.querySelector("form[data-signup-tutor-form]")&&e.validate(document.querySelector("form[data-signup-tutor-form]"),(function(){document.querySelector("form[data-signup-tutor-form]").submit()})),document.querySelector("form[data-support-form]")&&e.validate(document.querySelector("form[data-support-form]"),(function(){document.querySelector("form[data-support-form]").submit()})),Array.from(document.querySelectorAll(".js-auth-country")).map((function(e){return e.addEventListener("changeCountry",(function(t){e.closest("form").querySelector(".js-auth-city").dataset.country=t.target.querySelector("input").value}))})),document.querySelectorAll(".js-auth-city input").length&&fetch("data/location.json").then((function(e){return e.json()})).then((function(e){Array.from(document.querySelectorAll(".js-auth-city input")).map((function(t){t.addEventListener("input",(function(t){var r=t.currentTarget,o=r.closest(".input"),n=o.dataset.country;if(n){var c=e.filter((function(e){return e.key===n}))[0].cities,a=r.value.toLowerCase(),s=r.closest(".input").querySelector(".dropdown__menu"),i=s.querySelector(".fakeScroll__content"),l=!1;i&&(i.innerHTML=""),""!==r.value&&(c.map((function(e){0===e.toLowerCase().indexOf(a)&&(l=!0,i.insertAdjacentHTML("beforeend",'<a class="input__dropdown-item dropdown__menu-item'.concat(a?" input__dropdown-item--smart":"",'" href="javascript:void(0)"><span>').concat(e.substr(0,a.length),"</span>").concat(e.substr(a.length),"</a>")))})),l&&Array.from(o.querySelectorAll(".input__dropdown-item")).map((function(e){return e.addEventListener("click",(function(){r.value=e.innerText}))}))),s.classList.contains("fakeScroll")||s.fakeScroll()}})),t.addEventListener("focus",(function(){var e=t.closest(".input").querySelector(".fakeScroll__content");e&&(e.innerHTML="")}))}))})),Array.from(document.querySelectorAll('input[name="rulesAgreement"]')).map((function(e){return e.addEventListener("change",(function(){var t=e.closest("form").querySelector('button[type="submit"]');e.checked?(t.classList.remove("button--disabled"),t.removeAttribute("disabled")):(t.classList.add("button--disabled"),t.setAttribute("disabled","disabled"))}))})),Array.from(document.querySelectorAll(".auth__toggle .tabs__item")).map((function(e){return e.addEventListener("click",(function(){document.querySelector(".auth__type").value=e.dataset.tab-1}))})),Array.from(document.querySelectorAll(".tutor__nav-link")).map((function(e){return e.addEventListener("click",(function(){var t=e.dataset.target;scrollTo({top:document.querySelector('[data-block="'.concat(t,'"]')).getBoundingClientRect().top+window.pageYOffset-document.querySelector(".header").offsetHeight,behavior:"smooth"})}))})),Array.from(document.querySelectorAll(".profile-head__subjects-item")).map((function(e){return e.addEventListener("click",(function(){var t=e.dataset.pay;e.closest(".profile-head__subjects").querySelector(".profile-head__subjects-item--highlight").classList.remove("profile-head__subjects-item--highlight"),e.classList.add("profile-head__subjects-item--highlight"),Array.from(document.querySelectorAll(".tutor__cost-value span")).map((function(e){return e.innerText=t}))}))}))};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJvbmxvYWQiLCIkYXBpIiwiJHBvcHVwIiwiX3JlZiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm9uSGlkZSIsIm9uU2hvdyIsImRvY3VtZW50Iiwic3R5bGUiLCJjb25jYXQiLCJzY3JvbGxZIiwiYm9keSIsImNzc1RleHQiLCJzY3JvbGxUbyIsIm9mZnNldCIsImlzU2hvd24iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNob3ciLCJQcm9taXNlIiwicmVzb2x2ZSIsImRpc3BsYXkiLCJoaWRlT3ZlcmZsb3ciLCJhZGQiLCJwcm9taXNlIiwiaGlkZSIsInBhcnNlSW50IiwibWFyZ2luVG9wIiwicmVtb3ZlIiwiZm9ybSIsInJlcXVlc3QiLCJlbWFpbFJlZ2V4cCIsInNldEludmFsaWRJbnB1dCIsImlucHV0IiwiY2xvc2VzdCIsInZhbGlkYXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInNldEludmFsaWRDaGVja2JveCIsIkFycmF5IiwiZnJvbSIsIiRjaGVja2JveFNlbGVjdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJxdWVyeVNlbGVjdG9yIiwibWFwIiwiZWwiLCIkZm9ybUlucHV0cyIsInZhbHVlIiwiZm9ybUlzVmFsaWQiLCJnZXRBdHRyaWJ1dGUiLCJpbmNsdWRlcyIsImNoZWNrZWQiLCJ0ZXN0IiwiY2hlY2tib3giLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiZGF0YXNldCIsInBvcHVwIiwiJHN1Y2Nlc3NQb3B1cCIsIiRkcm9wZG93bnMiLCIkdGhpcyIsInRvZ2dsZSIsIiRkcm9wZG93bk1lbnVJdGVtIiwiaW5uZXJUZXh0IiwiJGhpZGRlbkl0ZW0iLCIkZHJvcGRvd25WYWx1ZSIsIm5ld1ZhbHVlIiwidGFiIiwiJGFjdGl2ZVRhYkNvbnRlbnQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJ3aWR0aCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIiRkcm9wZG93biIsImNoYW5nZUNvdW50cnlFdmVudCIsImxvYyIsImNvZGVMb2MiLCJtYXNrIiwiJGlucHV0IiwiSW5wdXRtYXNrIiwidXBkYXRlTWFzayIsImxpc3QiLCIkcGxhY2Vob2xkZXIiLCJpdGVtIiwic3Vic3RyaW5nIiwicGxhY2Vob2xkZXIiLCJmYWtlU2Nyb2xsIiwicmVzIiwianNvbiIsInRoZW4iLCJkYXRhIiwiJGRyb3Bkb3duRWxlbWVudCIsImlucHV0U21hcnRTZWFyY2giLCJvcHRpb25zIiwia2V5IiwiZmxhdE1hcCIsImNpdGllcyIsIkpTT04iLCJwYXJzZSIsImxvd2VyQ2FzZVZhbHVlIiwidG9Mb3dlckNhc2UiLCIkY2hlY2tib3giLCJtYXRjaGVzRm91bmQiLCJpbm5lckhUTUwiLCJoYW5kbGVJbnB1dCIsIm5leHRFbGVtZW50U2libGluZyIsImZpcnN0UmVuZGVyIiwic3Vic3RyIiwiJGVsZW1lbnQiLCJwYXJlbnROb2RlIiwiaW5kZXhPZiIsIm5hbWUiLCIkcmFuZ2UiLCJtaW4iLCJtYXgiLCJub1VpU2xpZGVyIiwiY3JlYXRlIiwiY29ubmVjdCIsInN0ZXAiLCJvbiIsInZhbHVlcyIsInN0YXJ0IiwiJGlucHV0RmllbGQiLCJjaGVja2JveFZhbHVlIiwiJHByb2ZpbGVWaWRlb0NvdmVyIiwiJHZpZGVvIiwic2V0RGF0ZVRpbWUiLCIkY3VycmVudFVuaXQiLCJzZXRUaW1lb3V0IiwiJHRpbWV6b25lRHJvcGRvd24iLCJkYXRlIiwidGltZSIsIiRwcmV2QnV0dG9uIiwiJG5leHRCdXR0b24iLCIkYWN0aXZlU2xpZGUiLCJjdXJyZW50SW5kZXgiLCJzbGlkZSIsIiRwcmV2U2xpZGUiLCJkYXRlcyIsIiRuZXh0U2xpZGUiLCJmaXJzdCIsIiRiYW5uZXIiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic2V0SXRlbSIsIiRjb29raWVzIiwic2hvd092ZXJmbG93IiwiaGlkZUhlYWRlck1lbnUiLCJTd2lwZXIiLCJsb29wIiwiY2VudGVyZWRTbGlkZXMiLCJsb29wQWRkaXRpb25hbFNsaWRlcyIsInNwYWNlQmV0d2VlbiIsInNsaWRlc1BlclZpZXciLCJicmVha3BvaW50cyIsInJldmlld3NTbGlkZXIiLCJzbGlkZXNQZXJHcm91cCIsInJldmlld1NsaWRlck1vYmlsZSIsInN1Ym1pdCIsInBhZ2luYXRpb24iLCJjbGlja2FibGUiLCJjb3VudHJ5IiwiJGxhYmVsRWxlbWVudCIsIiRkcm9wZG93bkNvbnRlbnQiLCJpbnNlcnRBZGphY2VudEhUTUwiLCIkc3VibWl0QnV0dG9uIiwidG9wIiwicGFnZVlPZmZzZXQiLCJvZmZzZXRIZWlnaHQiLCJiZWhhdmlvciIsInBheW1lbnQiXSwibWFwcGluZ3MiOiJhQUFBQSxPQUFPQyxPQUFTLFdBRWQsSUFBQUMsRUFBQSxDQUlGQSxNQUFBLFNBQUFDLEdBQWtELElBQUFDLEVBQUFDLFVBQUFDLE9BQUEsUUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQUEsR0FBckNHLEVBQXFDSixFQUFyQ0ksT0FBQUMsRUFBcUNMLEVBQXJDSyxPQUFXRCxFQUFBQSxXQUEwQkUsU0FBbEJELEtBQWtCRSxNQUFsQkYsUUFBa0IsZ0NBQUFHLFFBQUFaLE9BQUFhLFFBQUEsT0FHOUNILEVBQWNDLFNBQUFBLEdBQ2ZELFNBRURJLEtBQUFILE1BQUFJLFFBQUEsa0NBSUVmLE9BQU9nQixTQUFTLEVBQUdDLElBQW5CakIsTUFBQUEsQ0FLQWtCLFFBQVMsV0FBQSxPQUFNZixFQUFPZ0IsVUFBVUMsU0FBUyxrQkFEekNDLEtBSkFyQixXQUtBa0IsSUFBQUEsRUFBUyxJQUFBSSxTQUFBLFNBQUFDLEdBQUFwQixFQUFNQSxNQUFNcUIsUUFBTixRQUZWRCxPQUtIRSxJQUVFRixFQUFBQSxNQUFPLFdBQ1JwQixFQUhEZ0IsVUFBQU8sSUFBQSxpQkFLWSxtQkFBWkQsR0FFQUUsUUFJR0MsS0FuQkw1QixXQW9CRyxJQUxEaUIsR0FBQVksU0FBQW5CLFNBQUFJLEtBQUFILE1BQUFtQixXQU9GM0IsRUFBQWdCLFVBQUFZLE9BQUEsaUJBQ0FI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QUFBa0ksRUFBSzFFLEVBQUFBLFFBQWlCNUUsUUFBakI0QixjQUFvQyx5QkFFeENFLEVBQUFNLFNBQ0ZrSCxFQUFBdEosVUFBQVksT0FBQSxvQkFDRjBJLEVBbkNEaEcsZ0JBQUEsY0FzQ0VnRyxFQUFNMUUsVUFBQUEsSUFBZ0Isb0JBbUIxQjBFLEVBQWMvRixhQUFhLFdBQVksbUJBZHBDL0IsTUFBQUMsS0FORGxDLFNBQUFvQyxpQkFBQSw4QkFBQUUsS0FBQSxTQUFBQyxHQUFBLE9BQUFBLEVBQUFWLGlCQUFBLFNBQUEsV0FPRDdCLFNBN0NEcUMsY0FBQSxlQUFBSSxNQUFBRixFQUFBVyxRQUFBVyxJQUFBLFFBa0VKNUIsTUFBTUMsS0FBS2xDLFNBQVNvQyxpQkFBaUIscUJBQXFCRSxLQUFJLFNBQUFDLEdBQUUsT0FBSUEsRUFBR1YsaUJBQWlCLFNBQVMsV0FDL0YsSUFBTW1CLEVBQVNULEVBQUdXLFFBQVFGLE9BakJnRDFDLFNBQUlpQyxDQUM5RXlILElBQUFoSyxTQUFNK0osY0FBTixnQkFBQTdKLE9BQXlDbUMsRUFBekMsT0FBdUQ2Qix3QkFBdkQ4RixJQUFBMUssT0FBQTJLLFlBQUFqSyxTQUFBcUMsY0FBQSxXQUFBNkgsYUFvQkVDLFNBQVUsaUJBZFZKLE1BQUFBLEtBQUFBLFNBQUFBLGlCQUE0QixpQ0FBNUJ6SCxLQUFBLFNBQUFDLEdBQUEsT0FBQUEsRUFBQVYsaUJBQUEsU0FBQSxXQUNBa0ksSUFBQUEsRUFBQUEsRUFBYTdHLFFBQUNjLElBRWpCekIsRUFWK0VaLFFBQUosMkJBQUFVLGNBQUEsMkNBQUE1QixVQUFBWSxPQUFBLDBDQUFBa0IsRUFBNUU5QixVQUFBTyxJQUFBLDBDQVl5RWlCLE1BQUFDLEtBQU1sQyxTQUFDNkIsaUJBQUgsNEJBQW1DUyxLQUFBLFNBQUFDLEdBQUEsT0FBQUEsRUFBQWtCLFVBQUEyRyIsImZpbGUiOiJjb21tb24ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93Lm9ubG9hZCA9ICgpID0+IHtcblxuICAvLyDQntCx0YrQtdC60YIg0LPQu9C+0LHQsNC70YzQvdC+0LPQviBBUElcbmNvbnN0ICRhcGkgPSB7fTtcblxuLy8gQVBJINC00LvRjyDRgNCw0LHQvtGC0Ysg0YEg0L/QvtC/0LDQv9Cw0LzQuFxuJGFwaS5wb3B1cCA9ICgkcG9wdXAsIHsgb25IaWRlLCBvblNob3cgfSA9IHt9KSA9PiB7XG4gIC8vINCe0YLQutC70Y7Rh9Cw0LXRgiDQstC+0LfQvNC+0LbQvdC+0YHRgtGMINGB0LrRgNC+0LvQu9C40YLRjCDRgdGC0YDQsNC90LjRhtGDXG4gIGNvbnN0IGhpZGVPdmVyZmxvdyA9ICgpID0+IHtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmNzc1RleHQgPSBgcG9zaXRpb246IGZpeGVkOyBtYXJnaW4tdG9wOiAkey13aW5kb3cuc2Nyb2xsWX1weGA7XG4gIH07XG4gIFxuICAvLyDQktC60LvRjtGH0LDQtdGCINCy0L7Qt9C80L7QttC90L7RgdGC0Ywg0YHQutGA0L7Qu9C70LjRgtGMINGB0YLRgNCw0L3QuNGG0YNcbiAgY29uc3Qgc2hvd092ZXJmbG93ID0gb2Zmc2V0ID0+IHtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmNzc1RleHQgPSAncG9zaXRpb246IHN0YXRpYzsgbWFyZ2luLXRvcDogMCc7XG4gICAgXG4gICAgd2luZG93LnNjcm9sbFRvKDAsIG9mZnNldCk7XG4gIH07XG4gIFxuICByZXR1cm4ge1xuICAgIC8vINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCIHRydWUsINC10YHQu9C4INC/0L7Qv9Cw0L8g0L/QvtC60LDQt9GL0LLQsNC10YLRgdGPLCDQsiDQuNC90L7QvCDRgdC70YPRh9Cw0LUgZmFsc2VcbiAgICBpc1Nob3duOiAoKSA9PiAkcG9wdXAuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cC0tb3BlbmVkJyksXG4gICAgLy8g0J/QvtC60LDQt9GL0LLQsNC10YIg0L/QvtC/0LDQv1xuICAgIHNob3coKSB7XG4gICAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICRwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGhpZGVPdmVyZmxvdygpO1xuXG4gICAgICBwcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAkcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXAtLW9wZW5lZCcpO1xuICAgICAgICBpZiAodHlwZW9mIG9uU2hvdyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIG9uU2hvdygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vINCh0LrRgNGL0LLQsNC10YIg0L/QvtC/0LDQv1xuICAgIGhpZGUoKSB7XG4gICAgICBjb25zdCBvZmZzZXQgPSAtcGFyc2VJbnQoZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW5Ub3ApO1xuICBcbiAgICAgICRwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cC0tb3BlbmVkJyk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgJHBvcHVwLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHNob3dPdmVyZmxvdyhvZmZzZXQpO1xuICAgICAgICBpZiAodHlwZW9mIG9uSGlkZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIG9uSGlkZSgpO1xuICAgICAgICB9XG4gICAgICB9LCAzMDApO1xuICAgIH1cbiAgfTtcbn07XG5cbi8vIEFQSSDQtNC70Y8g0LLQsNC70LjQtNCw0YbQuNC4INGE0L7RgNC8XG4kYXBpLnZhbGlkYXRlID0gKGZvcm0sIHJlcXVlc3QpID0+IHtcbiAgY29uc3QgZW1haWxSZWdleHAgPSAvXigoW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31dKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLztcbiAgY29uc3Qgc2V0SW52YWxpZElucHV0ID0gaW5wdXQgPT4ge1xuICAgIGlmIChpbnB1dC5jbG9zZXN0KCcuaW5wdXQnKSkge1xuICAgICAgaW5wdXQuY2xvc2VzdCgnLmlucHV0JykuY2xhc3NMaXN0LmFkZCgnaW5wdXQtLWVycm9yJyk7XG4gICAgfSBlbHNlIGlmIChpbnB1dC5jbG9zZXN0KCcudGV4dGFyZWEnKSkge1xuICAgICAgaW5wdXQuY2xvc2VzdCgnLnRleHRhcmVhJykuY2xhc3NMaXN0LmFkZCgndGV4dGFyZWEtLWVycm9yJyk7XG4gICAgfVxuICAgIGlucHV0LmZvY3VzKCk7XG4gIH07XG4gIGNvbnN0IHNldEludmFsaWRDaGVja2JveCA9IGlucHV0ID0+IHtcbiAgICBpbnB1dC5jbG9zZXN0KCcuY2hlY2tib3gnKS5jbGFzc0xpc3QuYWRkKCdjaGVja2JveC0tZXJyb3InKTtcbiAgfTtcblxuICBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBsZXQgZm9ybUlzVmFsaWQgPSB0cnVlO1xuICAgIGNvbnN0ICRmb3JtSW5wdXRzID0gQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3JlcXVpcmVkXSwgdGV4dGFyZWFbcmVxdWlyZWRdJykpO1xuICAgIGNvbnN0ICRjaGVja2JveFNlbGVjdCA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmNoZWNrYm94c2VsZWN0Jyk7XG5cbiAgICAkZm9ybUlucHV0cy5yZXZlcnNlKCkubWFwKGVsID0+IHtcbiAgICAgIGlmIChlbC5kYXRhc2V0LnBhc3NSZXBlYXQgJiYgZWwudmFsdWUgIT09IGVsLmNsb3Nlc3QoJ2Zvcm0nKS5xdWVyeVNlbGVjdG9yKCdpbnB1dFtkYXRhLXBhc3NdJykudmFsdWUpIHtcbiAgICAgICAgc2V0SW52YWxpZElucHV0KGVsKTtcbiAgICAgIH1cblxuICAgICAgc3dpdGNoKGVsLmdldEF0dHJpYnV0ZSgndHlwZScpKSB7XG4gICAgICAgIGNhc2UgJ3RleHQnOlxuICAgICAgICBjYXNlICdwYXNzd29yZCc6XG4gICAgICAgICAgaWYgKGVsLnZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgc2V0SW52YWxpZElucHV0KGVsKTtcbiAgICAgICAgICAgIGZvcm1Jc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0ZWwnOlxuICAgICAgICAgIGlmIChlbC52YWx1ZSA9PT0gJycgfHwgZWwudmFsdWUuaW5jbHVkZXMoJ18nKSkge1xuICAgICAgICAgICAgc2V0SW52YWxpZElucHV0KGVsKTtcbiAgICAgICAgICAgIGZvcm1Jc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdjaGVja2JveCc6XG4gICAgICAgICAgaWYgKCFlbC5jaGVja2VkKSB7XG4gICAgICAgICAgICBzZXRJbnZhbGlkQ2hlY2tib3goZWwpO1xuICAgICAgICAgICAgZm9ybUlzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2VtYWlsJzpcbiAgICAgICAgICBpZiAoIWVtYWlsUmVnZXhwLnRlc3QoZWwudmFsdWUpKSB7XG4gICAgICAgICAgICBzZXRJbnZhbGlkSW5wdXQoZWwpO1xuICAgICAgICAgICAgZm9ybUlzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaWYgKGVsLnZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgc2V0SW52YWxpZElucHV0KGVsKTtcbiAgICAgICAgICAgIGZvcm1Jc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICBcbiAgICBpZiAoJGNoZWNrYm94U2VsZWN0Lmxlbmd0aCkge1xuICAgICAgQXJyYXkuZnJvbSgkY2hlY2tib3hTZWxlY3QpLm1hcChlbCA9PiB7XG4gICAgICAgIGxldCBjaGVja2VkID0gZmFsc2U7XG4gIFxuICAgICAgICBBcnJheS5mcm9tKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGVja2JveF9faW5wdXQnKSkubWFwKGNoZWNrYm94ID0+IHtcbiAgICAgICAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgICAgICAgY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgXG4gICAgICAgIGlmICghY2hlY2tlZCkge1xuICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2NoZWNrYm94c2VsZWN0LS1lcnJvcicpO1xuICAgICAgICAgIGZvcm1Jc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChmb3JtSXNWYWxpZCkge1xuICAgICAgcmVxdWVzdCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0JykpLmNvbmNhdChBcnJheS5mcm9tKGZvcm0ucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKSkpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICBpZiAoZWwuY2xvc2VzdCgnLmlucHV0JykpIHtcbiAgICAgIGVsLmNsb3Nlc3QoJy5pbnB1dCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2lucHV0LS1lcnJvcicpO1xuICAgIH0gZWxzZSBpZiAoZWwuY2xvc2VzdCgnLmNoZWNrYm94JykpIHtcbiAgICAgIGVsLmNsb3Nlc3QoJy5jaGVja2JveCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2NoZWNrYm94LS1lcnJvcicpO1xuICAgIH0gZWxzZSBpZiAoZWwuY2xvc2VzdCgnLnRleHRhcmVhJykpIHtcbiAgICAgIGVsLmNsb3Nlc3QoJy50ZXh0YXJlYScpLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHRhcmVhLS1lcnJvcicpO1xuICAgIH1cbiAgfSkpO1xufTtcblxuICAvLyBoYW5kbGUgb3BlbiBwb3B1cFxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtb3Blbi1wb3B1cCcpKS5tYXAoZWwgPT5cbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wb3B1cDtcbiAgICBjb25zdCAkcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuanMtcG9wdXBbZGF0YS1wb3B1cD1cIiR7dGFyZ2V0fVwiXWApO1xuICAgIFxuICAgICRhcGkucG9wdXAoJHBvcHVwKS5zaG93KCk7XG4gIH0pXG4pO1xuXG4vLyBoYW5kbGUgY2xvc2UgcG9wdXBcbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWNsb3NlLXBvcHVwJykpLm1hcChlbCA9PlxuICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGlmKCFlLnRhcmdldC5jbG9zZXN0KCcucG9wdXBfX3dpbmRvdycpIHx8ICFlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1wb3B1cCcpKSB7XG4gICAgICBjb25zdCAkcG9wdXAgPSBlLmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnBvcHVwJyk7XG5cbiAgICAgICRhcGkucG9wdXAoJHBvcHVwKS5oaWRlKCk7XG4gICAgfVxuICB9KVxuKTtcblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1yZXN0b3JlLWZvcm1dJykpIHtcbiAgJGFwaS52YWxpZGF0ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtcmVzdG9yZS1mb3JtXScpLCAoKSA9PiB7fSk7XG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtcmVxdWVzdC1hdXRoLWZvcm1dJykpIHtcbiAgJGFwaS52YWxpZGF0ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtcmVxdWVzdC1hdXRoLWZvcm1dJyksICgpID0+IHt9KTtcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1yZXF1ZXN0LWZvcm1dJykpIHtcbiAgJGFwaS52YWxpZGF0ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtcmVxdWVzdC1mb3JtXScpLCAoKSA9PiB7XG4gICAgY29uc3QgJHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXBvcHVwW2RhdGEtcG9wdXA9XCJyZXF1ZXN0XCJdJyk7XG4gICAgY29uc3QgJHN1Y2Nlc3NQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wb3B1cFtkYXRhLXBvcHVwPVwicmVxdWVzdC1zdWNjZXNzXCJdJyk7XG5cbiAgICAkYXBpLnBvcHVwKCRwb3B1cCwge1xuICAgICAgb25IaWRlKCkge1xuICAgICAgICBBcnJheS5mcm9tKCRwb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpKS5tYXAoZWwgPT4gZWwudmFsdWUgPSAnJyk7XG4gICAgICAgICRhcGkucG9wdXAoJHN1Y2Nlc3NQb3B1cCkuc2hvdygpO1xuICAgICAgfVxuICAgIH0pLmhpZGUoKTtcbiAgfSk7XG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtcmVxdWVzdC1zcGVjaWZpYy1mb3JtXScpKSB7XG4gICRhcGkudmFsaWRhdGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXJlcXVlc3Qtc3BlY2lmaWMtZm9ybV0nKSwgKCkgPT4ge1xuICAgIGNvbnN0ICRwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1wb3B1cFtkYXRhLXBvcHVwPVwicmVxdWVzdC1zcGVjaWZpY1wiXScpO1xuICAgIGNvbnN0ICRzdWNjZXNzUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtcG9wdXBbZGF0YS1wb3B1cD1cInJlcXVlc3Qtc3VjY2Vzc1wiXScpO1xuXG4gICAgJGFwaS5wb3B1cCgkcG9wdXAsIHtcbiAgICAgIG9uSGlkZSgpIHtcbiAgICAgICAgQXJyYXkuZnJvbSgkcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKSkubWFwKGVsID0+IGVsLnZhbHVlID0gJycpO1xuICAgICAgICAkYXBpLnBvcHVwKCRzdWNjZXNzUG9wdXApLnNob3coKTtcbiAgICAgIH1cbiAgICB9KS5oaWRlKCk7XG4gIH0pO1xufVxuICBjb25zdCAkZHJvcGRvd25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZHJvcGRvd24nKSk7XG5cbi8vIGNsb3NlIGRyb3Bkb3duIG9uIG91dGVyIGNsaWNrXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9IGUudGFyZ2V0O1xuXG4gICRkcm9wZG93bnMubWFwKGVsID0+IHtcbiAgICBpZihlbC5jbG9zZXN0KCcuZHJvcGRvd24nKSAhPT0gJHRoaXMuY2xvc2VzdCgnLmRyb3Bkb3duJykpIHtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3Bkb3duLS1hY3RpdmUnKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbi8vIG9wZW4gZHJvcGRvd25cbiRkcm9wZG93bnMubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2lucHV0X19jb2RlJykpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICBpZiAoIWVsLmNsYXNzTGlzdC5jb250YWlucygnZHJvcGRvd24tLWFjdGl2ZScpKSB7XG4gICAgJGRyb3Bkb3ducy5tYXAoZWwgPT4gZWwgIT09IGVsICYmIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3Bkb3duLS1hY3RpdmUnKSk7XG4gICAgZWwuY2xhc3NMaXN0LnRvZ2dsZSgnZHJvcGRvd24tLWFjdGl2ZScpO1xuICB9XG59KSk7XG5cbi8vIGNoYW5nZSBkcm9wZG93biB2YWx1ZVxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgY29uc3QgJGRyb3Bkb3duTWVudUl0ZW0gPSBlLnRhcmdldC5jbG9zZXN0KCcuZHJvcGRvd25fX21lbnUtaXRlbScpO1xuXG4gIGlmICgkZHJvcGRvd25NZW51SXRlbSkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi0tYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgnZHJvcGRvd24tLWFjdGl2ZScpO1xuXG4gICAgaWYgKCRkcm9wZG93bk1lbnVJdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS10b2dnbGUnKSkge1xuICAgICAgY29uc3QgJHRoaXMgPSBlLnRhcmdldDtcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gJHRoaXMuaW5uZXJUZXh0O1xuICAgICAgY29uc3QgJGhpZGRlbkl0ZW0gPSAkdGhpcy5jbG9zZXN0KCcuZHJvcGRvd25fX21lbnUnKS5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd25fX21lbnUtaXRlbS0taGlkZGVuJyk7XG4gICAgICBjb25zdCAkZHJvcGRvd25WYWx1ZSA9ICR0aGlzLmNsb3Nlc3QoJy5kcm9wZG93bicpLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bl9fdmFsdWUnKTtcblxuICAgICAgaWYgKCRoaWRkZW5JdGVtKSB7XG4gICAgICAgICRoaWRkZW5JdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3Bkb3duX19tZW51LWl0ZW0tLWhpZGRlbicpO1xuICAgICAgfVxuXG4gICAgICAkZHJvcGRvd25NZW51SXRlbS5jbGFzc0xpc3QuYWRkKCdkcm9wZG93bl9fbWVudS1pdGVtLS1oaWRkZW4nKTsgXG4gICAgICAkZHJvcGRvd25WYWx1ZS5pbm5lclRleHQgPSBuZXdWYWx1ZTtcbiAgICB9XG4gIH1cbn0pO1xuICAvLyBoYW5kbGUgdGFicyBsb2dpY1xuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFic19faXRlbScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCB0YXJnZXQgPSBlbC5kYXRhc2V0LnRhYjtcbiAgY29uc3QgJGFjdGl2ZVRhYkNvbnRlbnQgPSBlbC5jbG9zZXN0KCdbZGF0YS10YWJzXScpLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFjdGl2ZV0nKTtcblxuICBlbC5jbG9zZXN0KCcudGFicycpLnF1ZXJ5U2VsZWN0b3IoJy50YWJzX19pdGVtLS1hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCd0YWJzX19pdGVtLS1hY3RpdmUnKTtcbiAgZWwuY2xhc3NMaXN0LmFkZCgndGFic19faXRlbS0tYWN0aXZlJyk7XG5cbiAgaWYgKCRhY3RpdmVUYWJDb250ZW50KSB7XG4gICAgZWwuY2xvc2VzdCgnW2RhdGEtdGFic10nKS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hY3RpdmVdJykucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWFjdGl2ZScpO1xuICAgIGVsLmNsb3Nlc3QoJ1tkYXRhLXRhYnNdJykucXVlcnlTZWxlY3RvcihgW2RhdGEtY29udGVudD1cIiR7dGFyZ2V0fVwiXWApLnNldEF0dHJpYnV0ZSgnZGF0YS1hY3RpdmUnLCB0cnVlKTtcbiAgfVxufSkpO1xuICBjb25zdCBjaGFuZ2VDb3VudHJ5RXZlbnQgPSBuZXcgRXZlbnQoJ2NoYW5nZUNvdW50cnknKTtcblxuY29uc3QgdXBkYXRlTWFzayA9IChpbnB1dCwgbWFzaykgPT4ge1xuICBJbnB1dG1hc2soe21hc2t9KS5tYXNrKGlucHV0KTtcbn07XG5cbi8vIE9wZW4gaW5wdXQgZHJvcGRvd25cbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0LmRyb3Bkb3duJykpXG4uY29uY2F0KEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0IC5kcm9wZG93bicpKSlcbi5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0ICRkcm9wZG93biA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bl9fbWVudScpO1xuICBlbC5jbG9zZXN0KCcuaW5wdXQnKS5xdWVyeVNlbGVjdG9yKCcuaW5wdXRfX2Ryb3Bkb3duJykuc3R5bGUud2lkdGggPSBlbC5jbG9zZXN0KCcuaW5wdXQnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCArICdweCc7XG5cbiAgaWYgKCEkZHJvcGRvd24uY2xhc3NMaXN0LmNvbnRhaW5zKCdmYWtlU2Nyb2xsJykpIHtcbiAgICAkZHJvcGRvd24uZmFrZVNjcm9sbCgpO1xuICB9XG59KSk7XG5cbi8vIENoYW5nZSBwaG9uZSBjb2RlIG9uIGlucHV0IGRyb3Bkb3duXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dF9fZHJvcGRvd24taXRlbVtkYXRhLWNvZGUtbG9jXScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0IGxvYyA9IGVsLmRhdGFzZXQuY29kZUxvYztcbiAgY29uc3QgbWFzayA9IGVsLmRhdGFzZXQubWFzaztcbiAgY29uc3QgJGlucHV0ID0gZWwuY2xvc2VzdCgnLmlucHV0JykucXVlcnlTZWxlY3RvcignaW5wdXQnKTtcblxuICBlbC5jbG9zZXN0KCcuaW5wdXRfX2NvZGUnKS5kYXRhc2V0LmNvZGVMb2MgPSBsb2M7XG4gIGVsLmNsb3Nlc3QoJy5pbnB1dF9fY29kZScpLmRhdGFzZXQubWFzayA9IG1hc2s7XG4gICRpbnB1dC5wbGFjZWhvbGRlciA9IG1hc2sucmVwbGFjZUFsbCgnOScsICdfJyk7XG4gIHVwZGF0ZU1hc2soJGlucHV0LCBtYXNrKTtcbn0pKTtcblxuLy8gQ2hhbmdlIGlucHV0IGRyb3Bkb3duIHZhbHVlXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dF9fZHJvcGRvd24taXRlbVtkYXRhLWRyb3Bkb3duXScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gZWwuaW5uZXJUZXh0O1xuICBcbiAgZWwuY2xvc2VzdCgnLmlucHV0JykucXVlcnlTZWxlY3RvcignaW5wdXQnKS52YWx1ZSA9IHZhbHVlO1xuICBlbC5jbG9zZXN0KCcuaW5wdXQnKS5jbGFzc0xpc3QucmVtb3ZlKCdpbnB1dC0tZXJyb3InKTtcblxuICBpZiAoZWwuY2xvc2VzdCgnLmlucHV0JykuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1hdXRoLWNvdW50cnknKSkge1xuICAgIGVsLmNsb3Nlc3QoJy5pbnB1dCcpLmRpc3BhdGNoRXZlbnQoY2hhbmdlQ291bnRyeUV2ZW50KTtcbiAgfVxufSkpO1xuXG4vLyBNYXNraW5nIHBob25lIGlucHV0XG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJ0ZWxcIl0nKSkubWFwKGVsID0+IHtcbiAgSW5wdXRtYXNrKHttYXNrOiBlbC5jbG9zZXN0KCcuaW5wdXQnKS5xdWVyeVNlbGVjdG9yKCcuaW5wdXRfX2NvZGUnKS5kYXRhc2V0Lm1hc2t9KS5tYXNrKGVsKTtcbn0pO1xuICAvLyBoYW5kbGUgY2hlY2tib3hzZWxlY3QgbG9naWNcbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoZWNrYm94c2VsZWN0X19saXN0JykpLm1hcChsaXN0ID0+IHtcbiAgbGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIFxuICAgIGNvbnN0ICRjaGVja2JveFNlbGVjdCA9IGxpc3QuY2xvc2VzdCgnLmNoZWNrYm94c2VsZWN0Jyk7XG4gICAgbGV0IGNoZWNrZWQgPSBmYWxzZTtcblxuICAgICRjaGVja2JveFNlbGVjdC5jbGFzc0xpc3QucmVtb3ZlKCdjaGVja2JveHNlbGVjdC0tZXJyb3InKTtcblxuICAgIEFycmF5LmZyb20obGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hlY2tib3hfX2lucHV0JykpLm1hcChjaGVja2JveCA9PiB7XG4gICAgICBjb25zdCAkcGxhY2Vob2xkZXIgPSAkY2hlY2tib3hTZWxlY3QucXVlcnlTZWxlY3RvcignLmNoZWNrYm94c2VsZWN0X19pbnB1dC1wbGFjZWhvbGRlcicpO1xuXG4gICAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkgY2hlY2tlZCA9IHRydWU7XG5cbiAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBsZXQgdmFsdWUgPSAnJztcblxuICAgICAgICBBcnJheS5mcm9tKGxpc3QucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQ6Y2hlY2tlZCcpKS5tYXAoaXRlbSA9PiB7XG4gICAgICAgICAgdmFsdWUgKz0gaXRlbS5jbG9zZXN0KCcuY2hlY2tib3hzZWxlY3RfX2l0ZW0nKS5xdWVyeVNlbGVjdG9yKCcuY2hlY2tib3hfX3RleHQnKS5pbm5lclRleHQgKyAnLCAnO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAkcGxhY2Vob2xkZXIuaW5uZXJUZXh0ID0gdmFsdWUuc3Vic3RyaW5nKDAsIHZhbHVlLmxlbmd0aCAtIDIpO1xuICAgICAgICAgICRwbGFjZWhvbGRlci5jbGFzc0xpc3QuYWRkKCdjaGVja2JveHNlbGVjdF9faW5wdXQtcGxhY2Vob2xkZXItLWFjdGl2ZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRwbGFjZWhvbGRlci5pbm5lclRleHQgPSAkcGxhY2Vob2xkZXIuZGF0YXNldC5wbGFjZWhvbGRlcjtcbiAgICAgICAgICAkcGxhY2Vob2xkZXIuY2xhc3NMaXN0LnJlbW92ZSgnY2hlY2tib3hzZWxlY3RfX2lucHV0LXBsYWNlaG9sZGVyLS1hY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIFxuICAgIGlmIChjaGVja2VkKSB7XG4gICAgICAkY2hlY2tib3hTZWxlY3QuY2xhc3NMaXN0LmFkZCgnY2hlY2tib3hzZWxlY3QtLWNoZWNrZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGNoZWNrYm94U2VsZWN0LmNsYXNzTGlzdC5yZW1vdmUoJ2NoZWNrYm94c2VsZWN0LS1jaGVja2VkJyk7XG4gICAgfVxuICB9KTtcblxuICBsaXN0LmZha2VTY3JvbGwoKTtcbn0pO1xuICAvLyBzZXQgZmlsdGVyIGlucHV0IHZhbHVlXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWx0ZXJzX19kcm9wZG93bi1pdGVtJykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9IGUuY3VycmVudFRhcmdldDtcbiAgY29uc3QgdmFsdWUgPSAkdGhpcy5pbm5lclRleHQ7XG5cbiAgJHRoaXMuY2xvc2VzdCgnLmZpbHRlcnNfX2lucHV0JykucXVlcnlTZWxlY3RvcignLmZpbHRlcnNfX2lucHV0LWZpZWxkJykudmFsdWUgPSB2YWx1ZTtcbn0pKTtcblxuLy8gZmlsdGVyIG1haW4gbG9naWNcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmlsdGVyc19faW5wdXQtZmllbGQnKS5sZW5ndGgpIHtcbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmlsdGVyc19faW5wdXQtZmllbGQnKSkubWFwKGVsID0+IHtcbiAgICBmZXRjaCgnZGF0YS9sb2NhdGlvbi5qc29uJykudGhlbihyZXMgPT4gcmVzLmpzb24oKSkudGhlbihkYXRhID0+IHtcbiAgICAgIGNvbnN0ICR0aGlzID0gZWw7XG4gICAgICAvLyBoYW5kbGUgZmlsdGVyIGlucHV0XG4gICAgICBjb25zdCBoYW5kbGVJbnB1dCA9IGZpcnN0UmVuZGVyID0+IHtcbiAgICAgICAgY29uc3QgJGRyb3Bkb3duRWxlbWVudCA9ICR0aGlzLm5leHRFbGVtZW50U2libGluZy5xdWVyeVNlbGVjdG9yKCcuZmlsdGVyc19fZHJvcGRvd24taW5uZXInKTtcbiAgICAgICAgY29uc3QgJGRyb3Bkb3duID0gJGRyb3Bkb3duRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZmFrZVNjcm9sbF9fY29udGVudCcpIHx8ICRkcm9wZG93bkVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGlucHV0U21hcnRTZWFyY2ggPSAkdGhpcy5nZXRBdHRyaWJ1dGUoJ25hbWUnKSA9PT0gJ2xvY2F0aW9uJztcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGlucHV0U21hcnRTZWFyY2ggPyBkYXRhLm1hcChlbCA9PiBlbC5rZXkpLmNvbmNhdChkYXRhLmZsYXRNYXAoaXRlbSA9PiBpdGVtLmNpdGllcykpIDogSlNPTi5wYXJzZSgkdGhpcy5kYXRhc2V0Lm9wdGlvbnMpO1xuICAgICAgICBjb25zdCBsb3dlckNhc2VWYWx1ZSA9ICR0aGlzLnZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0ICRjaGVja2JveCA9ICRkcm9wZG93bi5jbG9zZXN0KCcuZmlsdGVyc19fZHJvcGRvd24nKS5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKTtcbiAgICAgICAgbGV0IG1hdGNoZXNGb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgICRkcm9wZG93bi5pbm5lckhUTUwgPSAnJztcbiAgICAgIFxuICAgICAgICAvLyByZW5kZXIgZmlsdGVyIGRyb3Bkb3duIGl0ZW1zXG4gICAgICAgIG9wdGlvbnMubWFwKGVsID0+IHtcbiAgICAgICAgICBpZiAoZmlyc3RSZW5kZXIgfHwgZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKGxvd2VyQ2FzZVZhbHVlKSA9PT0gMCkge1xuICAgICAgICAgICAgY29uc3QgJGVsZW1lbnQgPSBpbnB1dFNtYXJ0U2VhcmNoID9cbiAgICAgICAgICAgICAgYDxhIGNsYXNzPVwiZmlsdGVyc19fZHJvcGRvd24taXRlbSBkcm9wZG93bl9fbWVudS1pdGVtJHsobG93ZXJDYXNlVmFsdWUgJiYgIWZpcnN0UmVuZGVyKSA/ICcgZmlsdGVyc19fZHJvcGRvd24taXRlbS0tc21hcnQnIDogJyd9XCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiPjxzcGFuPiR7ZWwuc3Vic3RyKDAsIGxvd2VyQ2FzZVZhbHVlLmxlbmd0aCl9PC9zcGFuPiR7ZWwuc3Vic3RyKGxvd2VyQ2FzZVZhbHVlLmxlbmd0aCl9PC9hPmAgOlxuICAgICAgICAgICAgICBgPGEgY2xhc3M9XCJmaWx0ZXJzX19kcm9wZG93bi1pdGVtIGRyb3Bkb3duX19tZW51LWl0ZW1cIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCI+JHtlbH08L2E+YDtcbiAgICAgICAgICAgIG1hdGNoZXNGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAkZHJvcGRvd24uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCAkZWxlbWVudClcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIHRvZ2dsZSBmaWx0ZXIgZHJvcGRvd24gdmlzaWJpbGl0eVxuICAgICAgICBpZiAobWF0Y2hlc0ZvdW5kKSB7XG4gICAgICAgICAgJGRyb3Bkb3duRWxlbWVudC5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2ZpbHRlcnNfX2Ryb3Bkb3duLS1oaWRkZW4nKTtcbiAgICAgICAgICAkZHJvcGRvd25FbGVtZW50LnBhcmVudE5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnZmlsdGVyc19fZHJvcGRvd24tLWVtcHR5Jyk7XG4gICAgICAgIH0gZWxzZSBpZiAoISRjaGVja2JveCkge1xuICAgICAgICAgICRkcm9wZG93bkVsZW1lbnQucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdmaWx0ZXJzX19kcm9wZG93bi0taGlkZGVuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJGRyb3Bkb3duRWxlbWVudC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2ZpbHRlcnNfX2Ryb3Bkb3duLS1lbXB0eScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaGFuZGxlIGlucHV0IHZhbHVlXG4gICAgICAgIEFycmF5LmZyb20oJGRyb3Bkb3duLnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWx0ZXJzX19kcm9wZG93bi1pdGVtJykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAkdGhpcy52YWx1ZSA9IGVsLmlubmVyVGV4dDtcbiAgICAgICAgICAkdGhpcy5zZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnLCBlbC5pbm5lclRleHQpO1xuXG4gICAgICAgICAgaWYgKCRjaGVja2JveCkge1xuICAgICAgICAgICAgJGNoZWNrYm94LmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICR0aGlzLnJlbW92ZUF0dHJpYnV0ZSgncmVhZG9ubHknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pKTtcblxuICAgICAgICAvLyBmYWtlU2Nyb2xsIGluaXRcbiAgICAgICAgaWYgKGZpcnN0UmVuZGVyICYmICEkZHJvcGRvd25FbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZmFrZVNjcm9sbCcpKSB7XG4gICAgICAgICAgJGRyb3Bkb3duLmZha2VTY3JvbGwoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIC8vIGFkZCBsaXN0ZW5lcnMgb24gZmlsdGVyIGlucHV0XG4gICAgICBpZiAoJHRoaXMubmFtZSAhPT0gJ2Nvc3QnKSB7XG4gICAgICAgICR0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gaGFuZGxlSW5wdXQoZmFsc2UpKTtcbiAgICAgICAgJHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoKSA9PiBoYW5kbGVJbnB1dCh0cnVlKSk7XG4gICAgICAgICR0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiB7XG4gICAgICAgICAgaWYgKCR0aGlzLnZhbHVlID09PSAnJyB8fCAhJHRoaXMuZGF0YXNldC52YWx1ZSkge1xuICAgICAgICAgICAgJHRoaXMudmFsdWUgPSAnJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHRoaXMudmFsdWUgPSAkdGhpcy5kYXRhc2V0LnZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG5cbi8vIGhhbmRsZSBmaWx0ZXIgcmFuZ2Ugc2xpZGVyXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWx0ZXJzX19jb3N0LXJhbmdlJykpLm1hcCgkcmFuZ2UgPT4ge1xuICBjb25zdCBtaW4gPSArJHJhbmdlLmRhdGFzZXQubWluO1xuICBjb25zdCBtYXggPSArJHJhbmdlLmRhdGFzZXQubWF4O1xuXG4gIG5vVWlTbGlkZXIuY3JlYXRlKCRyYW5nZSwge1xuICAgIHN0YXJ0OiBbbWluLCBtYXhdLFxuICAgIGNvbm5lY3Q6IHRydWUsXG4gICAgcmFuZ2U6IHtcbiAgICAgIG1pbixcbiAgICAgIG1heFxuICAgIH0sXG4gICAgc3RlcDogMTAwXG4gIH0pO1xuXG4gICRyYW5nZS5ub1VpU2xpZGVyLm9uKCdzbGlkZScsIHZhbHVlcyA9PiB7XG4gICAgY29uc3QgbWluID0gcGFyc2VJbnQodmFsdWVzWzBdKTtcbiAgICBjb25zdCBtYXggPSBwYXJzZUludCh2YWx1ZXNbMV0pO1xuXG4gICAgJHJhbmdlLmNsb3Nlc3QoJy5maWx0ZXJzX19pbnB1dCcpLnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXJzX19pbnB1dC1maWVsZCcpLnZhbHVlID0gYCR7bWlufSDigr0g4oCTICR7bWF4fSDigr1gO1xuICAgICRyYW5nZS5jbG9zZXN0KCcuZmlsdGVyc19fY29zdCcpLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNvc3Q9XCJmcm9tXCJdJykuaW5uZXJUZXh0ID0gbWluO1xuICAgICRyYW5nZS5jbG9zZXN0KCcuZmlsdGVyc19fY29zdCcpLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNvc3Q9XCJ0b1wiXScpLmlubmVyVGV4dCA9IG1heDtcbiAgfSk7XG59KTtcblxuXG4vLyBoYW5kbGUgZmlsdGVyIGNoZWNrYm94XG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWx0ZXJzX19kcm9wZG93bi1jaGVja2JveCcpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0ICRpbnB1dEZpZWxkID0gZWwuY2xvc2VzdCgnLmZpbHRlcnNfX2lucHV0JykucXVlcnlTZWxlY3RvcignLmZpbHRlcnNfX2lucHV0LWZpZWxkJyk7XG5cbiAgaWYgKGVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykuY2hlY2tlZCkge1xuICAgIGNvbnN0IGNoZWNrYm94VmFsdWUgPSBlbC5xdWVyeVNlbGVjdG9yKCcuY2hlY2tib3hfX3RleHQnKS5pbm5lclRleHQ7XG4gIFxuICAgICRpbnB1dEZpZWxkLnZhbHVlID0gY2hlY2tib3hWYWx1ZTtcbiAgICAkaW5wdXRGaWVsZC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnLCBjaGVja2JveFZhbHVlKTtcbiAgICAkaW5wdXRGaWVsZC5zZXRBdHRyaWJ1dGUoJ3JlYWRvbmx5JywgJ3JlYWRvbmx5Jyk7XG4gIH0gZWxzZSB7XG4gICAgJGlucHV0RmllbGQudmFsdWUgPSAnJztcbiAgICAkaW5wdXRGaWVsZC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnLCAnJyk7XG4gICAgJGlucHV0RmllbGQucmVtb3ZlQXR0cmlidXRlKCdyZWFkb25seScpO1xuICB9XG59KSk7XG4gIC8vIHNob3cgaGlkZG5lIHN1YmplY3QgaW4gdHV0b3JjYXJkXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy10dXRvcmNhcmQtbW9yZScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgQXJyYXkuZnJvbShlbC5jbG9zZXN0KCcudHV0b3JjYXJkX19zdWJqZWN0cycpLnF1ZXJ5U2VsZWN0b3JBbGwoJy50dXRvcmNhcmRfX3N1YmplY3RzLWl0ZW0tLWhpZGRlbicpKS5tYXAoZWwgPT4ge1xuICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3R1dG9yY2FyZF9fc3ViamVjdHMtaXRlbS0taGlkZGVuJyk7XG4gIH0pO1xufSkpO1xuICBjb25zdCAkcHJvZmlsZVZpZGVvQ292ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1hYm91dF9fdmlkZW8tY292ZXInKTtcblxuLy8gcGxheSB2aWRlIG9uIGFib3V0IHNlY3Rpb25cbmlmICgkcHJvZmlsZVZpZGVvQ292ZXIpIHtcbiAgJHByb2ZpbGVWaWRlb0NvdmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNvbnN0ICR2aWRlbyA9ICRwcm9maWxlVmlkZW9Db3Zlci5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ2lmcmFtZScpO1xuXG4gICAgJHByb2ZpbGVWaWRlb0NvdmVyLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignaWZyYW1lJykuc2V0QXR0cmlidXRlKCdzcmMnLCAkdmlkZW8uZ2V0QXR0cmlidXRlKCdzcmMnKSArICc/YXV0b3BsYXk9MScpO1xuICAgICRwcm9maWxlVmlkZW9Db3Zlci5jbGFzc0xpc3QuYWRkKCdwcm9maWxlLWFib3V0X192aWRlby1jb3Zlci0taGlkZGVuJyk7XG4gIH0pO1xufVxuICAvLyBpbml0IGZha2VTY3JvbGwgb24gdGltZXpvbmUgZHJvcGRvd25cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1zY2hlZHVsZScpKSB7XG4gIGNvbnN0ICR0aW1lem9uZURyb3Bkb3duID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX3RpbWV6b25lLW1lbnUnKTtcblxuICBpZiAoISR0aW1lem9uZURyb3Bkb3duLmNsYXNzTGlzdC5jb250YWlucygnZmFrZVNjcm9sbCcpKSB7XG4gICAgJHRpbWV6b25lRHJvcGRvd24uZmFrZVNjcm9sbCgpO1xuICB9XG59XG5cbmNvbnN0IHNldERhdGVUaW1lID0gKCkgPT4ge1xuICBjb25zdCAkY3VycmVudFVuaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1zY2hlZHVsZV9fdW5pdC0tY3VycmVudCcpO1xuICBjb25zdCAkcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtcG9wdXBbZGF0YS1wb3B1cD1cInJlcXVlc3Qtc3BlY2lmaWNcIl0nKTtcblxuICBpZiAoJGN1cnJlbnRVbml0KSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBkYXRlID0gJGN1cnJlbnRVbml0LmRhdGFzZXQuZGF0ZTtcbiAgICAgIGNvbnN0IHRpbWUgPSAkY3VycmVudFVuaXQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX3RpbWUtdmFsdWUnKS5pbm5lclRleHQ7XG4gIFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX3BpY2snKS5jbGFzc0xpc3QuYWRkKCdwcm9maWxlLXNjaGVkdWxlX19waWNrLS1hY3RpdmUnKTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlLXNjaGVkdWxlX19waWNrLWRhdGUnKS5pbm5lclRleHQgPSBkYXRlO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX3BpY2stdGltZScpLmlubmVyVGV4dCA9IHRpbWU7XG5cbiAgICAgIGlmICgkcG9wdXApIHtcbiAgICAgICAgJHBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faGVhZGluZy1kYXRlJykuaW5uZXJUZXh0ID0gZGF0ZTtcbiAgICAgICAgJHBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faGVhZGluZy10aW1lJykuaW5uZXJUZXh0ID0gdGltZTtcbiAgICAgICAgJHBvcHVwLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJ0aW1lXCJdJykudmFsdWUgPSB0aW1lO1xuICAgICAgfVxuICAgIH0sIDApO1xuICB9XG59XG5cbi8vIGhhbmRsZSBzY2hlZHVsZSBzbGlkZXJcbmNvbnN0ICRwcmV2QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX2NvbnRyb2xzLWJ1dHRvbi0tcHJldicpO1xuY29uc3QgJG5leHRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1zY2hlZHVsZV9fY29udHJvbHMtYnV0dG9uLS1uZXh0Jyk7XG5cbmlmICgkcHJldkJ1dHRvbikge1xuICAkcHJldkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zdCAkYWN0aXZlU2xpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1zY2hlZHVsZV9fc2xpZGUtLWFjdGl2ZScpO1xuICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9ICskYWN0aXZlU2xpZGUuZGF0YXNldC5zbGlkZTtcbiAgICBjb25zdCAkcHJldlNsaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnByb2ZpbGUtc2NoZWR1bGVfX3NsaWRlW2RhdGEtc2xpZGU9XCIke2N1cnJlbnRJbmRleCAtIDF9XCJdYCk7XG4gIFxuICAgIGlmICgkcHJldlNsaWRlKSB7XG4gICAgICAkYWN0aXZlU2xpZGUuY2xhc3NMaXN0LnJlbW92ZSgncHJvZmlsZS1zY2hlZHVsZV9fc2xpZGUtLWFjdGl2ZScpO1xuICAgICAgJHByZXZTbGlkZS5jbGFzc0xpc3QuYWRkKCdwcm9maWxlLXNjaGVkdWxlX19zbGlkZS0tYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1zY2hlZHVsZV9fY29udHJvbHMtYnV0dG9uLS1uZXh0JykuY2xhc3NMaXN0LnJlbW92ZSgncHJvZmlsZS1zY2hlZHVsZV9fY29udHJvbHMtYnV0dG9uLS1kaXNhYmxlZCcpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX2NvbnRyb2xzLWRhdGVzJykuaW5uZXJUZXh0ID0gJHByZXZTbGlkZS5kYXRhc2V0LmRhdGVzO1xuICBcbiAgICAgIGlmICgkcHJldlNsaWRlLmRhdGFzZXQuZmlyc3QpIHtcbiAgICAgICAgJHByZXZCdXR0b24uY2xhc3NMaXN0LmFkZCgncHJvZmlsZS1zY2hlZHVsZV9fY29udHJvbHMtYnV0dG9uLS1kaXNhYmxlZCcpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5cbmlmICgkbmV4dEJ1dHRvbikge1xuICAkbmV4dEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zdCAkYWN0aXZlU2xpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1zY2hlZHVsZV9fc2xpZGUtLWFjdGl2ZScpO1xuICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9ICskYWN0aXZlU2xpZGUuZGF0YXNldC5zbGlkZTtcbiAgICBjb25zdCAkbmV4dFNsaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnByb2ZpbGUtc2NoZWR1bGVfX3NsaWRlW2RhdGEtc2xpZGU9XCIke2N1cnJlbnRJbmRleCArIDF9XCJdYCk7XG4gIFxuICAgIGlmICgkbmV4dFNsaWRlKSB7XG4gICAgICAkYWN0aXZlU2xpZGUuY2xhc3NMaXN0LnJlbW92ZSgncHJvZmlsZS1zY2hlZHVsZV9fc2xpZGUtLWFjdGl2ZScpO1xuICAgICAgJG5leHRTbGlkZS5jbGFzc0xpc3QuYWRkKCdwcm9maWxlLXNjaGVkdWxlX19zbGlkZS0tYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1zY2hlZHVsZV9fY29udHJvbHMtYnV0dG9uLS1wcmV2JykuY2xhc3NMaXN0LnJlbW92ZSgncHJvZmlsZS1zY2hlZHVsZV9fY29udHJvbHMtYnV0dG9uLS1kaXNhYmxlZCcpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtc2NoZWR1bGVfX2NvbnRyb2xzLWRhdGVzJykuaW5uZXJUZXh0ID0gJG5leHRTbGlkZS5kYXRhc2V0LmRhdGVzO1xuICBcbiAgICAgIGlmICgkbmV4dFNsaWRlLmRhdGFzZXQubGFzdCkge1xuICAgICAgICAkbmV4dEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdwcm9maWxlLXNjaGVkdWxlX19jb250cm9scy1idXR0b24tLWRpc2FibGVkJyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuLy8gaGFuZGxlIHNlbGVjdCBkYXRldGltZSB1bml0XG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9maWxlLXNjaGVkdWxlX191bml0JykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJy5wcm9maWxlLXNjaGVkdWxlX190aW1lJykpIHtcbiAgICBjb25zdCAkY3VycmVudFVuaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1zY2hlZHVsZV9fdW5pdC0tY3VycmVudCcpO1xuICBcbiAgICBpZiAoJGN1cnJlbnRVbml0KSB7XG4gICAgICAkY3VycmVudFVuaXQuY2xhc3NMaXN0LnJlbW92ZSgncHJvZmlsZS1zY2hlZHVsZV9fdW5pdC0tY3VycmVudCcpO1xuICAgIH1cbiAgXG4gICAgZWwuY2xhc3NMaXN0LmFkZCgncHJvZmlsZS1zY2hlZHVsZV9fdW5pdC0tY3VycmVudCcpO1xuICAgIHNldERhdGVUaW1lKCk7XG4gIH1cbn0pKTtcblxuLy8gZXhlY3V0ZSBzZXQgZGF0ZXRpbWUgb24gdGltZSBjaGFuZ2VcbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2ZpbGUtc2NoZWR1bGVfX3RpbWUtbWVudSAuZHJvcGRvd25fX21lbnUtaXRlbScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZXREYXRlVGltZSkpO1xuXG4gIGNvbnN0ICRiYW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFubmVyJyk7XG5cbi8vIGJhbm5lciBoYW5kbGluZ1xuaWYgKCFKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsZXRtZXR1dG9yOmJhbm5lcklzSGlkZGVuJykpKSB7XG4gICRiYW5uZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhbm5lcl9fY2xvc2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAkYmFubmVyLmNsYXNzTGlzdC5hZGQoJ2Jhbm5lci0taGlkZScpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgJGJhbm5lci5yZW1vdmUoKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsZXRtZXR1dG9yOmJhbm5lcklzSGlkZGVuJywgdHJ1ZSk7XG4gICAgfSwgNTAwKVxuICB9KTtcbn0gZWxzZSB7XG4gICRiYW5uZXIucmVtb3ZlKCk7XG59XG4gIGNvbnN0ICRjb29raWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvb2tpZXMnKTtcblxuLy8gY29va2llcyBoYW5kbGluZ1xuaWYgKCFKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsZXRtZXR1dG9yOmNvb2tpZXNJc0hpZGRlbicpKSkge1xuICAkY29va2llcy5jbGFzc0xpc3QuYWRkKCdjb29raWVzLS1zaG93bicpO1xuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb29raWVzX19idG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAkY29va2llcy5jbGFzc0xpc3QucmVtb3ZlKCdjb29raWVzLS1zaG93bicpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgJGNvb2tpZXMucmVtb3ZlKCk7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbGV0bWV0dXRvcjpjb29raWVzSXNIaWRkZW4nLCB0cnVlKTtcbiAgICB9LCA1MDApXG4gIH0pO1xufSBlbHNlIHtcbiAgJGNvb2tpZXMucmVtb3ZlKCk7XG59XG4gIGxldCBvZmZzZXQgPSAwO1xuY29uc3QgaGlkZU92ZXJmbG93ID0gKCkgPT4ge1xuICBvZmZzZXQgPSAtcGFyc2VJbnQoZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW5Ub3ApO1xuICBkb2N1bWVudC5ib2R5LnN0eWxlLmNzc1RleHQgPSBgcG9zaXRpb246IGZpeGVkOyBtYXJnaW4tdG9wOiAkey13aW5kb3cuc2Nyb2xsWX1weGA7XG59O1xuY29uc3Qgc2hvd092ZXJmbG93ID0gb2Zmc2V0ID0+IHtcbiAgZG9jdW1lbnQuYm9keS5zdHlsZS5jc3NUZXh0ID0gJ3Bvc2l0aW9uOiBzdGF0aWM7IG1hcmdpbi10b3A6IDAnO1xuICB3aW5kb3cuc2Nyb2xsVG8oMCwgb2Zmc2V0KTtcbn07XG5jb25zdCBoaWRlSGVhZGVyTWVudSA9ICgpID0+IHtcbiAgc2hvd092ZXJmbG93KCk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItbWVudScpLmNsYXNzTGlzdC5yZW1vdmUoJ2hlYWRlci1tZW51LS1zaG93bicpO1xufTtcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fYnVyZ2VyJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGhpZGVPdmVyZmxvdygpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLW1lbnUnKS5jbGFzc0xpc3QuYWRkKCdoZWFkZXItbWVudS0tc2hvd24nKTtcbn0pO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLW1lbnVfX2JhY2tkcm9wJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlSGVhZGVyTWVudSk7XG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLW1lbnVfX2Nsb3NlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlSGVhZGVyTWVudSk7XG5cbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhlYWRlcl9fbm90aWZpY2F0aW9ucy13cmFwcGVyJykpLm1hcChlbCA9PiB7XG4gIGlmICghZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdmYWtlU2Nyb2xsJykpIHtcbiAgICBlbC5mYWtlU2Nyb2xsKCk7XG4gIH1cbn0pO1xuICBjb25zdCBwb3B1bGFyU2xpZGVyID0gbmV3IFN3aXBlcignLnBvcHVsYXJfX2dyaWQtLW1vYmlsZScsIHtcbiAgbG9vcDogdHJ1ZSxcbiAgbG9vcEFkZGl0aW9uYWxTbGlkZXM6IDMsXG4gIHNwYWNlQmV0d2VlbjogMjAsXG4gIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcbiAgY2VudGVyZWRTbGlkZXM6IHRydWUsXG4gIGJyZWFrcG9pbnRzOiB7XG4gICAgNzYwOiB7XG4gICAgICBzbGlkZXNQZXJWaWV3OiAyLFxuICAgICAgY2VudGVyZWRTbGlkZXM6IGZhbHNlXG4gICAgfVxuICB9XG59KTtcbiAgY29uc3QgcmV2aWV3c1NsaWRlciA9IG5ldyBTd2lwZXIoJy5yZXZpZXdzX19zbGlkZXInLCB7XG4gIGxvb3A6IHRydWUsXG4gIHNwYWNlQmV0d2VlbjogMjAsXG4gIHNsaWRlc1BlclZpZXc6IDMsXG4gIHNsaWRlc1Blckdyb3VwOiAzLFxuICBsb29wQWRkaXRpb25hbFNsaWRlczogMyxcbiAgcGFnaW5hdGlvbjoge1xuICAgIGVsOiAnLnN3aXBlci1wYWdpbmF0aW9uJyxcbiAgICBjbGlja2FibGU6IHRydWVcbiAgfVxufSk7XG5cbmNvbnN0IHJldmlld1NsaWRlck1vYmlsZSA9IG5ldyBTd2lwZXIoJy5yZXZpZXdzX19zbGlkZXItLW1vYmlsZScsIHtcbiAgbG9vcDogdHJ1ZSxcbiAgc3BhY2VCZXR3ZWVuOiAyMCxcbiAgbG9vcEFkZGl0aW9uYWxTbGlkZXM6IDMsXG4gIHBhZ2luYXRpb246IHtcbiAgICBlbDogJy5zd2lwZXItcGFnaW5hdGlvbicsXG4gICAgY2xpY2thYmxlOiB0cnVlXG4gIH1cbn0pO1xuICAvLyBhdXRoIGZvcm0gdmFsaWRhdGlvblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1sb2dpbi1mb3JtXScpKSB7XG4gICRhcGkudmFsaWRhdGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLWxvZ2luLWZvcm1dJyksICgpID0+IHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtbG9naW4tZm9ybV0nKS5zdWJtaXQoKTtcbiAgfSk7XG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtc2lnbnVwLXN0dWRlbnQtZm9ybV0nKSkge1xuICAkYXBpLnZhbGlkYXRlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1zaWdudXAtc3R1ZGVudC1mb3JtXScpLCAoKSA9PiB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXNpZ251cC1zdHVkZW50LWZvcm1dJykuc3VibWl0KCk7XG4gIH0pO1xufVxuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXNpZ251cC10dXRvci1mb3JtXScpKSB7XG4gICRhcGkudmFsaWRhdGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXNpZ251cC10dXRvci1mb3JtXScpLCAoKSA9PiB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXNpZ251cC10dXRvci1mb3JtXScpLnN1Ym1pdCgpO1xuICB9KTtcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bZGF0YS1zdXBwb3J0LWZvcm1dJykpIHtcbiAgJGFwaS52YWxpZGF0ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW2RhdGEtc3VwcG9ydC1mb3JtXScpLCAoKSA9PiB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLXN1cHBvcnQtZm9ybV0nKS5zdWJtaXQoKTtcbiAgfSk7XG59XG5cbi8vIHNldCBjb3VudHJ5IHZhbHVlIHRvIGNpdGllcyBpbnB1dFxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtYXV0aC1jb3VudHJ5JykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2VDb3VudHJ5JywgZSA9PiB7XG4gIGVsLmNsb3Nlc3QoJ2Zvcm0nKS5xdWVyeVNlbGVjdG9yKCcuanMtYXV0aC1jaXR5JykuZGF0YXNldC5jb3VudHJ5ID0gZS50YXJnZXQucXVlcnlTZWxlY3RvcignaW5wdXQnKS52YWx1ZTtcbn0pKTtcblxuLy8gaGFuZGxpbmcgY2l0aWVzIGlucHV0XG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWF1dGgtY2l0eSBpbnB1dCcpLmxlbmd0aCkge1xuICBmZXRjaCgnZGF0YS9sb2NhdGlvbi5qc29uJykudGhlbihyZXMgPT4gcmVzLmpzb24oKSkudGhlbihkYXRhID0+IHtcbiAgICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1hdXRoLWNpdHkgaW5wdXQnKSkubWFwKGVsID0+IHtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZSA9PiB7XG4gICAgICAgIGNvbnN0ICR0aGlzID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgICAgICBjb25zdCAkbGFiZWxFbGVtZW50ID0gJHRoaXMuY2xvc2VzdCgnLmlucHV0Jyk7XG4gICAgICAgIGNvbnN0IGNvdW50cnkgPSAkbGFiZWxFbGVtZW50LmRhdGFzZXQuY291bnRyeTtcblxuICAgICAgICBpZiAoY291bnRyeSkge1xuICAgICAgICAgIGNvbnN0IGNpdGllcyA9IGRhdGEuZmlsdGVyKGVsID0+IGVsLmtleSA9PT0gY291bnRyeSlbMF0uY2l0aWVzO1xuICAgICAgICAgIGNvbnN0IGxvd2VyQ2FzZVZhbHVlID0gJHRoaXMudmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICBjb25zdCAkZHJvcGRvd25FbGVtZW50ID0gJHRoaXMuY2xvc2VzdCgnLmlucHV0JykucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duX19tZW51Jyk7XG4gICAgICAgICAgY29uc3QgJGRyb3Bkb3duQ29udGVudCA9ICRkcm9wZG93bkVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZha2VTY3JvbGxfX2NvbnRlbnQnKTtcbiAgICAgICAgICBsZXQgbWF0Y2hlc0ZvdW5kID0gZmFsc2U7XG5cbiAgICAgICAgICBpZiAoJGRyb3Bkb3duQ29udGVudCkge1xuICAgICAgICAgICAgJGRyb3Bkb3duQ29udGVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoJHRoaXMudmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgICBjaXRpZXMubWFwKGVsID0+IHtcbiAgICAgICAgICAgICAgaWYgKGVsLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihsb3dlckNhc2VWYWx1ZSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVzRm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRkcm9wZG93bkNvbnRlbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBgPGEgY2xhc3M9XCJpbnB1dF9fZHJvcGRvd24taXRlbSBkcm9wZG93bl9fbWVudS1pdGVtJHtsb3dlckNhc2VWYWx1ZSA/ICcgaW5wdXRfX2Ryb3Bkb3duLWl0ZW0tLXNtYXJ0JyA6ICcnfVwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIj48c3Bhbj4ke2VsLnN1YnN0cigwLCBsb3dlckNhc2VWYWx1ZS5sZW5ndGgpfTwvc3Bhbj4ke2VsLnN1YnN0cihsb3dlckNhc2VWYWx1ZS5sZW5ndGgpfTwvYT5gKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKG1hdGNoZXNGb3VuZCkge1xuICAgICAgICAgICAgICBBcnJheS5mcm9tKCRsYWJlbEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0X19kcm9wZG93bi1pdGVtJykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAkdGhpcy52YWx1ZSA9IGVsLmlubmVyVGV4dDtcbiAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghJGRyb3Bkb3duRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2Zha2VTY3JvbGwnKSkge1xuICAgICAgICAgICAgJGRyb3Bkb3duRWxlbWVudC5mYWtlU2Nyb2xsKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0ICRkcm9wZG93bkVsZW1lbnQgPSBlbC5jbG9zZXN0KCcuaW5wdXQnKS5xdWVyeVNlbGVjdG9yKCcuZmFrZVNjcm9sbF9fY29udGVudCcpO1xuXG4gICAgICAgIGlmICgkZHJvcGRvd25FbGVtZW50KSB7XG4gICAgICAgICAgJGRyb3Bkb3duRWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG4vLyBoYW5kbGluZyByZXF1aXJlZCBhZ3JlZW1lbnQgY2hlY2tib3hcbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbbmFtZT1cInJ1bGVzQWdyZWVtZW50XCJdJykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gIGNvbnN0ICRzdWJtaXRCdXR0b24gPSBlbC5jbG9zZXN0KCdmb3JtJykucXVlcnlTZWxlY3RvcignYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcblxuICBpZiAoZWwuY2hlY2tlZCkge1xuICAgICRzdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYnV0dG9uLS1kaXNhYmxlZCcpO1xuICAgICRzdWJtaXRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICB9IGVsc2Uge1xuICAgICRzdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCgnYnV0dG9uLS1kaXNhYmxlZCcpO1xuICAgICRzdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICB9XG59KSk7XG5cbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmF1dGhfX3RvZ2dsZSAudGFic19faXRlbScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hdXRoX190eXBlJykudmFsdWUgPSBlbC5kYXRhc2V0LnRhYiAtIDE7XG59KSk7XG4gIC8vIHNjcm9sbCB0byB0dXRvciBzZWN0aW9uXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50dXRvcl9fbmF2LWxpbmsnKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCB0YXJnZXQgPSBlbC5kYXRhc2V0LnRhcmdldDtcblxuICBzY3JvbGxUbyh7XG4gICAgdG9wOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1ibG9jaz1cIiR7dGFyZ2V0fVwiXWApLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHdpbmRvdy5wYWdlWU9mZnNldCAtIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKS5vZmZzZXRIZWlnaHQsXG4gICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gIH0pO1xufSkpO1xuXG4vLyBzZXQgcGF5bWVudCBwZXIgaG91clxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvZmlsZS1oZWFkX19zdWJqZWN0cy1pdGVtJykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgY29uc3QgcGF5bWVudCA9IGVsLmRhdGFzZXQucGF5O1xuXG4gIGVsLmNsb3Nlc3QoJy5wcm9maWxlLWhlYWRfX3N1YmplY3RzJykucXVlcnlTZWxlY3RvcignLnByb2ZpbGUtaGVhZF9fc3ViamVjdHMtaXRlbS0taGlnaGxpZ2h0JykuY2xhc3NMaXN0LnJlbW92ZSgncHJvZmlsZS1oZWFkX19zdWJqZWN0cy1pdGVtLS1oaWdobGlnaHQnKTtcbiAgZWwuY2xhc3NMaXN0LmFkZCgncHJvZmlsZS1oZWFkX19zdWJqZWN0cy1pdGVtLS1oaWdobGlnaHQnKTtcblxuICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50dXRvcl9fY29zdC12YWx1ZSBzcGFuJykpLm1hcChlbCA9PiBlbC5pbm5lclRleHQgPSBwYXltZW50KTtcbn0pKTtcblxufSJdfQ==
