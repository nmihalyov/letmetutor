"use strict";window.onload=function(){var e={popup:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.onHide,n=t.onShow,r=function(){document.body.style.cssText="position: fixed; margin-top: ".concat(-window.scrollY,"px")},i=function(e){document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,e)};return{isShown:function(){return e.classList.contains("popup--opened")},show:function(){var t=new Promise((function(t){e.style.display="block",t()}));r(),t.then((function(){e.classList.add("popup--opened"),"function"==typeof n&&n()}))},hide:function(){var t=-parseInt(document.body.style.marginTop);e.classList.remove("popup--opened"),setTimeout((function(){e.style.display="none",i(t),"function"==typeof o&&o()}),300)}}},validate:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,o=function(e){e.closest(".input").classList.add("input--error"),e.focus()};e.querySelector('button[type="submit"]').addEventListener("click",(function(n){n.preventDefault(),Array.from(e.querySelectorAll("input[required]")).reverse().map((function(e){switch(e.getAttribute("type")){case"text":case"password":""===e.value&&o(e);break;case"email":!t.test(e.value)&&o(e)}}))})),Array.from(e.querySelectorAll("input")).map((function(e){return e.addEventListener("input",(function(){e.closest(".input").classList.remove("input--error")}))}))}};Array.from(document.querySelectorAll(".js-open-popup")).map((function(t){return t.addEventListener("click",(function(t){t.preventDefault();var o=t.currentTarget.dataset.popup,n=document.querySelector('.js-popup[data-popup="'.concat(o,'"]'));e.popup(n).show()}))})),Array.from(document.querySelectorAll(".js-close-popup")).map((function(t){return t.addEventListener("click",(function(t){if(t.preventDefault(),!t.target.closest(".popup__window")||!t.currentTarget.classList.contains("js-popup")){var o=t.currentTarget.closest(".popup");e.popup(o).hide()}}))})),e.validate(document.querySelector("form.popup__restore")),document.addEventListener("click",(function(e){e.target.closest(".dropdown")||Array.from(document.querySelectorAll(".dropdown")).map((function(e){return e.classList.remove("dropdown--active")}))})),Array.from(document.querySelectorAll(".dropdown")).map((function(e){return e.addEventListener("click",(function(e){var t=e.currentTarget;Array.from(document.querySelectorAll(".dropdown")).map((function(e){return e!==t&&e.classList.remove("dropdown--active")})),t.classList.toggle("dropdown--active")}))})),document.addEventListener("click",(function(e){if(e.target.getAttribute("data-toggle")){console.log(!0);var t=e.target,o=t.innerText,n=t.cloneNode(),r=t.closest(".dropdown").querySelector(".dropdown__value");n.innerText=r.innerText,r.innerText=o,t.parentNode.prepend(n),t.parentNode.removeChild(t)}})),Array.from(document.querySelectorAll(".tabs__item")).map((function(e){return e.addEventListener("click",(function(e){var t=e.currentTarget,o=t.dataset.tab;t.closest(".tabs").querySelector(".tabs__item--active").classList.remove("tabs__item--active"),t.classList.add("tabs__item--active"),t.closest("[data-tabs]").querySelector("[data-active]").removeAttribute("data-active"),t.closest("[data-tabs]").querySelector('[data-content="'.concat(o,'"]')).setAttribute("data-active",!0)}))}));var t=document.querySelector(".cookies");JSON.parse(localStorage.getItem("letmetutor:cookiesIsHidden"))?t.remove():(t.classList.add("cookies--shown"),document.querySelector(".cookies__btn").addEventListener("click",(function(){t.classList.remove("cookies--shown"),setTimeout((function(){t.remove(),localStorage.setItem("letmetutor:cookiesIsHidden",!0)}),500)})));var o=document.querySelector(".header__banner"),n=function(){!function(e){document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,e)}(),document.querySelector(".header-menu").classList.remove("header-menu--shown")};JSON.parse(localStorage.getItem("letmetutor:bannerIsHidden"))?o.remove():(o.style.display="flex",document.querySelector(".header__banner-close").addEventListener("click",(function(){o.classList.add("header__banner--hide"),setTimeout((function(){o.remove(),localStorage.setItem("letmetutor:bannerIsHidden",!0)}),500)}))),document.querySelector(".header__burger").addEventListener("click",(function(){-parseInt(document.body.style.marginTop),document.body.style.cssText="position: fixed; margin-top: ".concat(-window.scrollY,"px"),document.querySelector(".header-menu").classList.add("header-menu--shown")})),document.querySelector(".header-menu__backdrop").addEventListener("click",n),document.querySelector(".header-menu__close").addEventListener("click",n),Array.from(document.querySelectorAll(".hero__dropdown-item")).map((function(e){return e.addEventListener("click",(function(e){var t=e.currentTarget,o=t.innerText;t.closest(".hero__input").querySelector(".hero__input-field").value=o}))})),Array.from(document.querySelectorAll(".hero__input-field")).map((function(e){var t=e,o=function(e){var o=t.nextElementSibling,n=o.querySelector(".fakeScroll__content")||o,r=JSON.parse(t.dataset.options),i=t.value.toLowerCase(),a=!1;n.innerHTML="",r.map((function(t){(e||t.toLowerCase().match(i))&&(a=!0,n.insertAdjacentHTML("beforeend",'<a class="hero__dropdown-item dropdown__menu-item" href="javascript:void(0)">'.concat(t,"</a>")))})),a?o.classList.remove("hero__dropdown--hidden"):o.classList.add("hero__dropdown--hidden"),Array.from(n.querySelectorAll(".hero__dropdown-item")).map((function(e){return e.addEventListener("click",(function(){t.value=e.innerText,t.setAttribute("data-value",e.innerText)}))})),e&&!o.classList.contains("fakeScroll")&&n.fakeScroll()};t.addEventListener("input",(function(){return o(!1)})),t.addEventListener("focus",(function(){return o(!0)})),t.addEventListener("blur",(function(){""!==t.value&&t.dataset.value?t.value=t.dataset.value:t.value=""}))}));new Swiper(".popular__grid--mobile",{loop:!0,loopAdditionalSlides:3,spaceBetween:20,slidesPerView:"auto",centeredSlides:!0,breakpoints:{760:{slidesPerView:2,centeredSlides:!1}}}),new Swiper(".reviews__slider",{loop:!0,spaceBetween:20,slidesPerView:3,slidesPerGroup:3,loopAdditionalSlides:3,pagination:{el:".swiper-pagination",clickable:!0}}),new Swiper(".reviews__slider--mobile",{loop:!0,spaceBetween:20,loopAdditionalSlides:3,pagination:{el:".swiper-pagination",clickable:!0}});e.validate(document.querySelector("form.auth__content"))};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJvbmxvYWQiLCIkYXBpIiwiJHBvcHVwIiwiX3JlZiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm9uSGlkZSIsIm9uU2hvdyIsImRvY3VtZW50Iiwic3R5bGUiLCJjb25jYXQiLCJzY3JvbGxZIiwiYm9keSIsImNzc1RleHQiLCJzY3JvbGxUbyIsIm9mZnNldCIsImlzU2hvd24iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNob3ciLCJQcm9taXNlIiwicmVzb2x2ZSIsImRpc3BsYXkiLCJoaWRlT3ZlcmZsb3ciLCJhZGQiLCJwcm9taXNlIiwiaGlkZSIsInBhcnNlSW50IiwibWFyZ2luVG9wIiwicmVtb3ZlIiwiZm9ybSIsImVtYWlsUmVnZXhwIiwic2V0SW52YWxpZElucHV0IiwiaW5wdXQiLCJjbG9zZXN0IiwidmFsaWRhdGUiLCJxdWVyeVNlbGVjdG9yIiwiZSIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJtYXAiLCJlbCIsInByZXZlbnREZWZhdWx0IiwiJGZvcm1JbnB1dHMiLCJnZXRBdHRyaWJ1dGUiLCJ2YWx1ZSIsInRlc3QiLCJhZGRFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsImRhdGFzZXQiLCJwb3B1cCIsIiR0aGlzIiwiY29uc29sZSIsImxvZyIsImNsb25lTm9kZSIsIiRjbG9uZUVsZW1lbnQiLCJpbm5lclRleHQiLCIkZHJvcGRvd25WYWx1ZSIsInBhcmVudE5vZGUiLCJ0YWIiLCJyZW1vdmVBdHRyaWJ1dGUiLCIkY29va2llcyIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzZXRUaW1lb3V0Iiwic2V0SXRlbSIsIiRiYW5uZXIiLCJzaG93T3ZlcmZsb3ciLCJoaWRlSGVhZGVyTWVudSIsIm5leHRFbGVtZW50U2libGluZyIsIiRkcm9wZG93biIsIiRkcm9wZG93bkVsZW1lbnQiLCJoYW5kbGVJbnB1dCIsImZpcnN0UmVuZGVyIiwibWF0Y2hlc0ZvdW5kIiwibG93ZXJDYXNlVmFsdWUiLCJpbm5lckhUTUwiLCJvcHRpb25zIiwibWF0Y2giLCJzZXRBdHRyaWJ1dGUiLCJmYWtlU2Nyb2xsIiwiU3dpcGVyIiwibG9vcEFkZGl0aW9uYWxTbGlkZXMiLCJzbGlkZXNQZXJWaWV3IiwiY2VudGVyZWRTbGlkZXMiLCJicmVha3BvaW50cyIsIjc2MCIsInBvcHVsYXJTbGlkZXIiLCJsb29wIiwic2xpZGVzUGVyR3JvdXAiLCJwYWdpbmF0aW9uIiwicmV2aWV3c1NsaWRlciIsImNsaWNrYWJsZSIsInJldmlld1NsaWRlck1vYmlsZSJdLCJtYXBwaW5ncyI6ImFBQUFBLE9BQU9DLE9BQVMsV0FFZCxJQUFBQyxFQUFBLENBSUZBLE1BQUEsU0FBQUMsR0FBa0QsSUFBQUMsRUFBQUMsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBQSxHQUFyQ0csRUFBcUNKLEVBQXJDSSxPQUFBQyxFQUFxQ0wsRUFBckNLLE9BQVdELEVBQUFBLFdBQTBCRSxTQUFsQkQsS0FBa0JFLE1BQWxCRixRQUFrQixnQ0FBQUcsUUFBQVosT0FBQWEsUUFBQSxPQUc5Q0gsRUFBY0MsU0FBQUEsR0FDZkQsU0FFREksS0FBQUgsTUFBQUksUUFBQSxrQ0FJRWYsT0FBT2dCLFNBQVMsRUFBR0MsSUFBbkJqQixNQUFBQSxDQUtBa0IsUUFBUyxXQUFBLE9BQU1mLEVBQU9nQixVQUFVQyxTQUFTLGtCQUR6Q0MsS0FKQXJCLFdBS0FrQixJQUFBQSxFQUFTLElBQUFJLFNBQUEsU0FBQUMsR0FBQXBCLEVBQU1BLE1BQU1xQixRQUFOLFFBRlZELE9BS0hFLElBRUVGLEVBQUFBLE1BQU8sV0FDUnBCLEVBSERnQixVQUFBTyxJQUFBLGlCQUtZLG1CQUFaRCxHQUVBRSxRQUlHQyxLQW5CTDVCLFdBb0JHLElBTERpQixHQUFBWSxTQUFBbkIsU0FBQUksS0FBQUgsTUFBQW1CLFdBT0YzQixFQUFBZ0IsVUFBQVksT0FBQSxpQkFD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QUFBd0QsRUFBckVVLGNBT0MvQixFQUFBTCxpQkFBQSxTQUFBLFdBQUEsT0FBQTRCLEdBQUEsTUFDRnZCLEVBOUJETCxpQkFBQSxTQUFBLFdBQUEsT0FBQTRCLEdBQUEsTUFrQ0F2QixFQUFNTCxpQkFBaUIsUUFBUSxXQUZ6QkEsS0FBTkssRUFBTUwsT0FBaUJLLEVBQVNGLFFBQUFMLE1BQ2hDTyxFQUFNTCxNQUFBQSxFQUFORyxRQUFBTCxNQURnQ08sRUFBQVAsTUFBTThCLFNBR2hDLElBQUFTLE9BQXVCaEMseUJBQXFCLENBQzlDQSxNQUFBQSxFQUNEaUMscUJBQU0sRUFDTGpDLGFBQU1QLEdBQ1B5QyxjQUFBLE9BQ0ZDLGdCQU5ELEVBT0RDLFlBM0NELENBNENFQyxJQUFNQyxDQUNOQyxjQUQyRCxFQUUzRE4sZ0JBQUFBLE1BSWEsSUFBQUQsT0FBQSxtQkFBQSxDQUNYTyxNQUFBLEVBQ0VMLGFBQUFBLEdBQ0FDLGNBQUFBLEVBRkdLLGVBQUEsRUFETVAscUJBQUEsRUFOOENRLFdBQTNELENBYUFwRCxHQUFNcUQscUJBQ05ILFdBRHFELEtBQUEsSUFBQVAsT0FBQSwyQkFBQSxDQU1yRFMsTUFBQUEsRUFDRXBELGFBQUksR0FDSnNELHFCQUFXLEVBRkRGLFdBQUEsQ0FOWnBELEdBQUEscUJBWUZzRCxXQUFNQyxLQUdKWCxFQUFBQSxTQUFBQSxTQUFvQmxELGNBSDRDIiwiZmlsZSI6ImNvbW1vbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3aW5kb3cub25sb2FkID0gKCkgPT4ge1xuXG4gIC8vINCe0LHRitC10LrRgiDQs9C70L7QsdCw0LvRjNC90L7Qs9C+IEFQSVxuY29uc3QgJGFwaSA9IHt9O1xuXG4vLyBBUEkg0LTQu9GPINGA0LDQsdC+0YLRiyDRgSDQv9C+0L/QsNC/0LDQvNC4XG4kYXBpLnBvcHVwID0gKCRwb3B1cCwgeyBvbkhpZGUsIG9uU2hvdyB9ID0ge30pID0+IHtcbiAgLy8g0J7RgtC60LvRjtGH0LDQtdGCINCy0L7Qt9C80L7QttC90L7RgdGC0Ywg0YHQutGA0L7Qu9C70LjRgtGMINGB0YLRgNCw0L3QuNGG0YNcbiAgY29uc3QgaGlkZU92ZXJmbG93ID0gKCkgPT4ge1xuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3NzVGV4dCA9IGBwb3NpdGlvbjogZml4ZWQ7IG1hcmdpbi10b3A6ICR7LXdpbmRvdy5zY3JvbGxZfXB4YDtcbiAgfTtcbiAgXG4gIC8vINCS0LrQu9GO0YfQsNC10YIg0LLQvtC30LzQvtC20L3QvtGB0YLRjCDRgdC60YDQvtC70LvQuNGC0Ywg0YHRgtGA0LDQvdC40YbRg1xuICBjb25zdCBzaG93T3ZlcmZsb3cgPSBvZmZzZXQgPT4ge1xuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3NzVGV4dCA9ICdwb3NpdGlvbjogc3RhdGljOyBtYXJnaW4tdG9wOiAwJztcbiAgICBcbiAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgb2Zmc2V0KTtcbiAgfTtcbiAgXG4gIHJldHVybiB7XG4gICAgLy8g0JLQvtC30LLRgNCw0YnQsNC10YIgdHJ1ZSwg0LXRgdC70Lgg0L/QvtC/0LDQvyDQv9C+0LrQsNC30YvQstCw0LXRgtGB0Y8sINCyINC40L3QvtC8INGB0LvRg9GH0LDQtSBmYWxzZVxuICAgIGlzU2hvd246ICgpID0+ICRwb3B1cC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwLS1vcGVuZWQnKSxcbiAgICAvLyDQn9C+0LrQsNC30YvQstCw0LXRgiDQv9C+0L/QsNC/XG4gICAgc2hvdygpIHtcbiAgICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgJHBvcHVwLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcblxuICAgICAgaGlkZU92ZXJmbG93KCk7XG5cbiAgICAgIHByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICRwb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cC0tb3BlbmVkJyk7XG4gICAgICAgIGlmICh0eXBlb2Ygb25TaG93ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgb25TaG93KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8g0KHQutGA0YvQstCw0LXRgiDQv9C+0L/QsNC/XG4gICAgaGlkZSgpIHtcbiAgICAgIGNvbnN0IG9mZnNldCA9IC1wYXJzZUludChkb2N1bWVudC5ib2R5LnN0eWxlLm1hcmdpblRvcCk7XG4gIFxuICAgICAgJHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwLS1vcGVuZWQnKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAkcG9wdXAuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgc2hvd092ZXJmbG93KG9mZnNldCk7XG4gICAgICAgIGlmICh0eXBlb2Ygb25IaWRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgb25IaWRlKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIDMwMCk7XG4gICAgfVxuICB9O1xufTtcblxuLy8gQVBJINC00LvRjyDQstCw0LvQuNC00LDRhtC40Lgg0YTQvtGA0LxcbiRhcGkudmFsaWRhdGUgPSBmb3JtID0+IHtcbiAgY29uc3QgZW1haWxSZWdleHAgPSAvXigoW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31dKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLztcbiAgY29uc3Qgc2V0SW52YWxpZElucHV0ID0gaW5wdXQgPT4ge1xuICAgIGlucHV0LmNsb3Nlc3QoJy5pbnB1dCcpLmNsYXNzTGlzdC5hZGQoJ2lucHV0LS1lcnJvcicpO1xuICAgIGlucHV0LmZvY3VzKCk7XG4gIH07XG5cbiAgZm9ybS5xdWVyeVNlbGVjdG9yKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc3QgJGZvcm1JbnB1dHMgPSBBcnJheS5mcm9tKGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbcmVxdWlyZWRdJykpO1xuXG4gICAgJGZvcm1JbnB1dHMucmV2ZXJzZSgpLm1hcChlbCA9PiB7XG4gICAgICBzd2l0Y2goZWwuZ2V0QXR0cmlidXRlKCd0eXBlJykpIHtcbiAgICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgIGNhc2UgJ3Bhc3N3b3JkJzpcbiAgICAgICAgICBlbC52YWx1ZSA9PT0gJycgJiYgc2V0SW52YWxpZElucHV0KGVsKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZW1haWwnOlxuICAgICAgICAgICFlbWFpbFJlZ2V4cC50ZXN0KGVsLnZhbHVlKSAmJiBzZXRJbnZhbGlkSW5wdXQoZWwpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBBcnJheS5mcm9tKGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKSkubWFwKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgIGVsLmNsb3Nlc3QoJy5pbnB1dCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2lucHV0LS1lcnJvcicpO1xuICB9KSk7XG59O1xuXG4gIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLW9wZW4tcG9wdXAnKSkubWFwKGVsID0+XG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc3QgdGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucG9wdXA7XG4gICAgY29uc3QgJHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmpzLXBvcHVwW2RhdGEtcG9wdXA9XCIke3RhcmdldH1cIl1gKTtcbiAgICBcbiAgICAkYXBpLnBvcHVwKCRwb3B1cCkuc2hvdygpO1xuICB9KVxuKTtcbiAgXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1jbG9zZS1wb3B1cCcpKS5tYXAoZWwgPT5cbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBpZighZS50YXJnZXQuY2xvc2VzdCgnLnBvcHVwX193aW5kb3cnKSB8fCAhZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnanMtcG9wdXAnKSkge1xuICAgICAgY29uc3QgJHBvcHVwID0gZS5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5wb3B1cCcpO1xuXG4gICAgICAkYXBpLnBvcHVwKCRwb3B1cCkuaGlkZSgpO1xuICAgIH1cbiAgfSlcbik7XG5cbiRhcGkudmFsaWRhdGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybS5wb3B1cF9fcmVzdG9yZScpKTtcbiAgLy8gY2xvc2UgZHJvcGRvd24gb24gb3V0ZXIgY2xpY2tcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gIGNvbnN0ICR0aGlzID0gZS50YXJnZXQ7XG5cbiAgaWYoISR0aGlzLmNsb3Nlc3QoJy5kcm9wZG93bicpKSB7XG4gICAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZHJvcGRvd24nKSkubWFwKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3Bkb3duLS1hY3RpdmUnKSk7XG4gIH1cbn0pO1xuXG4vLyBvcGVuIGRyb3Bkb3duXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcm9wZG93bicpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgY29uc3QgJHRoaXMgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gIFxuICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcm9wZG93bicpKS5tYXAoZWwgPT4gZWwgIT09ICR0aGlzICYmIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3Bkb3duLS1hY3RpdmUnKSk7XG4gICR0aGlzLmNsYXNzTGlzdC50b2dnbGUoJ2Ryb3Bkb3duLS1hY3RpdmUnKTtcbn0pKTtcblxuLy8gY2hhbmdlIGRyb3Bkb3duIHZhbHVlXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICBpZiAoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRvZ2dsZScpKSB7XG4gICAgY29uc29sZS5sb2codHJ1ZSlcbiAgICBjb25zdCAkdGhpcyA9IGUudGFyZ2V0O1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gJHRoaXMuaW5uZXJUZXh0O1xuICAgIGNvbnN0ICRjbG9uZUVsZW1lbnQgPSAkdGhpcy5jbG9uZU5vZGUoKTtcbiAgICBjb25zdCAkZHJvcGRvd25WYWx1ZSA9ICR0aGlzLmNsb3Nlc3QoJy5kcm9wZG93bicpLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bl9fdmFsdWUnKTtcbiAgICBcbiAgICAkY2xvbmVFbGVtZW50LmlubmVyVGV4dCA9ICRkcm9wZG93blZhbHVlLmlubmVyVGV4dDtcbiAgICAkZHJvcGRvd25WYWx1ZS5pbm5lclRleHQgPSBuZXdWYWx1ZTtcbiAgICBcbiAgICAkdGhpcy5wYXJlbnROb2RlLnByZXBlbmQoJGNsb25lRWxlbWVudCk7XG4gICAgJHRoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCgkdGhpcyk7XG4gIH1cbn0pO1xuICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWJzX19pdGVtJykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9IGUuY3VycmVudFRhcmdldDtcbiAgY29uc3QgdGFyZ2V0ID0gJHRoaXMuZGF0YXNldC50YWI7XG5cbiAgJHRoaXMuY2xvc2VzdCgnLnRhYnMnKS5xdWVyeVNlbGVjdG9yKCcudGFic19faXRlbS0tYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgndGFic19faXRlbS0tYWN0aXZlJyk7XG4gICR0aGlzLmNsYXNzTGlzdC5hZGQoJ3RhYnNfX2l0ZW0tLWFjdGl2ZScpO1xuXG4gICR0aGlzLmNsb3Nlc3QoJ1tkYXRhLXRhYnNdJykucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aXZlXScpLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1hY3RpdmUnKTtcbiAgJHRoaXMuY2xvc2VzdCgnW2RhdGEtdGFic10nKS5xdWVyeVNlbGVjdG9yKGBbZGF0YS1jb250ZW50PVwiJHt0YXJnZXR9XCJdYCkuc2V0QXR0cmlidXRlKCdkYXRhLWFjdGl2ZScsIHRydWUpO1xufSkpO1xuXG4gIGNvbnN0ICRjb29raWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvb2tpZXMnKTtcblxuaWYgKCFKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsZXRtZXR1dG9yOmNvb2tpZXNJc0hpZGRlbicpKSkge1xuICAkY29va2llcy5jbGFzc0xpc3QuYWRkKCdjb29raWVzLS1zaG93bicpO1xuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb29raWVzX19idG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAkY29va2llcy5jbGFzc0xpc3QucmVtb3ZlKCdjb29raWVzLS1zaG93bicpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgJGNvb2tpZXMucmVtb3ZlKCk7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbGV0bWV0dXRvcjpjb29raWVzSXNIaWRkZW4nLCB0cnVlKTtcbiAgICB9LCA1MDApXG4gIH0pO1xufSBlbHNlIHtcbiAgJGNvb2tpZXMucmVtb3ZlKCk7XG59XG4gIGxldCBvZmZzZXQgPSAwO1xuY29uc3QgJGJhbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2Jhbm5lcicpO1xuY29uc3QgaGlkZU92ZXJmbG93ID0gKCkgPT4ge1xuICBvZmZzZXQgPSAtcGFyc2VJbnQoZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW5Ub3ApO1xuICBkb2N1bWVudC5ib2R5LnN0eWxlLmNzc1RleHQgPSBgcG9zaXRpb246IGZpeGVkOyBtYXJnaW4tdG9wOiAkey13aW5kb3cuc2Nyb2xsWX1weGA7XG59O1xuY29uc3Qgc2hvd092ZXJmbG93ID0gb2Zmc2V0ID0+IHtcbiAgZG9jdW1lbnQuYm9keS5zdHlsZS5jc3NUZXh0ID0gJ3Bvc2l0aW9uOiBzdGF0aWM7IG1hcmdpbi10b3A6IDAnO1xuICB3aW5kb3cuc2Nyb2xsVG8oMCwgb2Zmc2V0KTtcbn07XG5jb25zdCBoaWRlSGVhZGVyTWVudSA9ICgpID0+IHtcbiAgc2hvd092ZXJmbG93KCk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItbWVudScpLmNsYXNzTGlzdC5yZW1vdmUoJ2hlYWRlci1tZW51LS1zaG93bicpO1xufTtcblxuaWYgKCFKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsZXRtZXR1dG9yOmJhbm5lcklzSGlkZGVuJykpKSB7XG4gICRiYW5uZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fYmFubmVyLWNsb3NlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgJGJhbm5lci5jbGFzc0xpc3QuYWRkKCdoZWFkZXJfX2Jhbm5lci0taGlkZScpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgJGJhbm5lci5yZW1vdmUoKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsZXRtZXR1dG9yOmJhbm5lcklzSGlkZGVuJywgdHJ1ZSk7XG4gICAgfSwgNTAwKVxuICB9KTtcbn0gZWxzZSB7XG4gICRiYW5uZXIucmVtb3ZlKCk7XG59XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2J1cmdlcicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBoaWRlT3ZlcmZsb3coKTtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlci1tZW51JykuY2xhc3NMaXN0LmFkZCgnaGVhZGVyLW1lbnUtLXNob3duJyk7XG59KTtcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlci1tZW51X19iYWNrZHJvcCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGlkZUhlYWRlck1lbnUpO1xuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlci1tZW51X19jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGlkZUhlYWRlck1lbnUpO1xuICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oZXJvX19kcm9wZG93bi1pdGVtJykpLm1hcChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9IGUuY3VycmVudFRhcmdldDtcbiAgY29uc3QgdmFsdWUgPSAkdGhpcy5pbm5lclRleHQ7XG5cbiAgJHRoaXMuY2xvc2VzdCgnLmhlcm9fX2lucHV0JykucXVlcnlTZWxlY3RvcignLmhlcm9fX2lucHV0LWZpZWxkJykudmFsdWUgPSB2YWx1ZTtcbn0pKTtcblxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaGVyb19faW5wdXQtZmllbGQnKSkubWFwKGVsID0+IHtcbiAgY29uc3QgJHRoaXMgPSBlbDtcbiAgY29uc3QgaGFuZGxlSW5wdXQgPSBmaXJzdFJlbmRlciA9PiB7XG4gICAgY29uc3QgJGRyb3Bkb3duRWxlbWVudCA9ICR0aGlzLm5leHRFbGVtZW50U2libGluZztcbiAgICBjb25zdCAkZHJvcGRvd24gPSAkZHJvcGRvd25FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mYWtlU2Nyb2xsX19jb250ZW50JykgfHwgJGRyb3Bkb3duRWxlbWVudDtcbiAgICBjb25zdCBvcHRpb25zID0gSlNPTi5wYXJzZSgkdGhpcy5kYXRhc2V0Lm9wdGlvbnMpO1xuICAgIGNvbnN0IGxvd2VyQ2FzZVZhbHVlID0gJHRoaXMudmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICBsZXQgbWF0Y2hlc0ZvdW5kID0gZmFsc2U7XG5cbiAgICAkZHJvcGRvd24uaW5uZXJIVE1MID0gJyc7XG4gIFxuICAgIG9wdGlvbnMubWFwKGVsID0+IHtcbiAgICAgIGlmIChmaXJzdFJlbmRlciB8fCBlbC50b0xvd2VyQ2FzZSgpLm1hdGNoKGxvd2VyQ2FzZVZhbHVlKSkge1xuICAgICAgICBtYXRjaGVzRm91bmQgPSB0cnVlO1xuICAgICAgICAkZHJvcGRvd24uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBgPGEgY2xhc3M9XCJoZXJvX19kcm9wZG93bi1pdGVtIGRyb3Bkb3duX19tZW51LWl0ZW1cIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCI+JHtlbH08L2E+YClcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChtYXRjaGVzRm91bmQpIHtcbiAgICAgICRkcm9wZG93bkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGVyb19fZHJvcGRvd24tLWhpZGRlbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZHJvcGRvd25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hlcm9fX2Ryb3Bkb3duLS1oaWRkZW4nKTtcbiAgICB9XG5cbiAgICBBcnJheS5mcm9tKCRkcm9wZG93bi5xdWVyeVNlbGVjdG9yQWxsKCcuaGVyb19fZHJvcGRvd24taXRlbScpKS5tYXAoZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAkdGhpcy52YWx1ZSA9IGVsLmlubmVyVGV4dDtcbiAgICAgICR0aGlzLnNldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScsIGVsLmlubmVyVGV4dCk7XG4gICAgfSkpO1xuXG4gICAgaWYgKGZpcnN0UmVuZGVyICYmICEkZHJvcGRvd25FbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZmFrZVNjcm9sbCcpKSB7XG4gICAgICAkZHJvcGRvd24uZmFrZVNjcm9sbCgpO1xuICAgIH1cbiAgfTtcblxuICAkdGhpcy5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IGhhbmRsZUlucHV0KGZhbHNlKSk7XG4gICR0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4gaGFuZGxlSW5wdXQodHJ1ZSkpO1xuICAkdGhpcy5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4ge1xuICAgIGlmICgkdGhpcy52YWx1ZSA9PT0gJycgfHwgISR0aGlzLmRhdGFzZXQudmFsdWUpIHtcbiAgICAgICR0aGlzLnZhbHVlID0gJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0aGlzLnZhbHVlID0gJHRoaXMuZGF0YXNldC52YWx1ZTtcbiAgICB9XG4gIH0pO1xufSk7XG4gIGNvbnN0IHBvcHVsYXJTbGlkZXIgPSBuZXcgU3dpcGVyKCcucG9wdWxhcl9fZ3JpZC0tbW9iaWxlJywge1xuICBsb29wOiB0cnVlLFxuICBsb29wQWRkaXRpb25hbFNsaWRlczogMyxcbiAgc3BhY2VCZXR3ZWVuOiAyMCxcbiAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxuICBjZW50ZXJlZFNsaWRlczogdHJ1ZSxcbiAgYnJlYWtwb2ludHM6IHtcbiAgICA3NjA6IHtcbiAgICAgIHNsaWRlc1BlclZpZXc6IDIsXG4gICAgICBjZW50ZXJlZFNsaWRlczogZmFsc2VcbiAgICB9XG4gIH1cbn0pO1xuICBjb25zdCByZXZpZXdzU2xpZGVyID0gbmV3IFN3aXBlcignLnJldmlld3NfX3NsaWRlcicsIHtcbiAgbG9vcDogdHJ1ZSxcbiAgc3BhY2VCZXR3ZWVuOiAyMCxcbiAgc2xpZGVzUGVyVmlldzogMyxcbiAgc2xpZGVzUGVyR3JvdXA6IDMsXG4gIGxvb3BBZGRpdGlvbmFsU2xpZGVzOiAzLFxuICBwYWdpbmF0aW9uOiB7XG4gICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxuICAgIGNsaWNrYWJsZTogdHJ1ZVxuICB9XG59KTtcblxuY29uc3QgcmV2aWV3U2xpZGVyTW9iaWxlID0gbmV3IFN3aXBlcignLnJldmlld3NfX3NsaWRlci0tbW9iaWxlJywge1xuICBsb29wOiB0cnVlLFxuICBzcGFjZUJldHdlZW46IDIwLFxuICBsb29wQWRkaXRpb25hbFNsaWRlczogMyxcbiAgcGFnaW5hdGlvbjoge1xuICAgIGVsOiAnLnN3aXBlci1wYWdpbmF0aW9uJyxcbiAgICBjbGlja2FibGU6IHRydWVcbiAgfVxufSk7XG4gICRhcGkudmFsaWRhdGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybS5hdXRoX19jb250ZW50JykpO1xuXG59Il19
